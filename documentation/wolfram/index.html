<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>OpenVDBLink Documentation</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { font-weight: bold; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #666666; } /* String */
    code span.va { color: #032cc3; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="ovdbmdoc.css" />
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">OpenVDBLink
<img src="img/17um0s6w22np5.png" loading="lazy" width=108 height=46></h1>
<p class="subtitle"><font size="+2">an <a href="http://openvdb.org">OpenVDB</a> interface
for <em>Mathematica</em></font><br>&nbsp;&nbsp;openvdb version 10.0 (October 31, 2022)</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#installation" id="toc-installation">Installation</a>
<ul>
<li><a href="#dependencies-and-requirements"
id="toc-dependencies-and-requirements">Dependencies and
requirements<span class="link-back-triangle">▴</span></a></li>
<li><a href="#loading-and-compilation"
id="toc-loading-and-compilation">Loading and compilation<span
class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#basic-usage" id="toc-basic-usage">Basic usage</a>
<ul>
<li><a href="#available-symbols" id="toc-available-symbols">Available
symbols<span class="link-back-triangle">▴</span></a></li>
<li><a href="#basic-examples" id="toc-basic-examples">Basic
examples<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#global-settings" id="toc-global-settings">Global
settings</a></li>
<li><a href="#grids" id="toc-grids">Grids</a>
<ul>
<li><a href="#grid-modification" id="toc-grid-modification">Grid
modification<span class="link-back-triangle">▴</span></a></li>
<li><a href="#list-of-grids" id="toc-list-of-grids">List of grids<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#type-q-functions" id="toc-type-q-functions">Type Q
functions<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#grid-properties" id="toc-grid-properties">Grid
properties</a></li>
<li><a href="#level-set-creation" id="toc-level-set-creation">Level set
creation</a>
<ul>
<li><a href="#basics" id="toc-basics">Basics<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#regions" id="toc-regions">Regions<span
class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#fog-volumes" id="toc-fog-volumes">Fog volumes</a></li>
<li><a href="#mesh" id="toc-mesh">Mesh</a></li>
<li><a href="#values-states" id="toc-values-states">Values &amp;
states</a>
<ul>
<li><a href="#values" id="toc-values">Values<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#states" id="toc-states">States<span
class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#io" id="toc-io">I/O</a></li>
<li><a href="#rendering" id="toc-rendering">Rendering</a></li>
<li><a href="#aggregate-data" id="toc-aggregate-data">Aggregate data</a>
<ul>
<li><a href="#data" id="toc-data">Data<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#slice" id="toc-slice">Slice<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#active-regions" id="toc-active-regions">Active
regions<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#csg-combination" id="toc-csg-combination">CSG &amp;
combination</a>
<ul>
<li><a href="#csg" id="toc-csg">CSG<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#in-place-csg" id="toc-in-place-csg">In-place CSG<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#clipping" id="toc-clipping">Clipping<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#minmax-combinations" id="toc-minmax-combinations">Min/Max
combinations<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#filter" id="toc-filter">Filter</a></li>
<li><a href="#image" id="toc-image">Image</a></li>
<li><a href="#measure" id="toc-measure">Measure</a>
<ul>
<li><a href="#spatial-measure" id="toc-spatial-measure">Spatial
measure<span class="link-back-triangle">▴</span></a></li>
<li><a href="#intrinsic-measure" id="toc-intrinsic-measure">Intrinsic
measure<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#morphology" id="toc-morphology">Morphology</a>
<ul>
<li><a href="#bandwidth" id="toc-bandwidth">Bandwidth<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#morphology-1" id="toc-morphology-1">Morphology<span
class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#transform" id="toc-transform">Transform</a>
<ul>
<li><a href="#geometric-transformation"
id="toc-geometric-transformation">Geometric transformation<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#value-transformation" id="toc-value-transformation">Value
transformation<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#testing" id="toc-testing">Testing</a>
<ul>
<li><a href="#running-unit-tests" id="toc-running-unit-tests">Running
unit tests<span class="link-back-triangle">▴</span></a></li>
<li><a href="#adding-unit-tests" id="toc-adding-unit-tests">Adding unit
tests<span class="link-back-triangle">▴</span></a></li>
</ul></li>
<li><a href="#acknowledgements"
id="toc-acknowledgements">Acknowledgements</a></li>
<li><a href="#license" id="toc-license">License</a>
<ul>
<li><a href="#about" id="toc-about">About<span
class="link-back-triangle">▴</span></a></li>
<li><a href="#contributor-license-agreement"
id="toc-contributor-license-agreement">Contributor License
Agreement<span class="link-back-triangle">▴</span></a></li>
<li><a href="#dco-sign-offs" id="toc-dco-sign-offs">DCO sign-offs<span
class="link-back-triangle">▴</span></a></li>
</ul></li>
</ul>
</nav>
<h1 id="introduction">Introduction</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<p>OpenVDBLink provides a <em>Mathematica</em> interface to <a
href="https://www.openvdb.org">OpenVDB</a>, an efficient sparse voxel
data structure ubiquitous in the VFX industry. This link ports over
access to various grid containers including level sets, fog volumes,
vector grids, integer grids, Boolean grids, and mask grids.
Construction, modification, combinations, visualisations, queries,
import, export, etc. can be achieved over grids too. Any
<em>Mathematica</em> 3D region that’s <code>ConstantRegionQ</code> and
<code>BoundedRegionQ</code> can be represented as a level set grid,
providing a more seamless integration with OpenVDB.</p>
<p>OpenVDB is an Academy Award-winning open-source C++ library
comprising a novel hierarchical data structure and a suite of tools for
the efficient storage and manipulation of sparse volumetric data
discretized on three-dimensional grids. It was developed by <a
href="http://www.dreamworksanimation.com/">DreamWorks Animation</a> for
use in volumetric applications typically encountered in feature film
production and is now maintained by the <a
href="https://www.aswf.io/">Academy Software Foundation (ASWF)</a>.</p>
<p>This notebook starts of with basic overview, followed by a thorough
set of examples for each symbol in OpenVDBLink. For ease of navigation,
symbols are grouped into sections, and sometimes subsections, based on
functional area.</p>
<p>This notebook cannot be saved, so feel free to edit and evaluate
input cells, and experiment!</p>
<p>Contributions are to this project welcome!</p>
<h1 id="installation">Installation</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#dependencies-and-requirements"
class="local-toc-link-1">Dependencies and requirements</a></li>
<li><a href="#loading-and-compilation" class="local-toc-link-1">Loading
and compilation</a></li>
</ul>
</div>
<h2 id="dependencies-and-requirements">Dependencies and requirements<a
href="#installation" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>OpenVDBLink requires <em>Mathematica</em> version 11.0 or higher.</p>
<p>It also requires openvdb itself is installed and any downstream
dependencies openvdb itself has.</p>
<h2 id="loading-and-compilation">Loading and compilation<a
href="#installation" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#loading" class="local-toc-link-2">Loading</a></li>
<li><a href="#compilation" class="local-toc-link-2">Compilation</a></li>
</ul>
</div>
<h3 id="loading">Loading<a href="#loading-and-compilation"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Find the openvdb_wolfram directory in the openvdb directory and add
this to <code>$Path</code>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="va">vdbpath</span> <span class="op">=</span> <span class="fu">FileNameJoin</span><span class="op">[{</span><span class="st">&quot;path&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;openvdb&quot;</span>, <span class="st">&quot;openvdb_wolfram&quot;</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Path</span> <span class="op">=</span> <span class="fu">DeleteDuplicates</span><span class="op">@</span><span class="fu">Join</span><span class="op">[</span><span class="fu">$Path</span>, <span class="op">{</span><span class="va">vdbpath</span><span class="op">}];</span></span></code></pre></div>
<p>Load the package:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>&lt;&lt; OpenVDBLink`</span></code></pre></div>
<h3 id="compilation">Compilation<a href="#loading-and-compilation"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Only during the first time loading the package, it will automatically
compile the necessary binary:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>&lt;&lt; OpenVDBLink`</span></code></pre></div>
<p><img src="img/1624hcpu56x15.png" loading="lazy" width=659 height=16></p>
<p><img src="img/1qlzbmz3ho9my.png" loading="lazy" width=237 height=16></p>
<p><img src="img/0kw449dpt3nbx.png" loading="lazy" width=194 height=16></p>
<p><img src="img/05scg1gb3zctt.png" loading="lazy" width=466 height=16></p>
<p><img src="img/0jrm60785wv3g.png" loading="lazy" width=187 height=16></p>
<p>If compilation fails, you may need to add any include/link paths that
are not currently in your path environment. These can be added in
<code>BuildSettings . m</code></p>
<p>For example, here are some paths added before compiling for
MacOS:</p>
<p><img src="img/0rhopik46nxag.png" loading="lazy" width=904 height=425></p>
<p>Once these are set, reload and then recompile. Here the input True is
optional and tells the system to print the compile command as well as
any warnings or errors during compile:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>&lt;&lt; OpenVDBLink`</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="va">OpenVDBLink`Developer`Recompile</span><span class="op">[</span><span class="fu">True</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1624hcpu56x15.png" loading="lazy" width=659 height=16></p>
<p><img src="img/1qlzbmz3ho9my.png" loading="lazy" width=237 height=16></p>
<p><img src="img/0kw449dpt3nbx.png" loading="lazy" width=194 height=16></p>
<p><img src="img/05scg1gb3zctt.png" loading="lazy" width=466 height=16></p>
<p><img src="img/0jrm60785wv3g.png" loading="lazy" width=187 height=16></p>
<blockquote>
<div class="sourceCode" id="cb6"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/usr/bin/clang -dynamiclib -o \&quot;/Users/ghurst/openvdb/openvdb_wolfram/OpenVDBLink/LibraryResources/MacOSX-x86-64/Working-2995MAC-GHURST-2-36758-366333440-1/OpenVDBLink.dylib\&quot; -arch x86_64 -mmacosx-version-min=10.14 -install_name @rpath/OpenVDBLink.dylib -fPIC -O2 -std=c++11 -std=c++14 -ltbb -lHalf -lopenvdb -flto  -I\&quot;/Applications/Mathematica.app/Contents/SystemFiles/IncludeFiles/C\&quot; -I\&quot;/Applications/Mathematica.app/Contents/SystemFiles/Links/MathLink/DeveloperKit/MacOSX-x86-64/CompilerAdditions\&quot; -I\&quot;/Users/ghurst/openvdb/openvdb_wolfram/OpenVDBLink/LTemplate/IncludeFiles\&quot; \&quot;/Users/ghurst/openvdb/openvdb_wolfram/OpenVDBLink/Source/ExplicitGrids/LTemplate-OpenVDBLink.cpp\&quot;  -F\&quot;/Applications/Mathematica.app/Contents/SystemFiles/Links/MathLink/DeveloperKit/MacOSX-x86-64/CompilerAdditions\&quot; -L\&quot;/Applications/Mathematica.app/Contents/SystemFiles/Libraries/MacOSX-x86-64\&quot;  -framework \&quot;mathlink\&quot; -lc++ -framework Foundation 2&gt;&amp;1&quot;</span></span></code></pre></div>
</blockquote>
<h1 id="basic-usage">Basic usage</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#available-symbols" class="local-toc-link-1">Available
symbols</a></li>
<li><a href="#basic-examples" class="local-toc-link-1">Basic
examples</a></li>
</ul>
</div>
<h2 id="available-symbols">Available symbols<a href="#basic-usage"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="sourceCode" id="cb8"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Length</span><span class="op">[</span><span class="fu">Names</span><span class="op">[</span><span class="st">&quot;OpenVDBLink`*&quot;</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb9"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fl">72</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb10"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>?? OpenVDBLink`*</span></code></pre></div>
<p><img src="img/183j71c08wsgm.png" loading="lazy" width=1586 height=317></p>
<h2 id="basic-examples">Basic examples<a href="#basic-usage"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#grid-basics" class="local-toc-link-2">Grid basics</a></li>
<li><a href="#grid-types" class="local-toc-link-2">Grid types</a></li>
<li><a href="#level-set" class="local-toc-link-2">Level set</a></li>
<li><a href="#fog-volume" class="local-toc-link-2">Fog volume</a></li>
<li><a href="#import-meshing" class="local-toc-link-2">Import &amp;
meshing</a></li>
</ul>
</div>
<h3 id="grid-basics">Grid basics<a href="#basic-examples"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Create a float grid with voxel size 1.0:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0gkkfuywutnon.png" loading="lazy" width=258 height=47></p>
<p><code>OpenVDBCreateGrid</code> returns an empty grid:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Empty&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb13"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<p>Short hand syntax:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Empty&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb15"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<p>Set values at index coordinates <code>{0, 0, 0}</code> and
<code>{1, 0, 0}</code>:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">}];</span></span></code></pre></div>
<p>The grid is no longer empty:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Empty&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb18"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">False</span></span></code></pre></div>
</blockquote>
<h3 id="grid-types">Grid types<a href="#basic-examples"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>List of supported grid types:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGridTypes</span><span class="op">[]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb20"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Scalar&quot;</span>, <span class="st">&quot;Vector&quot;</span>, <span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Here, <code>"Scalar"</code> is a synonym for <code>"Float"</code> and
<code>"Vector"</code> is a synonym for <code>"Vec3S"</code> (3D scalar
(float) valued vector).</p>
<p>Create a grid with voxel size 1.0 for each type:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="va">grids</span> <span class="op">=</span> <span class="fu">Association</span><span class="op">[</span><span class="fu">Table</span><span class="op">[</span><span class="va">type</span> <span class="op">-&gt;</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">type</span><span class="op">]</span>, <span class="op">{</span><span class="va">type</span>, <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]}]]</span></span></code></pre></div>
<p><img src="img/0vxoefsc5dkhs.png" loading="lazy" width=1341 height=218></p>
<p>Retrieve their default background values:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>#<span class="op">[</span><span class="st">&quot;BackgroundValue&quot;</span><span class="op">]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">grids</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb23"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;|</span><span class="st">&quot;Double&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.</span>, <span class="st">&quot;Float&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.</span>, <span class="st">&quot;Byte&quot;</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="st">&quot;Int32&quot;</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="st">&quot;Int64&quot;</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="st">&quot;UInt32&quot;</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="st">&quot;Vec2D&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="st">&quot;Vec2I&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="st">&quot;Vec2S&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="st">&quot;Vec3D&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="st">&quot;Vec3I&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="st">&quot;Vec3S&quot;</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="st">&quot;Boolean&quot;</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="st">&quot;Mask&quot;</span> <span class="op">-&gt;</span> <span class="fu">Missing</span><span class="op">[</span><span class="st">&quot;NotApplicable&quot;</span><span class="op">]|&gt;</span></span></code></pre></div>
</blockquote>
<h3 id="level-set">Level set<a href="#basic-examples"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Create a level set from a mesh, with voxel size 0.05 and narrow band
half width 3.0:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0v2yw1xo3aosq.png" loading="lazy" width=240 height=126></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="va">dinovdb</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">mesh</span>, <span class="fl">0.05</span>, <span class="fl">3.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1g8g117ugydpg.png" loading="lazy" width=258 height=47></p>
<p>Alternatively, first apply the voxel size and half width as global
settings. These values will not need to be passed in explicitly anymore,
unless different values are desired:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="va">dinovdb</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/12ih07z7vw7d7.png" loading="lazy" width=258 height=47></p>
<p>Retrieve properties about the grid:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="va">dinovdb</span><span class="op">[</span><span class="st">&quot;PropertyValueGrid&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1w2esk6hgnch2.png" loading="lazy" width=519 height=554></p>
<p>Drill a hole in the grid and apply 8 applications of a mean filter
with window 2:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDifferenceFrom</span><span class="op">[</span><span class="va">dinovdb</span>, <span class="fu">Cylinder</span><span class="op">[{{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">0.5</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0.5</span><span class="op">}}</span>, <span class="fl">0.5</span><span class="op">]];</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">dinovdb</span>, <span class="op">{</span><span class="st">&quot;Mean&quot;</span>, <span class="fl">2</span><span class="op">}</span>, <span class="fl">8</span><span class="op">];</span></span></code></pre></div>
<p>Since <code>$OpenVDBSpacing</code> and <code>$OpenVDBHalfWidth</code>
have been set, the cylinder in the line above was automatically
converted to a level set under the hood.</p>
<p>Render the object:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">dinovdb</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1n2ohsvcac99r.png" loading="lazy" width=247 height=140></p>
<h3 id="fog-volume">Fog volume<a href="#basic-examples"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Create a level set representation of a unit ball with voxel size
0.1:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/12f541waqwnba.png" loading="lazy" width=258 height=47></p>
<p>Create a fog volume:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/03qye2abzo7q6.png" loading="lazy" width=258 height=47></p>
<p>Retrieve the data as an Image3D object:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="va">im3d</span> <span class="op">=</span> <span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1swpred6gphq8.png" loading="lazy" width=240 height=261></p>
<p>Examine the slices:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image3DSlices</span><span class="op">[</span><span class="va">im3d</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0j01158ichjiu.png" loading="lazy" width=611 height=22></p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image3DSlices</span><span class="op">[</span><span class="va">im3d</span>, <span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0yhz6zeaoj2tn.png" loading="lazy" width=240 height=240></p>
<h3 id="import-meshing">Import &amp; meshing<a href="#basic-examples"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>Import a grid from a URL:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBImport</span><span class="op">[</span><span class="st">&quot;https://artifacts.aswf.io/io/aswf/openvdb/models/bunny.vdb/1.0.0/bunny.vdb-1.0.0.zip&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1ovn63stfsf30.png" loading="lazy" width=247 height=46></p>
<p>Convert it to a mesh:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshCellCount</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb40"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1339734</span>, <span class="fl">4019196</span>, <span class="fl">2679464</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Retrieve a smaller mesh:</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh2</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1qf2uhpuv1mzr.png" loading="lazy" width=240 height=279></p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshCellCount</span><span class="op">[</span><span class="va">mesh2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb43"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">22585</span>, <span class="fl">67749</span>, <span class="fl">45166</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<h1 id="global-settings">Global settings</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbspacing"
class="local-toc-link-2">$OpenVDBSpacing</a></li>
<li><a href="#openvdbhalfwidth"
class="local-toc-link-2">$OpenVDBHalfWidth</a></li>
<li><a href="#openvdbcreator"
class="local-toc-link-2">$OpenVDBCreator</a></li>
<li><a href="#openvdbdefaultspace"
class="local-toc-link-2">OpenVDBDefaultSpace</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbspacing">$OpenVDBSpacing<a href="#global-settings"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>?$OpenVDBSpacing</span></code></pre></div>
<p><img src="img/1pp07p3zyu9mg.png" loading="lazy" width=479 height=78></p>
<hr />
<p>In a fresh kernel, <code>$OpenVDBSpacing</code> has no value:</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb46"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span></span></code></pre></div>
</blockquote>
<hr />
<p>When <code>$OpenVDBSpacing</code> has no value, operations that need
an explicit voxel size must have it passed in:</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[]</span></span></code></pre></div>
<p><img src="img/17nemlwbprcq4.png" loading="lazy" width=545 height=20></p>
<blockquote>
<div class="sourceCode" id="cb48"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<p>Create a grid with voxel size 0.1:</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">0.1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0m2vahpg760kc.png" loading="lazy" width=258 height=47></p>
<hr />
<p>Set <code>$OpenVDBSpacing</code> to 0.1. Now every grid that’s
created without being provided a voxel size will use 0.1:</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb51"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[];</span></span></code></pre></div>
<div class="sourceCode" id="cb52"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;VoxelSize&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb53"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.1</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create a level set representation of a unit ball and render it, using
the settings for <code>$OpenVDBSpacing</code> and
<code>$OpenVDBHalfWidth</code>:</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb55"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]]</span></span></code></pre></div>
<p><img src="img/09ivef81403x6.png" loading="lazy" width=172 height=172></p>
<hr />
<p>When both <code>$OpenVDBSpacing</code> and
<code>$OpenVDBHalfWidth</code> are set, operations that require level
set inputs will automatically convert valid regions into a level set
using the global settings for voxel size and half width.</p>
<p>Passing in a region to an OpenVDBLink function automatically converts
it into a level set under the hood.</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb57"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/09ivef81403x6.png" loading="lazy" width=172 height=172></p>
<hr />
<p>Clear <code>$OpenVDBSpacing</code> using <code>Unset</code>
(<code>=.</code>):</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=.</span></span></code></pre></div>
<p>It no longer has a value:</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb60"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbhalfwidth">$OpenVDBHalfWidth<a href="#global-settings"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>?$OpenVDBHalfWidth</span></code></pre></div>
<p><img src="img/06bxwm89qya0t.png" loading="lazy" width=727 height=78></p>
<hr />
<p>In a fresh kernel, <code>$OpenVDBHalfWidth</code> has value 3.0:</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb63"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3.</span></span></code></pre></div>
</blockquote>
<hr />
<p>When <code>$OpenVDBHalfWidth</code> has a value, the
<code>OpenVDBLevelSet</code> constructor will assume its value:</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb65"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3.</span></span></code></pre></div>
</blockquote>
<p>Change its value:</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">4.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb67"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb68"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4.</span></span></code></pre></div>
</blockquote>
<p>An explicitly passed in a half width takes precedence over
<code>$OpenVDBHalfWidth</code>:</p>
<div class="sourceCode" id="cb69"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">];</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb70"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create a level set representation of a unit ball and render it, using
the settings for <code>$OpenVDBSpacing</code> and
<code>$OpenVDBHalfWidth</code>:</p>
<div class="sourceCode" id="cb71"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb72"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]]</span></span></code></pre></div>
<p><img src="img/09ivef81403x6.png" loading="lazy" width=172 height=172></p>
<hr />
<p>When both <code>$OpenVDBSpacing</code> and
<code>$OpenVDBHalfWidth</code> are set, operations that require level
set inputs will automatically convert valid regions into a level set
using the global settings for voxel size and half width.</p>
<p>Passing in a region to an OpenVDBLink function automatically converts
it into a level set under the hood.</p>
<div class="sourceCode" id="cb73"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb74"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/09ivef81403x6.png" loading="lazy" width=172 height=172></p>
<hr />
<p>Clear <code>$OpenVDBHalfWidth</code> using <code>Unset</code>
(<code>=.</code>):</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=.</span></span></code></pre></div>
<p>It no longer has a value:</p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb77"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbcreator">$OpenVDBCreator<a href="#global-settings"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb78"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>?$OpenVDBCreator</span></code></pre></div>
<p><img src="img/0wtxb6jfkwt1i.png" loading="lazy" width=688 height=78></p>
<hr />
<p>In a fresh kernel, <code>$OpenVDBCreator</code> has value None:</p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBCreator</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb80"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">None</span></span></code></pre></div>
</blockquote>
<hr />
<p>When <code>$OpenVDBCreator</code> has no value, operations that
create grids will not set a creator:</p>
<div class="sourceCode" id="cb81"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb82"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Creator&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb83"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Missing</span><span class="op">[</span><span class="st">&quot;NotAvailable&quot;</span><span class="op">]</span></span></code></pre></div>
</blockquote>
<p>Create a grid with a creator:</p>
<div class="sourceCode" id="cb84"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Creator&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb85"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Creator&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb86"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<hr />
<p>Set <code>$OpenVDBCreator</code>. Now every grid that’s created
without being provided a voxel size will use 0.1:</p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBCreator</span> <span class="op">=</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb88"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb89"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Creator&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb90"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbdefaultspace">OpenVDBDefaultSpace<a
href="#global-settings" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb91"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDefaultSpace</span></code></pre></div>
<p><img src="img/0spoaauib2jxn.png" loading="lazy" width=1049 height=78></p>
<hr />
<p>Consider a level set representation of a unit ball centered at the
origin with voxel size 0.1:</p>
<div class="sourceCode" id="cb92"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<p>The point <code>{2, 0, 0}</code> (in world space) is distance 1 from
the ball, since the closest point on its boundary is
<code>{1, 0, 0}</code>:</p>
<div class="sourceCode" id="cb93"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SignedRegionDistance</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb94"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBSignedDistance</code> returns a similar result since the
input point is assumed to be in world space by default:</p>
<div class="sourceCode" id="cb95"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb96"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.00751</span></span></code></pre></div>
</blockquote>
<p>We can determine that <code>OpenVDBSignedDistance</code> takes
coordinates in world space by querying
<code>OpenVDBDefaultSpace</code>:</p>
<div class="sourceCode" id="cb97"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSignedDistance</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb98"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>On the other hand, we might want to know the signed distance of the
coordinate 2 voxels from the origin, e.g. <code>{2, 0, 0}</code> in
index space.</p>
<p>Query <code>OpenVDBSignedDistance</code> with a point in index
space:</p>
<div class="sourceCode" id="cb99"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb100"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="fl">0.798116</span></span></code></pre></div>
</blockquote>
<p>In this example, the index coordinate <code>{2, 0, 0}</code> is
equivalent to the world coordinate <code>{0.2, 0, 0}</code> since the
voxel size is 0.1:</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span>, </span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span>, </span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span> </span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb102"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="op">{-</span><span class="fl">0.798116</span>, <span class="op">-</span><span class="fl">0.798116</span>, <span class="op">-</span><span class="fl">0.798116</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>The world coordinate <code>{2, 0, 0}</code> is equivalent to the
index coordinate <code>{20, 0, 0}</code> since the voxel size is
0.1:</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span>, </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span>, </span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">20</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span> </span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb104"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1.00751</span>, <span class="fl">1.00751</span>, <span class="fl">1.00751</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Gather functions based on their default space:</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="va">spacedata</span> <span class="op">=</span> <span class="fu">PositionIndex</span><span class="op">[</span><span class="fu">Association</span><span class="op">[</span># <span class="op">-&gt;</span> <span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">ToExpression</span><span class="op">[</span>#<span class="op">]]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="fu">Names</span><span class="op">[</span><span class="st">&quot;OpenVDBLink`*&quot;</span><span class="op">]]];</span></span></code></pre></div>
<p>Gather all functions that, by default, work in index space:</p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="va">spacedata</span><span class="op">[</span><span class="st">&quot;Index&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Multicolumn</span></span></code></pre></div>
<p><img src="img/0ohu30lhkc37x.png" loading="lazy" width=725 height=70></p>
<p>Gather all functions that, by default, work in world space:</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="va">spacedata</span><span class="op">[</span><span class="st">&quot;World&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Multicolumn</span></span></code></pre></div>
<p><img src="img/0w8kxkbvfp6oj.png" loading="lazy" width=577 height=70></p>
<h1 id="grids">Grids</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#grid-modification" class="local-toc-link-1">Grid
modification</a></li>
<li><a href="#list-of-grids" class="local-toc-link-1">List of
grids</a></li>
<li><a href="#type-q-functions" class="local-toc-link-1">Type Q
functions</a></li>
</ul>
</div>
<h2 id="grid-modification">Grid modification<a href="#grids"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbcreategrid"
class="local-toc-link-2">OpenVDBCreateGrid</a></li>
<li><a href="#openvdbcleargrid"
class="local-toc-link-2">OpenVDBClearGrid</a></li>
<li><a href="#openvdbcopygrid"
class="local-toc-link-2">OpenVDBCopyGrid</a></li>
</ul>
</div>
<h3 id="openvdbcreategrid">OpenVDBCreateGrid<a href="#grid-modification"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb108"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBCreateGrid</span></code></pre></div>
<p><img src="img/1rhkvdxtbf3y5.png" loading="lazy" width=383 height=78></p>
<hr />
<p>Create a float grid with voxel size 1.0:</p>
<div class="sourceCode" id="cb109"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/17jxww1047kxa.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>OpenVDBCreateGrid</code> creates an empty grid:</p>
<div class="sourceCode" id="cb110"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Empty&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb111"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create a vector grid:</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vector&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0g9uf956w7jhn.png" loading="lazy" width=265 height=47></p>
<hr />
<p>For each available grid type, create an empty grid with voxel size
0.5:</p>
<div class="sourceCode" id="cb113"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb114"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb115"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="va">grids</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, #<span class="op">]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">types</span></span></code></pre></div>
<p><img src="img/01d1o21ifeutt.png" loading="lazy" width=1390 height=161></p>
<hr />
<p>No arguments are necessary if <code>$OpenVDBSpacing</code> is
set:</p>
<div class="sourceCode" id="cb116"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb117"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[]</span></span></code></pre></div>
<p><img src="img/1q6e39edtp5cv.png" loading="lazy" width=258 height=47></p>
<div class="sourceCode" id="cb118"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;VoxelSize&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb119"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.1</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create a Boolean grid and manually set values:</p>
<div class="sourceCode" id="cb120"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/066rejitfx63n.png" loading="lazy" width=257 height=47></p>
<div class="sourceCode" id="cb121"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb122"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">bgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0bzwins0dgv7u.png" loading="lazy" width=360 height=391></p>
<h3 id="openvdbcleargrid">OpenVDBClearGrid<a href="#grid-modification"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb123"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBClearGrid</span></code></pre></div>
<p><img src="img/1e7bbvqcc11gi.png" loading="lazy" width=560 height=78></p>
<hr />
<p>Create a float grid with voxel size 1.0:</p>
<div class="sourceCode" id="cb124"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0vrc1xo34sjju.png" loading="lazy" width=258 height=47></p>
<p>Set 40 values along the positive x axis:</p>
<div class="sourceCode" id="cb125"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Table</span><span class="op">[{</span><span class="va">i</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="va">i</span>, <span class="fl">40</span><span class="op">}]</span>, <span class="fl">0.5</span><span class="op">];</span></span></code></pre></div>
<p>The grid now contains 40 active voxels:</p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb127"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fl">40</span></span></code></pre></div>
</blockquote>
<p>Clear the grid:</p>
<div class="sourceCode" id="cb128"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBClearGrid</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<p>No active voxels:</p>
<div class="sourceCode" id="cb129"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb130"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbcopygrid">OpenVDBCopyGrid<a href="#grid-modification"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb131"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBCopyGrid</span></code></pre></div>
<p><img src="img/1ncoxahv1uv87.png" loading="lazy" width=373 height=78></p>
<hr />
<p>Create a level set cube with voxel size 0.05:</p>
<div class="sourceCode" id="cb132"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="va">cube</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cube</span><span class="op">[]</span>, <span class="fl">0.05</span><span class="op">];</span></span></code></pre></div>
<p>Create a copy:</p>
<div class="sourceCode" id="cb133"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="va">copy</span> <span class="op">=</span> <span class="fu">OpenVDBCopyGrid</span><span class="op">[</span><span class="va">cube</span><span class="op">];</span></span></code></pre></div>
<p>Apply a smoothing filter on the copy:</p>
<div class="sourceCode" id="cb134"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">copy</span>, <span class="st">&quot;Gaussian&quot;</span><span class="op">];</span></span></code></pre></div>
<p>The original grid remains unchanged while the copy is smoothed:</p>
<div class="sourceCode" id="cb135"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span> <span class="op">/@</span> <span class="op">{</span><span class="va">cube</span>, <span class="va">copy</span><span class="op">}</span></span></code></pre></div>
<p><img src="img/16n0g0dn5ulp6.png" loading="lazy" width=389 height=198></p>
<h2 id="list-of-grids">List of grids<a href="#grids"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbgridtypes"
class="local-toc-link-2">OpenVDBGridTypes</a></li>
<li><a href="#openvdbgrids"
class="local-toc-link-2">OpenVDBGrids</a></li>
</ul>
</div>
<h3 id="openvdbgridtypes">OpenVDBGridTypes<a href="#list-of-grids"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb136"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBGridTypes</span></code></pre></div>
<p><img src="img/0ujxiwqqoqt1p.png" loading="lazy" width=345 height=78></p>
<hr />
<p>List out all available types:</p>
<div class="sourceCode" id="cb137"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGridTypes</span><span class="op">[]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb138"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Scalar&quot;</span>, <span class="st">&quot;Vector&quot;</span>, <span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>"Scalar"</code> is a synonym for <code>"Float"</code>:</p>
<div class="sourceCode" id="cb139"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Scalar&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">FullForm</span></span></code></pre></div>
<p><img src="img/1eqs15bytsmu8.png" loading="lazy" width=178 height=17></p>
<hr />
<p><code>"Vector"</code> is a synonym for <code>"Vec3S"</code>:</p>
<div class="sourceCode" id="cb140"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vector&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">FullForm</span></span></code></pre></div>
<p><img src="img/06kn6bjiq2pqr.png" loading="lazy" width=178 height=17></p>
<hr />
<p><code>"D"</code> stands for double, <code>"I"</code> stands for
integer, and <code>"S"</code> stands for scalar i.e. float:</p>
<div class="sourceCode" id="cb141"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="va">v3dtypes</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span><span class="op">};</span></span></code></pre></div>
<p>Initialize grids and set the value <code>{0.1, 0.5, 1.7}</code> at
the origin:</p>
<div class="sourceCode" id="cb142"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="va">veccgrids</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, #<span class="op">]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">v3dtypes</span></span></code></pre></div>
<p><img src="img/16yergl1hxuai.png" loading="lazy" width=835 height=47></p>
<div class="sourceCode" id="cb143"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Scan</span><span class="op">[</span><span class="fu">OpenVDBSetValues</span><span class="op">[</span>#, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">1.7</span><span class="op">}]</span> <span class="op">&amp;</span>, <span class="va">veccgrids</span><span class="op">]</span></span></code></pre></div>
<p>Inspect each value at the origin. <code>"S"</code> (float) is not as
accurate as <code>"D"</code> (double). <code>"I"</code> (integer)
truncates values:</p>
<div class="sourceCode" id="cb144"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MapThread</span><span class="op">[</span>#<span class="fl">1</span> <span class="op">-&gt;</span> <span class="fu">InputForm</span><span class="op">[</span><span class="fu">OpenVDBValues</span><span class="op">[</span>#<span class="fl">2</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]]</span> <span class="op">&amp;</span>, <span class="op">{</span><span class="va">v3dtypes</span>, <span class="va">veccgrids</span><span class="op">}]</span> <span class="op">//</span> <span class="fu">Column</span></span></code></pre></div>
<p><img src="img/019tteas23of2.png" loading="lazy" width=415 height=52></p>
<h3 id="openvdbgrids">OpenVDBGrids<a href="#list-of-grids"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb145"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBGrids</span></code></pre></div>
<p><img src="img/1acrj2vu32aa0.png" loading="lazy" width=339 height=78></p>
<hr />
<p>Initialize various grids with voxel size 1.0:</p>
<div class="sourceCode" id="cb146"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="va">grids</span> <span class="op">=</span> <span class="fu">Table</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">type</span><span class="op">]</span>, <span class="op">{</span><span class="va">type</span>, <span class="op">{</span><span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/15ed9o77ze0ke.png" loading="lazy" width=1370 height=47></p>
<p>List out all grids:</p>
<div class="sourceCode" id="cb147"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrids</span><span class="op">[]</span></span></code></pre></div>
<p><img src="img/06tyuml24klhz.png" loading="lazy" width=1058 height=104></p>
<p>Query just a specific grid type:</p>
<div class="sourceCode" id="cb148"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrids</span><span class="op">[</span><span class="st">&quot;Float&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/05carws2nvmeq.png" loading="lazy" width=274 height=47></p>
<hr />
<p>In this kernel session there are no double grids in memory:</p>
<div class="sourceCode" id="cb149"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrids</span><span class="op">[</span><span class="st">&quot;Double&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb150"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="op">{}</span></span></code></pre></div>
</blockquote>
<p>Use the input <code>All</code> to return an <code>Association</code>
containing types with no grids too:</p>
<div class="sourceCode" id="cb151"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrids</span><span class="op">[</span><span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1xjlhjdk0ptqm.png" loading="lazy" width=1313 height=104></p>
<hr />
<p>Create more float grids:</p>
<div class="sourceCode" id="cb152"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="va">grids2</span> <span class="op">=</span> <span class="fu">Table</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">]</span>, <span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/145hvhuk43p82.png" loading="lazy" width=816 height=75></p>
<p>These float grids are now present, as shown in their expression IDs
in the information menus:</p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrids</span><span class="op">[</span><span class="st">&quot;Float&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/167ku36eyhi23.png" loading="lazy" width=1087 height=75></p>
<h2 id="type-q-functions">Type Q functions<a href="#grids"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbgridq"
class="local-toc-link-2">OpenVDBGridQ</a></li>
<li><a href="#openvdbscalargridq"
class="local-toc-link-2">OpenVDBScalarGridQ</a></li>
<li><a href="#openvdbintegergridq"
class="local-toc-link-2">OpenVDBIntegerGridQ</a></li>
<li><a href="#openvdbvectorgridq"
class="local-toc-link-2">OpenVDBVectorGridQ</a></li>
<li><a href="#openvdbbooleangridq"
class="local-toc-link-2">OpenVDBBooleanGridQ</a></li>
<li><a href="#openvdbmaskgridq"
class="local-toc-link-2">OpenVDBMaskGridQ</a></li>
</ul>
</div>
<h3 id="openvdbgridq">OpenVDBGridQ<a href="#type-q-functions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb154"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBGridQ</span></code></pre></div>
<p><img src="img/17755xkk3r3g5.png" loading="lazy" width=546 height=78></p>
<hr />
<p>Create a grid:</p>
<div class="sourceCode" id="cb155"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0b0vl0n4trqf0.png" loading="lazy" width=258 height=47></p>
<p>Verify that it represents a valid grid:</p>
<div class="sourceCode" id="cb156"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb157"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Inspect the <code>FullForm</code> of a grid:</p>
<div class="sourceCode" id="cb158"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span> <span class="op">//</span> <span class="fu">FullForm</span></span></code></pre></div>
<p><img src="img/0cs9amvb7ciz9.png" loading="lazy" width=186 height=17></p>
<p>The internal ID must represent an active managed library
expression:</p>
<div class="sourceCode" id="cb159"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGridQ</span><span class="op">[</span><span class="fu">OpenVDBGrid</span><span class="op">[</span><span class="fl">10</span><span class="op">^</span><span class="fl">100</span>, <span class="st">&quot;Float&quot;</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb160"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">False</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create a grid and print its <code>FullForm</code>:</p>
<div class="sourceCode" id="cb161"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">With</span><span class="op">[{</span><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]}</span>, </span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Print</span><span class="op">[</span><span class="fu">FullForm</span><span class="op">[</span><span class="va">grid</span><span class="op">]];</span> </span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span> </span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/152py05kfc6pi.png" loading="lazy" width=168 height=16></p>
<blockquote>
<div class="sourceCode" id="cb162"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<p>Once the grid is no longer referenced by the system, it’s
destroyed:</p>
<p><img src="img/00vx4rae28trx.png" loading="lazy" width=296 height=17></p>
<blockquote>
<div class="sourceCode" id="cb163"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">False</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBGrid</code> does not format if it does not represent a
valid grid:</p>
<p><img src="img/01fcj9nbmynsl.png" loading="lazy" width=186 height=17></p>
<blockquote>
<div class="sourceCode" id="cb164"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGrid</span><span class="op">[</span><span class="fl">74</span>, <span class="st">&quot;Float&quot;</span><span class="op">]</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbscalargridq">OpenVDBScalarGridQ<a
href="#type-q-functions" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb165"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBScalarGridQ</span></code></pre></div>
<p><img src="img/09h7kfov9p0i8.png" loading="lazy" width=618 height=78></p>
<hr />
<p>Create a scalar grid:</p>
<div class="sourceCode" id="cb166"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1mxz5gjrx7d61.png" loading="lazy" width=258 height=47></p>
<p>Verify that it represents a valid scalar grid:</p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBScalarGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb168"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Find the list of valid grid types:</p>
<div class="sourceCode" id="cb169"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb170"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>For each grid type, test if it represents a scalar grid or not:</p>
<div class="sourceCode" id="cb171"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TextGrid</span><span class="op">[</span><span class="fu">Table</span><span class="op">[{</span><span class="va">t</span>, <span class="fu">OpenVDBScalarGridQ</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">t</span><span class="op">]]}</span>, <span class="op">{</span><span class="va">t</span>,<span class="va">types</span><span class="op">}]</span>, <span class="fu">Frame</span> <span class="op">-&gt;</span> <span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/16fbz82b7hbwg.png" loading="lazy" width=95 height=299></p>
<h3 id="openvdbintegergridq">OpenVDBIntegerGridQ<a
href="#type-q-functions" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb172"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBIntegerGridQ</span></code></pre></div>
<p><img src="img/0ay9b19ixx4ff.png" loading="lazy" width=629 height=78></p>
<hr />
<p>Create an integer grid:</p>
<div class="sourceCode" id="cb173"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int32&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1exv8s7g7jrsa.png" loading="lazy" width=261 height=47></p>
<p>Verify that it represents a valid integer grid:</p>
<div class="sourceCode" id="cb174"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntegerGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb175"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Find the list of valid grid types:</p>
<div class="sourceCode" id="cb176"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb177"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>For each grid type, test if it represents an integer grid or not:</p>
<div class="sourceCode" id="cb178"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TextGrid</span><span class="op">[</span><span class="fu">Table</span><span class="op">[{</span><span class="va">t</span>, <span class="fu">OpenVDBIntegerGridQ</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">t</span><span class="op">]]}</span>, <span class="op">{</span><span class="va">t</span>, <span class="va">types</span><span class="op">}]</span>, <span class="fu">Frame</span> <span class="op">-&gt;</span> <span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/11oagekp3g8uh.png" loading="lazy" width=95 height=299></p>
<h3 id="openvdbvectorgridq">OpenVDBVectorGridQ<a
href="#type-q-functions" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb179"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBVectorGridQ</span></code></pre></div>
<p><img src="img/1qavs42dele75.png" loading="lazy" width=623 height=78></p>
<hr />
<p>Create a vector grid:</p>
<div class="sourceCode" id="cb180"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vector&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0v7tobafryk1e.png" loading="lazy" width=265 height=47></p>
<p>Verify that it represents a valid vector grid:</p>
<div class="sourceCode" id="cb181"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBVectorGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb182"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Find the list of valid grid types:</p>
<div class="sourceCode" id="cb183"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb184"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>For each grid type, test if it represents a vector grid or not:</p>
<div class="sourceCode" id="cb185"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TextGrid</span><span class="op">[</span><span class="fu">Table</span><span class="op">[{</span><span class="va">t</span>, <span class="fu">OpenVDBVectorGridQ</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">t</span><span class="op">]]}</span>, <span class="op">{</span><span class="va">t</span>,<span class="va">types</span><span class="op">}]</span>, <span class="fu">Frame</span> <span class="op">-&gt;</span> <span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1cco30i3kgy0v.png" loading="lazy" width=95 height=299></p>
<h3 id="openvdbbooleangridq">OpenVDBBooleanGridQ<a
href="#type-q-functions" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb186"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBBooleanGridQ</span></code></pre></div>
<p><img src="img/108flk5suigyl.png" loading="lazy" width=641 height=78></p>
<hr />
<p>Create a Boolean grid:</p>
<div class="sourceCode" id="cb187"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1qdc1y3ulqqmg.png" loading="lazy" width=257 height=47></p>
<p>Verify that it represents a valid Boolean grid:</p>
<div class="sourceCode" id="cb188"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBBooleanGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb189"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Find the list of valid grid types:</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb191"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>For each grid type, test if it represents a Boolean grid or not:</p>
<div class="sourceCode" id="cb192"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TextGrid</span><span class="op">[</span><span class="fu">Table</span><span class="op">[{</span><span class="va">t</span>, <span class="fu">OpenVDBBooleanGridQ</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">t</span><span class="op">]]}</span>, <span class="op">{</span><span class="va">t</span>, <span class="va">types</span><span class="op">}]</span>, <span class="fu">Frame</span> <span class="op">-&gt;</span> <span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1izixco5paj6t.png" loading="lazy" width=95 height=299></p>
<h3 id="openvdbmaskgridq">OpenVDBMaskGridQ<a href="#type-q-functions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb193"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMaskGridQ</span></code></pre></div>
<p><img src="img/1wmboxegl4oen.png" loading="lazy" width=609 height=78></p>
<hr />
<p>Create a mask grid:</p>
<div class="sourceCode" id="cb194"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1t52z96i3g1t4.png" loading="lazy" width=261 height=47></p>
<p>Verify that it represents a valid mask grid:</p>
<div class="sourceCode" id="cb195"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMaskGridQ</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb196"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Find the list of valid grid types:</p>
<div class="sourceCode" id="cb197"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="va">types</span> <span class="op">=</span> <span class="fu">OpenVDBGridTypes</span><span class="op">[][[</span><span class="fl">3</span> <span class="op">;;</span> <span class="op">-</span><span class="fl">1</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb198"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Double&quot;</span>, <span class="st">&quot;Float&quot;</span>, <span class="st">&quot;Byte&quot;</span>, <span class="st">&quot;Int32&quot;</span>, <span class="st">&quot;Int64&quot;</span>, <span class="st">&quot;UInt32&quot;</span>, <span class="st">&quot;Vec2D&quot;</span>, <span class="st">&quot;Vec2I&quot;</span>, <span class="st">&quot;Vec2S&quot;</span>, <span class="st">&quot;Vec3D&quot;</span>, <span class="st">&quot;Vec3I&quot;</span>, <span class="st">&quot;Vec3S&quot;</span>, <span class="st">&quot;Boolean&quot;</span>, <span class="st">&quot;Mask&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>For each grid type, test if it represents a mask grid or not:</p>
<div class="sourceCode" id="cb199"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">TextGrid</span><span class="op">[</span><span class="fu">Table</span><span class="op">[{</span><span class="va">t</span>, <span class="fu">OpenVDBMaskGridQ</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="va">t</span><span class="op">]]}</span>, <span class="op">{</span><span class="va">t</span>, <span class="va">types</span><span class="op">}]</span>, <span class="fu">Frame</span> <span class="op">-&gt;</span> <span class="fu">All</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0iom0216j5lsa.png" loading="lazy" width=95 height=299></p>
<h1 id="grid-properties">Grid properties</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbproperty"
class="local-toc-link-2">OpenVDBProperty</a></li>
<li><a href="#openvdbsetproperty"
class="local-toc-link-2">OpenVDBSetProperty</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbproperty">OpenVDBProperty<a href="#grid-properties"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb200"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBProperty</span></code></pre></div>
<p><img src="img/0noxj9grc3mo5.png" loading="lazy" width=575 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb201"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.125</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve a property:</p>
<div class="sourceCode" id="cb202"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;VoxelSize&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb203"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.125</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBGrid[…][prop]</code> is shorthand for
<code>OpenVDBProperty[OpenVDBGrid[…], prop]</code>:</p>
<div class="sourceCode" id="cb204"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;VoxelSize&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb205"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.125</span></span></code></pre></div>
</blockquote>
<hr />
<p>Retrieve a list of all properties available for the grid:</p>
<div class="sourceCode" id="cb206"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Properties&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb207"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span>, <span class="st">&quot;ActiveTileCount&quot;</span>, <span class="st">&quot;ActiveVoxelCount&quot;</span>, <span class="st">&quot;BackgroundValue&quot;</span>, <span class="st">&quot;BoundingGridVoxelCount&quot;</span>, <span class="st">&quot;CreationDate&quot;</span>, <span class="st">&quot;Creator&quot;</span>, <span class="st">&quot;Description&quot;</span>, <span class="st">&quot;Empty&quot;</span>, <span class="st">&quot;ExpressionID&quot;</span>, <span class="st">&quot;GammaAdjustment&quot;</span>, <span class="st">&quot;GrayscaleWidth&quot;</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;GridType&quot;</span>, <span class="st">&quot;HalfWidth&quot;</span>, <span class="st">&quot;IndexBoundingBox&quot;</span>, <span class="st">&quot;IndexDimensions&quot;</span>, <span class="st">&quot;LastModifiedDate&quot;</span>, <span class="st">&quot;MaxValue&quot;</span>, <span class="st">&quot;MemoryUsage&quot;</span>, <span class="st">&quot;MinValue&quot;</span>, <span class="st">&quot;MinMaxValues&quot;</span>, <span class="st">&quot;Name&quot;</span>, <span class="st">&quot;Properties&quot;</span>, <span class="st">&quot;PropertyValueGrid&quot;</span>, <span class="st">&quot;UniformVoxels&quot;</span>, <span class="st">&quot;VoxelSize&quot;</span>, <span class="st">&quot;WorldBoundingBox&quot;</span>, <span class="st">&quot;WorldDimensions&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Multiple properties at once:</p>
<div class="sourceCode" id="cb208"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="va">propertylist</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span>, <span class="st">&quot;BackgroundValue&quot;</span>, <span class="st">&quot;BoundingGridVoxelCount&quot;</span>, <span class="st">&quot;VoxelSize&quot;</span><span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb209"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="va">propertylist</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb210"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">4982</span>, <span class="fl">0.375</span>, <span class="fl">9261</span>, <span class="fl">0.125</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Key value pairs of properties in an <code>Association</code>:</p>
<div class="sourceCode" id="cb211"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="va">propertylist</span>, <span class="st">&quot;Association&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb212"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;|</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span> <span class="op">-&gt;</span> <span class="fl">4982</span>, <span class="st">&quot;BackgroundValue&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.375</span>, <span class="st">&quot;BoundingGridVoxelCount&quot;</span> <span class="op">-&gt;</span> <span class="fl">9261</span>, <span class="st">&quot;VoxelSize&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.125</span><span class="op">|&gt;</span></span></code></pre></div>
</blockquote>
<p>Dataset of properties:</p>
<div class="sourceCode" id="cb213"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="va">propertylist</span>, <span class="st">&quot;Dataset&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0klet9wn2jg9n.png" loading="lazy" width=227 height=130></p>
<p>Rule list of properties:</p>
<div class="sourceCode" id="cb214"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="va">propertylist</span>, <span class="st">&quot;RuleList&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb215"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span> <span class="op">-&gt;</span> <span class="fl">4982</span>, <span class="st">&quot;BackgroundValue&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.375</span>, <span class="st">&quot;BoundingGridVoxelCount&quot;</span> <span class="op">-&gt;</span> <span class="fl">9261</span>, <span class="st">&quot;VoxelSize&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.125</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>View all properties at once in a grid. Any user controlled property
that has not been set is indicated as such:</p>
<div class="sourceCode" id="cb216"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;PropertyValueGrid&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1opvbcf98kedh.png" loading="lazy" width=543 height=554></p>
<hr />
<p>Not all properties apply to every grid type:</p>
<div class="sourceCode" id="cb217"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0cuxu2ru2o3hm.png" loading="lazy" width=257 height=47></p>
<div class="sourceCode" id="cb218"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb219"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Missing</span><span class="op">[</span><span class="st">&quot;NotApplicable&quot;</span><span class="op">]</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbsetproperty">OpenVDBSetProperty<a href="#grid-properties"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb220"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSetProperty</span></code></pre></div>
<p><img src="img/1djzoqoo30rgy.png" loading="lazy" width=633 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb221"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.125</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>The list of properties <code>OpenVDBSetProperty</code> can
control:</p>
<div class="sourceCode" id="cb222"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;BackgroundValue&quot;</span>, <span class="st">&quot;Creator&quot;</span>, <span class="st">&quot;Description&quot;</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;Name&quot;</span>, <span class="st">&quot;VoxelSize&quot;</span><span class="op">}</span></span></code></pre></div>
<hr />
<p>Set the creator of the grid:</p>
<div class="sourceCode" id="cb223"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Creator&quot;</span>, <span class="st">&quot;OpenVDBLink_Docs&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb224"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<p>Verify it’s been set:</p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Creator&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb226"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<p>Or equivalently:</p>
<div class="sourceCode" id="cb227"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;Creator&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb228"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<hr />
<p>Set multiple properties at once:</p>
<div class="sourceCode" id="cb229"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Description&quot;</span>, <span class="st">&quot;Name&quot;</span><span class="op">}</span>, <span class="op">{</span><span class="st">&quot;This is a ball grid&quot;</span>, <span class="st">&quot;ball&quot;</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb230"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;This is a ball grid&quot;</span>, <span class="st">&quot;ball&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Verify they’ve been set:</p>
<div class="sourceCode" id="cb231"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Creator&quot;</span>, <span class="st">&quot;Description&quot;</span>, <span class="st">&quot;Name&quot;</span><span class="op">}</span>, <span class="st">&quot;Association&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb232"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;|</span><span class="st">&quot;Creator&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span>, <span class="st">&quot;Description&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;This is a ball grid&quot;</span>, <span class="st">&quot;Name&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;ball&quot;</span><span class="op">|&gt;</span></span></code></pre></div>
</blockquote>
<hr />
<p>Create an empty scalar grid with voxel size 1.0:</p>
<div class="sourceCode" id="cb233"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="va">sgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0p9adapz0jlb8.png" loading="lazy" width=258 height=47></p>
<p>Set the background value, mark it as a level set, and change the
voxel size to 0.1:</p>
<div class="sourceCode" id="cb234"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">sgrid</span>, <span class="op">{</span><span class="st">&quot;BackgroundValue&quot;</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;VoxelSize&quot;</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.3</span>, <span class="st">&quot;LevelSet&quot;</span>, <span class="fl">0.1</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb235"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.3</span>, <span class="st">&quot;LevelSet&quot;</span>, <span class="fl">0.1</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Verify:</p>
<div class="sourceCode" id="cb236"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="va">sgrid</span><span class="op">[{</span><span class="st">&quot;BackgroundValue&quot;</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;VoxelSize&quot;</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb237"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.3</span>, <span class="st">&quot;LevelSet&quot;</span>, <span class="fl">0.1</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Possible settings for <code>"GridClass"</code> include
<code>"LevelSet"</code>, <code>"FogVolume"</code>, and
<code>None</code>:</p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="va">sgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0gbp4oa7utgah.png" loading="lazy" width=258 height=47></p>
<p>Various settings of <code>"GridClass"</code>:</p>
<div class="sourceCode" id="cb239"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">sgrid</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;LevelSet&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb240"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;LevelSet&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb241"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">sgrid</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="st">&quot;FogVolume&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb242"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;FogVolume&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb243"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">sgrid</span>, <span class="st">&quot;GridClass&quot;</span>, <span class="fu">None</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb244"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">None</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBSetProperty[expr, prop -&gt; val]</code> is alternative
syntax:</p>
<div class="sourceCode" id="cb245"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Creator&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb246"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;OpenVDBLink_Docs&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb247"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Description&quot;</span>, <span class="st">&quot;Name&quot;</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="st">&quot;This is a ball grid&quot;</span>, <span class="st">&quot;ball&quot;</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb248"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;This is a ball grid&quot;</span>, <span class="st">&quot;ball&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>OpenVDBSetProperty[expr,————{<img src="img/1b9mt7713mqd5.png" loading="lazy" width=38 height=19>-&gt;<img src="img/1snaqpl79oh6d.png" loading="lazy" width=30 height=17>,————<img src="img/0pmcl71dwmy64.png" loading="lazy" width=38 height=19>-&gt;<img src="img/1ewmydkpry958.png" loading="lazy" width=30 height=17>}]
is alternative syntax:</p>
<div class="sourceCode" id="cb249"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Creator&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span>, <span class="st">&quot;Name&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;ball&quot;</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb250"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;OpenVDBLink_Docs&quot;</span>, <span class="st">&quot;ball&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<h1 id="level-set-creation">Level set creation</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#basics" class="local-toc-link-1">Basics</a></li>
<li><a href="#regions" class="local-toc-link-1">Regions</a></li>
</ul>
</div>
<h2 id="basics">Basics<a href="#level-set-creation"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdblevelset"
class="local-toc-link-2">OpenVDBLevelSet</a></li>
</ul>
</div>
<h3 id="openvdblevelset">OpenVDBLevelSet<a href="#basics"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb251"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBLevelSet</span></code></pre></div>
<p><img src="img/1bj154ri2jgpx.png" loading="lazy" width=480 height=78></p>
<hr />
<p>Create a level set representation of a unit ball, with voxel size 0.1
and half width 3.0:</p>
<div class="sourceCode" id="cb252"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/06o3cm89lyfwv.png" loading="lazy" width=258 height=47></p>
<p>Inspect its properties:</p>
<div class="sourceCode" id="cb253"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span><span class="op">[</span><span class="st">&quot;PropertyValueGrid&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1b6xlarl72jou.png" loading="lazy" width=495 height=554></p>
<hr />
<p>The third argument may be omitted when <code>$OpenVDBHalfWidth</code>
is set:</p>
<div class="sourceCode" id="cb254"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb255"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1jw30m2jq74le.png" loading="lazy" width=258 height=47></p>
<div class="sourceCode" id="cb256"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span><span class="op">[</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb257"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fl">7674</span></span></code></pre></div>
</blockquote>
<hr />
<p>The second argument may be omitted when <code>$OpenVDBSpacing</code>
is set:</p>
<div class="sourceCode" id="cb258"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb259"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/1g0hy4zgkzg59.png" loading="lazy" width=258 height=47></p>
<div class="sourceCode" id="cb260"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span><span class="op">[</span><span class="st">&quot;ActiveLeafVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb261"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fl">7674</span></span></code></pre></div>
</blockquote>
<hr />
<p>Set the creator and name during construction:</p>
<div class="sourceCode" id="cb262"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span>, <span class="st">&quot;Creator&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;OpenVDBLink_Docs&quot;</span>, <span class="st">&quot;Name&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;ball&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/16ym8ipcvabrz.png" loading="lazy" width=244 height=46></p>
<p>Set its description too:</p>
<div class="sourceCode" id="cb263"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetProperty</span><span class="op">[</span><span class="va">ball</span>, <span class="st">&quot;Description&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;This is a level set representation of a ball and it&#39;s wonderful.&quot;</span><span class="op">];</span></span></code></pre></div>
<p>Inspect its properties:</p>
<div class="sourceCode" id="cb264"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span><span class="op">[</span><span class="st">&quot;PropertyValueGrid&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1q8joe5n6jkds.png" loading="lazy" width=703 height=554></p>
<hr />
<p>The first argument must be a region that is
<code>ConstantRegionQ</code> and has
<code>RegionEmbeddingDimension</code> equal to 3:</p>
<div class="sourceCode" id="cb265"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Disk</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/05bqpulnzvckv.png" loading="lazy" width=396 height=20></p>
<blockquote>
<div class="sourceCode" id="cb266"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb267"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[{</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">}</span>, <span class="va">r</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/1gdfbnlipk1cx.png" loading="lazy" width=412 height=20></p>
<blockquote>
<div class="sourceCode" id="cb268"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="regions">Regions<a href="#level-set-creation"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#basic-regions" class="local-toc-link-2">Basic
regions</a></li>
<li><a href="#mesh-regions" class="local-toc-link-2">Mesh
regions</a></li>
<li><a href="#formula-regions" class="local-toc-link-2">Formula
regions</a></li>
<li><a href="#derived-regions" class="local-toc-link-2">Derived
regions</a></li>
</ul>
</div>
<h3 id="basic-regions">Basic regions<a href="#regions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>The following examples will assume these settings:</p>
<div class="sourceCode" id="cb269"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<p>Create a level set representation of any bounded and constant 3D
basic region.</p>
<p>Examples include:</p>
<hr />
<p><code>Ball</code>:</p>
<div class="sourceCode" id="cb270"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/0cs6i1ls87cs2.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>CapsuleShape</code>:</p>
<div class="sourceCode" id="cb271"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/0cg32n054o28v.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>Dodecahedron</code>:</p>
<div class="sourceCode" id="cb272"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Dodecahedron</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/1cwijh7jqblnx.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>Ellipsoid</code>:</p>
<div class="sourceCode" id="cb273"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ellipsoid</span><span class="op">[{</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">}]]</span></span></code></pre></div>
<p><img src="img/0u4sxw8xgxuig.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>Cylinder</code>:</p>
<div class="sourceCode" id="cb274"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cylinder</span><span class="op">[{{-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}}]]</span></span></code></pre></div>
<p><img src="img/0sanfe03xaow4.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>Parallelepiped</code>:</p>
<div class="sourceCode" id="cb275"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Parallelepiped</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/1wj0kiy0vjhsl.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>Torus</code>:</p>
<div class="sourceCode" id="cb276"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]]</span></span></code></pre></div>
<p><img src="img/05th7lb78c7tp.png" loading="lazy" width=258 height=47></p>
<h3 id="mesh-regions">Mesh regions<a href="#regions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>The following examples will assume these settings:</p>
<div class="sourceCode" id="cb277"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<p>Create a level set representation of any 3D mesh region of dimension
2 or higher.</p>
<p>Examples include:</p>
<hr />
<p>A closed surface <code>MeshRegion</code>:</p>
<div class="sourceCode" id="cb278"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/1kcd7gossyvs4.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>BoundaryMeshRegion</code>:</p>
<div class="sourceCode" id="cb279"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;BoundaryMeshRegion&quot;</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/1n250y473bbr6.png" loading="lazy" width=258 height=47></p>
<hr />
<p>A full dimensional <code>MeshRegion</code> with
<code>Tetrahedron</code> elements:</p>
<div class="sourceCode" id="cb280"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">DiscretizeRegion</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]];</span></span></code></pre></div>
<div class="sourceCode" id="cb281"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshCells</span><span class="op">[</span><span class="va">mesh</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Short</span></span></code></pre></div>
<p><img src="img/13aqaozrr1aid.png" loading="lazy" width=945 height=17></p>
<div class="sourceCode" id="cb282"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0nci6jotc1ecl.png" loading="lazy" width=258 height=47></p>
<hr />
<p>For mixed dimension <code>MeshRegion</code>, low dimension components
are ignored:</p>
<div class="sourceCode" id="cb283"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">MeshRegion</span><span class="op">[</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">}</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">}</span>, <span class="op">{</span><span class="fl">4</span>, <span class="op">-</span><span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">0</span><span class="op">}}</span>, </span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="fu">Point</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fu">Line</span><span class="op">[{</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">}]</span>, <span class="fu">Triangle</span><span class="op">[{</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">}]</span>, <span class="fu">Tetrahedron</span><span class="op">[{</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">}]}</span> </span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a>   <span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb284"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">mesh</span>, <span class="fl">0.01</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0rh3ykbit3km8.png" loading="lazy" width=258 height=47></p>
<p>Compare:</p>
<div class="sourceCode" id="cb285"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">mesh</span>, <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]}</span></span></code></pre></div>
<p><img src="img/090ytky8zbep7.png" loading="lazy" width=389 height=171></p>
<h3 id="formula-regions">Formula regions<a href="#regions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>The following examples will assume these settings:</p>
<div class="sourceCode" id="cb286"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<p>Create a level set representation of any 3D full dimensional formula
region.</p>
<p>Examples include:</p>
<hr />
<p><code>ImplicitRegion</code>:</p>
<div class="sourceCode" id="cb287"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ImplicitRegion</span><span class="op">[</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">y</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">z</span><span class="op">^</span><span class="fl">2</span> <span class="op">&lt;=</span> <span class="fl">1</span>, <span class="op">{</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">}]]</span></span></code></pre></div>
<p><img src="img/1dfkh22eusfxv.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>ParametricRegion</code>:</p>
<div class="sourceCode" id="cb288"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ParametricRegion</span><span class="op">[{{</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span> <span class="op">+</span> <span class="va">y</span><span class="op">*</span><span class="va">x</span><span class="op">}</span>, <span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">y</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">z</span><span class="op">^</span><span class="fl">2</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">}]]</span></span></code></pre></div>
<p><img src="img/1t4n70zxgi7zi.png" loading="lazy" width=258 height=47></p>
<hr />
<p>Lower dimensional components are ignored:</p>
<div class="sourceCode" id="cb289"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="va">reg</span> <span class="op">=</span> <span class="fu">ImplicitRegion</span><span class="op">[(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fl">9</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span> <span class="va">y</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">z</span><span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)^</span><span class="fl">3</span> <span class="op">-</span> <span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="va">z</span><span class="op">^</span><span class="fl">3</span> <span class="op">-</span> <span class="op">(</span><span class="fl">9</span><span class="op">/</span><span class="fl">80</span><span class="op">)</span> <span class="va">y</span><span class="op">^</span><span class="fl">2</span> <span class="va">z</span><span class="op">^</span><span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">||</span> <span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="va">y</span><span class="op">^</span><span class="fl">2</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;&amp;</span> <span class="va">z</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>, <span class="op">{</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb290"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">reg</span>, <span class="fl">0.05</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1ei46o75c4iho.png" loading="lazy" width=258 height=47></p>
<p>Compare:</p>
<div class="sourceCode" id="cb291"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">DiscretizeRegion</span><span class="op">[</span><span class="va">reg</span><span class="op">]</span>, <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]}</span></span></code></pre></div>
<p><img src="img/0ccuk7oq44kuz.png" loading="lazy" width=389 height=169></p>
<h3 id="derived-regions">Derived regions<a href="#regions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<p>The following examples will assume these settings:</p>
<div class="sourceCode" id="cb292"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBSpacing</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$OpenVDBHalfWidth</span> <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span></code></pre></div>
<p>Create a level set representation of any 3D full dimensional formula
region.</p>
<p>Examples include:</p>
<hr />
<p><code>BooleanRegion</code>:</p>
<div class="sourceCode" id="cb293"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">RegionUnion</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fu">Cuboid</span><span class="op">[]]]</span></span></code></pre></div>
<p><img src="img/0486xopdl3szb.png" loading="lazy" width=258 height=47></p>
<hr />
<p><code>TransformedRegion</code>:</p>
<div class="sourceCode" id="cb294"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">TransformedRegion</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[]</span>, <span class="fu">ShearingTransform</span><span class="op">[</span><span class="fl">30</span> <span class="op">\[Degree]</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]]]</span></span></code></pre></div>
<p><img src="img/1rcg8ifvqhpmw.png" loading="lazy" width=258 height=47></p>
<h1 id="fog-volumes">Fog volumes</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbfogvolume"
class="local-toc-link-2">OpenVDBFogVolume</a></li>
<li><a href="#openvdbtofogvolume"
class="local-toc-link-2">OpenVDBToFogVolume</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbfogvolume">OpenVDBFogVolume<a href="#fog-volumes"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb295"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBFogVolume</span></code></pre></div>
<p><img src="img/0dok023g8w530.png" loading="lazy" width=683 height=78></p>
<hr />
<p>Create a level set ball with voxel size 0.1 and half width 2.0:</p>
<div class="sourceCode" id="cb296"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14ht0onw84rq2.png" loading="lazy" width=258 height=47></p>
<p>Create a fog volume:</p>
<div class="sourceCode" id="cb297"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/17cgbd1gwt26h.png" loading="lazy" width=258 height=47></p>
<p>Examine its slices:</p>
<div class="sourceCode" id="cb298"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Image3DSlices</span></span></code></pre></div>
<p><img src="img/0i5vt43jc53if.png" loading="lazy" width=611 height=22></p>
<p>The grayscale band is roughly 2 voxels wide, which is the half width
of the original level set:</p>
<div class="sourceCode" id="cb299"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0sjeqxv78f6c1.png" loading="lazy" width=240 height=240></p>
<hr />
<p><code>OpenVDBFogVolume</code> creates a new grid:</p>
<div class="sourceCode" id="cb300"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb301"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">];</span></span></code></pre></div>
<p>The original grid still represents a level set:</p>
<div class="sourceCode" id="cb302"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">ball</span><span class="op">[</span><span class="st">&quot;GridClass&quot;</span><span class="op">]</span>, <span class="va">fog</span><span class="op">[</span><span class="st">&quot;GridClass&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb303"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;LevelSet&quot;</span>, <span class="st">&quot;FogVolume&quot;</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbtofogvolume">OpenVDBToFogVolume<a href="#fog-volumes"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb304"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBToFogVolume</span></code></pre></div>
<p><img src="img/1ffo6ao7oxknl.png" loading="lazy" width=650 height=78></p>
<hr />
<p>Create a level set ball with voxel size 0.1 and half width 2.0:</p>
<div class="sourceCode" id="cb305"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0otmrtewryip9.png" loading="lazy" width=258 height=47></p>
<p>Convert to a fog volume:</p>
<div class="sourceCode" id="cb306"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBToFogVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/084gjvhlwr8a6.png" loading="lazy" width=258 height=47></p>
<p>Examine its slices:</p>
<div class="sourceCode" id="cb307"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Image3DSlices</span></span></code></pre></div>
<p><img src="img/08d052ujqm8jh.png" loading="lazy" width=611 height=22></p>
<p>The grayscale band is roughly 2 voxels wide, which is the half width
of the original level set:</p>
<div class="sourceCode" id="cb308"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">ball</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0q1hqposvvbfc.png" loading="lazy" width=240 height=240></p>
<hr />
<p><code>OpenVDBToFogVolume</code> modifies the input data:</p>
<div class="sourceCode" id="cb309"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb310"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBToFogVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">];</span></span></code></pre></div>
<p>The original grid now represents a fog volume:</p>
<div class="sourceCode" id="cb311"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span><span class="op">[</span><span class="st">&quot;GridClass&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb312"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;FogVolume&quot;</span></span></code></pre></div>
</blockquote>
<h1 id="mesh">Mesh</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbmesh" class="local-toc-link-2">OpenVDBMesh</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbmesh">OpenVDBMesh<a href="#mesh" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb313"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMesh</span></code></pre></div>
<p><img src="img/1vlcl7rrf6egq.png" loading="lazy" width=476 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb314"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBDifference</span><span class="op">[</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.2</span><span class="op">]</span>, </span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cylinder</span><span class="op">[{{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">.</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">0.2</span><span class="op">]</span> </span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a>   <span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb315"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Laplacian&quot;</span>, <span class="fl">3</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve the object as a mesh:</p>
<div class="sourceCode" id="cb316"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/00ckuicqb2r0x.png" loading="lazy" width=240 height=240></p>
<p>This object is a surface <code>MeshRegion</code> and represents the
2D boundary:</p>
<div class="sourceCode" id="cb317"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">//</span> <span class="fu">Head</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb318"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshRegion</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb319"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Area</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb320"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fl">10.5685</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb321"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Volume</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb322"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Undefined</span></span></code></pre></div>
</blockquote>
<hr />
<p>Retrieve the object as a <code>BoundaryMeshRegion</code>:</p>
<div class="sourceCode" id="cb323"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;BoundaryMeshRegion&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1qcks5zi80xdo.png" loading="lazy" width=240 height=240></p>
<div class="sourceCode" id="cb324"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Volume</span><span class="op">[</span><span class="va">mesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb325"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.71397</span></span></code></pre></div>
</blockquote>
<hr />
<p>Retrieve the mesh of a fog volume:</p>
<div class="sourceCode" id="cb326"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/1o1ynuiljb18l.png" loading="lazy" width=240 height=241></p>
<hr />
<p>Retrieve the complex data of the mesh. The return value is of the
form <code>{coords, cells}</code>:</p>
<div class="sourceCode" id="cb327"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Short</span> <span class="op">/@</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;ComplexData&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/190hcezh6axer.png" loading="lazy" width=1278 height=39></p>
<hr />
<p>Retrieve the faces of the mesh:</p>
<div class="sourceCode" id="cb328"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="va">faces</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;FaceData&quot;</span><span class="op">];</span></span></code></pre></div>
<p>Examine the vertices of the first 4 triangles:</p>
<div class="sourceCode" id="cb329"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="va">faces</span><span class="op">[[</span><span class="fl">1</span>, <span class="fl">1</span> <span class="op">;;</span> <span class="fl">4</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb330"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{-</span><span class="fl">0.807618</span>, <span class="op">-</span><span class="fl">0.410372</span>, <span class="op">-</span><span class="fl">0.225385</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.815691</span>, <span class="op">-</span><span class="fl">0.420792</span>, <span class="op">-</span><span class="fl">0.1</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.871229</span>, <span class="op">-</span><span class="fl">0.3</span>, <span class="op">-</span><span class="fl">0.1</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">0.833507</span>, <span class="op">-</span><span class="fl">0.302248</span>, <span class="op">-</span><span class="fl">0.295231</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.807618</span>, <span class="op">-</span><span class="fl">0.410372</span>, <span class="op">-</span><span class="fl">0.225385</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.871229</span>, <span class="op">-</span><span class="fl">0.3</span>, <span class="op">-</span><span class="fl">0.1</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">0.814471</span>, <span class="op">-</span><span class="fl">0.237081</span>, <span class="op">-</span><span class="fl">0.42533</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.833507</span>, <span class="op">-</span><span class="fl">0.302248</span>, <span class="op">-</span><span class="fl">0.295231</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.884373</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.3</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">0.827692</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.448292</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.814471</span>, <span class="op">-</span><span class="fl">0.237081</span>, <span class="op">-</span><span class="fl">0.42533</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.884373</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.3</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>The first 20 triangles form a surface patch:</p>
<div class="sourceCode" id="cb331"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">Triangle</span><span class="op">[</span><span class="va">faces</span><span class="op">[[</span><span class="fl">1</span>, <span class="fl">1</span> <span class="op">;;</span> <span class="fl">20</span><span class="op">]]]]</span></span></code></pre></div>
<p><img src="img/1i8rzkcwbnarx.png" loading="lazy" width=240 height=316></p>
<hr />
<p>Retrieve a piece of the mesh over specified bounds:</p>
<div class="sourceCode" id="cb332"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="op">{{-</span><span class="fl">0.8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/1j48ss221ae54.png" loading="lazy" width=240 height=278></p>
<hr />
<p>By default <code>OpenVDBMesh</code> works in world coordinates:</p>
<div class="sourceCode" id="cb333"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb334"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in the bounds in index space:</p>
<div class="sourceCode" id="cb335"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="op">{{-</span><span class="fl">4</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">5</span>, <span class="fl">0</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/05kwa8yxepf8a.png" loading="lazy" width=240 height=278></p>
<hr />
<p><code>OpenVDBMesh</code> has the following options:</p>
<div class="sourceCode" id="cb336"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Options</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb337"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.</span>, <span class="st">&quot;CloseBoundary&quot;</span> <span class="op">-&gt;</span> <span class="fu">True</span>, <span class="st">&quot;IsoValue&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>,<span class="st">&quot;ReturnQuads&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Adaptively sample to reduce triangle count. Adaptivity can range from
0.0 (none) to 1.0:</p>
<div class="sourceCode" id="cb338"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.0</span><span class="op">]</span>, <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1.0</span><span class="op">]}</span></span></code></pre></div>
<p><img src="img/16qul3jkuzciv.png" loading="lazy" width=389 height=187></p>
<hr />
<p>Mesh over a different iso-band:</p>
<div class="sourceCode" id="cb339"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;IsoValue&quot;</span> <span class="op">-&gt;</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">]}</span></span></code></pre></div>
<p><img src="img/1ly12dybawpcl.png" loading="lazy" width=389 height=185></p>
<hr />
<p>Return quads:</p>
<div class="sourceCode" id="cb340"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="op">{{-</span><span class="fl">0.8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="st">&quot;ReturnQuads&quot;</span> <span class="op">-&gt;</span> <span class="fu">True</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0he4edvjm0ji7.png" loading="lazy" width=240 height=278></p>
<hr />
<p>With <code>"Adaptivity" -&gt; 0</code>, the number of triangles can
be estimated without needing to compute the mesh:</p>
<div class="sourceCode" id="cb341"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshCellCount</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb342"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fl">752</span></span></code></pre></div>
</blockquote>
<p>Estimate the number of triangles:</p>
<div class="sourceCode" id="cb343"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3</span><span class="op">*</span><span class="fu">OpenVDBArea</span><span class="op">[</span><span class="va">grid</span><span class="op">]/</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;VoxelSize&quot;</span><span class="op">]^</span><span class="fl">2</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb344"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fl">763.455</span></span></code></pre></div>
</blockquote>
<h1 id="values-states">Values &amp; states</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#values" class="local-toc-link-1">Values</a></li>
<li><a href="#states" class="local-toc-link-1">States</a></li>
</ul>
</div>
<h2 id="values">Values<a href="#values-states" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbvalues-openvdbsetvalues"
class="local-toc-link-2">OpenVDBValues &amp; OpenVDBSetValues</a></li>
</ul>
</div>
<h3 id="openvdbvalues-openvdbsetvalues">OpenVDBValues &amp;
OpenVDBSetValues<a href="#values" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb345"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBValues</span></code></pre></div>
<p><img src="img/07n6vryebqfer.png" loading="lazy" width=572 height=78></p>
<div class="sourceCode" id="cb346"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSetValues</span></code></pre></div>
<p><img src="img/09w1txvu9rr7u.png" loading="lazy" width=603 height=78></p>
<hr />
<p>Create an empty grid:</p>
<div class="sourceCode" id="cb347"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<p>Set the value at <code>{0, 0, 0}</code> to 0.5:</p>
<div class="sourceCode" id="cb348"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">0.5</span><span class="op">];</span></span></code></pre></div>
<p>Verify it’s been set:</p>
<div class="sourceCode" id="cb349"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb350"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.5</span></span></code></pre></div>
</blockquote>
<hr />
<p>Set multiple values at once:</p>
<div class="sourceCode" id="cb351"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb352"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}</span>, <span class="op">{</span><span class="fl">0.5</span>, π, <span class="fl">2</span><span class="op">}];</span></span></code></pre></div>
<p>Verify they’ve been set:</p>
<div class="sourceCode" id="cb353"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb354"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.5</span>, <span class="fl">3.14159</span>, <span class="fl">2.</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Assign multiple points to have the same value:</p>
<div class="sourceCode" id="cb355"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb356"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}</span>, <span class="fl">0.5</span><span class="op">];</span></span></code></pre></div>
<p>Verify they’ve been set:</p>
<div class="sourceCode" id="cb357"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb358"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBValues</code> and
<code>OpenVDBSetValues</code> work in index coordinates:</p>
<div class="sourceCode" id="cb359"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBValues</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb360"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb361"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSetValues</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb362"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in coordinates in world space:</p>
<div class="sourceCode" id="cb363"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb364"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span>, <span class="fl">0.5</span><span class="op">];</span></span></code></pre></div>
<p>Verify they’ve been set:</p>
<div class="sourceCode" id="cb365"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb366"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBValues</code> and <code>OpenVDBSetValues</code> work
with any grid type except mask:</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb367"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb367-3"><a href="#cb367-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb368"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Integer grid:</p>
<div class="sourceCode" id="cb369"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int64&quot;</span><span class="op">];</span></span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">17</span><span class="op">];</span></span>
<span id="cb369-3"><a href="#cb369-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb370"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fl">17</span></span></code></pre></div>
</blockquote>
<p>Vector grid:</p>
<div class="sourceCode" id="cb371"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vec2D&quot;</span><span class="op">];</span></span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">5.6</span><span class="op">}];</span></span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb372"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1.2</span>, <span class="fl">5.6</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Mask grid:</p>
<div class="sourceCode" id="cb373"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/10n6l5framcxy.png" loading="lazy" width=392 height=20></p>
<p><img src="img/0uqlvmp7pefrj.png" loading="lazy" width=356 height=20></p>
<blockquote>
<div class="sourceCode" id="cb374"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="states">States<a href="#values-states" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbstates-openvdbsetstates"
class="local-toc-link-2">OpenVDBStates &amp; OpenVDBSetStates</a></li>
</ul>
</div>
<h3 id="openvdbstates-openvdbsetstates">OpenVDBStates &amp;
OpenVDBSetStates<a href="#states" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb375"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBStates</span></code></pre></div>
<p><img src="img/1gwe9fjfgx5pk.png" loading="lazy" width=562 height=78></p>
<div class="sourceCode" id="cb376"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSetStates</span></code></pre></div>
<p><img src="img/0l41kqu39rgvf.png" loading="lazy" width=613 height=78></p>
<hr />
<p>Create an empty grid:</p>
<div class="sourceCode" id="cb377"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<p>Mark <code>{0, 0, 0}</code> as an active voxel:</p>
<div class="sourceCode" id="cb378"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<p>Verify it’s been set to active:</p>
<div class="sourceCode" id="cb379"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb380"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Mark <code>{0, 0, 0}</code> back as inactive:</p>
<div class="sourceCode" id="cb381"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">0</span><span class="op">];</span></span></code></pre></div>
<p>Verify it’s now inactive:</p>
<div class="sourceCode" id="cb382"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb383"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<hr />
<p>Set multiple states at once:</p>
<div class="sourceCode" id="cb384"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb385"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}];</span></span></code></pre></div>
<p>Verify they’ve been set appropriately:</p>
<div class="sourceCode" id="cb386"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb387"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Assign multiple points to have the same active state:</p>
<div class="sourceCode" id="cb388"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb389"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<p>Verify they’ve been set appropriately:</p>
<div class="sourceCode" id="cb390"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb391"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBStates</code> and
<code>OpenVDBSetStates</code> work in index coordinates:</p>
<div class="sourceCode" id="cb392"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBStates</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb393"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb394"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSetStates</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb395"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in coordinates in world space:</p>
<div class="sourceCode" id="cb396"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Float&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb397"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<p>Verify they’ve been set appropriately:</p>
<div class="sourceCode" id="cb398"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb399"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBStates</code> and <code>OpenVDBSetStates</code> work
with any grid type:</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb400"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb400-2"><a href="#cb400-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb400-3"><a href="#cb400-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb401"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Integer grid:</p>
<div class="sourceCode" id="cb402"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int64&quot;</span><span class="op">];</span></span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb402-3"><a href="#cb402-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb403"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Vector grid:</p>
<div class="sourceCode" id="cb404"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vec2D&quot;</span><span class="op">];</span></span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb404-3"><a href="#cb404-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb405"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Mask grid:</p>
<div class="sourceCode" id="cb406"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb406-2"><a href="#cb406-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span>
<span id="cb406-3"><a href="#cb406-3" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb407"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<h1 id="io">I/O</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbimport-openvdbexport"
class="local-toc-link-2">OpenVDBImport &amp; OpenVDBExport</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbimport-openvdbexport">OpenVDBImport &amp; OpenVDBExport<a
href="#io" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb408"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBImport</span></code></pre></div>
<p><img src="img/10ry8sparpi9r.png" loading="lazy" width=331 height=78></p>
<div class="sourceCode" id="cb409"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBExport</span></code></pre></div>
<p><img src="img/0hhzz1qpb8fe6.png" loading="lazy" width=474 height=78></p>
<p>The following examples will use this file as a base input:</p>
<div class="sourceCode" id="cb410"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="va">temploc</span> <span class="op">=</span> <span class="fu">$TemporaryDirectory</span><span class="op">;</span></span></code></pre></div>
<hr />
<p>Export a level set:</p>
<div class="sourceCode" id="cb411"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb412"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="va">file</span> <span class="op">=</span> <span class="fu">FileNameJoin</span><span class="op">[{</span><span class="va">temploc</span>, <span class="st">&quot;tri.vdb&quot;</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb413"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb414"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/private/var/folders/bx/3hzyf2v96mv2xzm0yc02z87xgmf3zs/T/tri.vdb&quot;</span></span></code></pre></div>
</blockquote>
<p>Verify it exported:</p>
<div class="sourceCode" id="cb415"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FileExistsQ</span><span class="op">[</span><span class="va">file</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb416"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb417"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FileByteCount</span><span class="op">[</span><span class="va">file</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb418"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fl">11387892</span></span></code></pre></div>
</blockquote>
<p>Import the file:</p>
<div class="sourceCode" id="cb419"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBImport</span><span class="op">[</span><span class="va">file</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb420"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBScalarGridQ</span><span class="op">[</span><span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb421"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<hr />
<p>Meta information is also exported:</p>
<div class="sourceCode" id="cb422"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span>, <span class="st">&quot;Name&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;ball&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb423"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="va">file</span> <span class="op">=</span> <span class="fu">FileNameJoin</span><span class="op">[{</span><span class="va">temploc</span>, <span class="st">&quot;ball.vdb&quot;</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb424"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb425"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/private/var/folders/bx/3hzyf2v96mv2xzm0yc02z87xgmf3zs/T/ball.vdb&quot;</span></span></code></pre></div>
</blockquote>
<p>Import the grid by name:</p>
<div class="sourceCode" id="cb426"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBImport</span><span class="op">[</span><span class="va">file</span>, <span class="st">&quot;ball&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb427"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBScalarGridQ</span><span class="op">[</span><span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb428"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">True</span></span></code></pre></div>
</blockquote>
<p>Import fails when there is no grid of a given name:</p>
<div class="sourceCode" id="cb429"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImport</span><span class="op">[</span><span class="va">file</span>, <span class="st">&quot;foo&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0izprmlmc1na1.png" loading="lazy" width=237 height=20></p>
<blockquote>
<div class="sourceCode" id="cb430"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<hr />
<p>Import a grid from a URL:</p>
<div class="sourceCode" id="cb431"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBImport</span><span class="op">[</span><span class="st">&quot;https://artifacts.aswf.io/io/aswf/openvdb/models/bunny.vdb/1.0.0/bunny.vdb-1.0.0.zip&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb432"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;PropertyValueGrid&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1aenqq78fb1oc.png" loading="lazy" width=559 height=544></p>
<hr />
<p><code>OpenVDBImport</code> and <code>OpenVDBExport</code> work with
any supported grid type:</p>
<div class="sourceCode" id="cb433"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int64&quot;</span><span class="op">];</span></span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">{</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">9</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb434"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="va">file</span> <span class="op">=</span> <span class="fu">FileNameJoin</span><span class="op">[{</span><span class="va">temploc</span>, <span class="st">&quot;int_grid.vdb&quot;</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb435"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb436"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/private/var/folders/bx/3hzyf2v96mv2xzm0yc02z87xgmf3zs/T/int_grid.vdb&quot;</span></span></code></pre></div>
</blockquote>
<p>Import it back:</p>
<div class="sourceCode" id="cb437"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBImport</span><span class="op">[</span><span class="va">file</span><span class="op">];</span></span></code></pre></div>
<p>Verify the values at z = 0 are set:</p>
<div class="sourceCode" id="cb438"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid2</span>, <span class="fl">0</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb439"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">}</span>, <span class="op">{</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">9</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default, <code>OpenVDBExport</code> will not overwrite a file that
already exists:</p>
<div class="sourceCode" id="cb440"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb441"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="va">file</span> <span class="op">=</span> <span class="fu">FileNameJoin</span><span class="op">[{</span><span class="va">temploc</span>, <span class="st">&quot;ball2.vdb&quot;</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb442"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb443"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/private/var/folders/bx/3hzyf2v96mv2xzm0yc02z87xgmf3zs/T/ball2.vdb&quot;</span></span></code></pre></div>
</blockquote>
<p>Export again:</p>
<div class="sourceCode" id="cb444"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1wws8rqg1aopx.png" loading="lazy" width=655 height=20></p>
<blockquote>
<div class="sourceCode" id="cb445"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<p>Tell <code>OpenVDBExport</code> to overwrite the file:</p>
<div class="sourceCode" id="cb446"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBExport</span><span class="op">[</span><span class="va">file</span>, <span class="va">grid</span>, <span class="fu">OverwriteTarget</span> <span class="op">-&gt;</span> <span class="fu">True</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb447"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/private/var/folders/bx/3hzyf2v96mv2xzm0yc02z87xgmf3zs/T/ball2.vdb&quot;</span></span></code></pre></div>
</blockquote>
<h1 id="rendering">Rendering</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdblevelsetrender"
class="local-toc-link-2">OpenVDBLevelSetRender</a></li>
<li><a href="#openvdblevelsetviewer"
class="local-toc-link-2">OpenVDBLevelSetViewer</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdblevelsetrender">OpenVDBLevelSetRender<a href="#rendering"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb448"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBLevelSetRender</span></code></pre></div>
<p><img src="img/08t6i16dkobg4.png" loading="lazy" width=523 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb449"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Render a level set using default <code>Graphics3D</code> view
options:</p>
<div class="sourceCode" id="cb450"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/12casxpjsp2x6.png" loading="lazy" width=245 height=171></p>
<hr />
<p>Render the grid using a different color:</p>
<div class="sourceCode" id="cb451"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Red</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0af61v7phyksg.png" loading="lazy" width=245 height=171></p>
<hr />
<p>Render the grid using different base shaders:</p>
<div class="sourceCode" id="cb452"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="va">baseshaders</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Diffuse&quot;</span>, <span class="st">&quot;Matte&quot;</span>, <span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Position&quot;</span><span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb453"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Row</span><span class="op">[</span><span class="fu">Labeled</span><span class="op">[</span><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, #<span class="op">]</span>, <span class="fu">Text</span><span class="op">[</span>#<span class="op">]]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">baseshaders</span>, <span class="fu">Spacer</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">ImageSizeMultipliers</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1iskvo91s8jyy.png" loading="lazy" width=1022 height=193></p>
<hr />
<p>Render the grid using different materials:</p>
<div class="sourceCode" id="cb454"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="va">materials</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Aluminum&quot;</span>, <span class="st">&quot;Brass&quot;</span>, <span class="st">&quot;Bronze&quot;</span>, <span class="st">&quot;Copper&quot;</span>, <span class="st">&quot;Electrum&quot;</span>, <span class="st">&quot;Gold&quot;</span>, <span class="st">&quot;Iron&quot;</span>, <span class="st">&quot;Pewter&quot;</span>, <span class="st">&quot;Silver&quot;</span>, <span class="st">&quot;Clay&quot;</span>, <span class="st">&quot;Foil&quot;</span>, <span class="st">&quot;Glazed&quot;</span>, <span class="st">&quot;Plastic&quot;</span>, <span class="st">&quot;Rubber&quot;</span>, <span class="st">&quot;Satin&quot;</span><span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb455"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Multicolumn</span><span class="op">[</span><span class="fu">Labeled</span><span class="op">[</span><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, #<span class="op">]</span>, <span class="fu">Text</span><span class="op">[</span>#<span class="op">]]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">materials</span>, <span class="fu">Appearance</span> <span class="op">-&gt;</span> <span class="st">&quot;Horizontal&quot;</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">ImageSizeMultipliers</span> <span class="op">-&gt;</span> <span class="fl">1</span>, <span class="fu">Spacings</span> <span class="op">-&gt;</span> <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14maj4c5c0yym.png" loading="lazy" width=1058 height=786></p>
<hr />
<p>Combine shaders and colors with second argument of the form
<code>{shader, color}</code>:</p>
<div class="sourceCode" id="cb456"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Plastic&quot;</span>, <span class="fu">Orange</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/0nl5fezdjhvbp.png" loading="lazy" width=245 height=171></p>
<hr />
<p>Add different back-face coloring with second argument of the form
{shader,<img src="img/0t0x3w338emci.png" loading="lazy" width=68 height=17>,<img src="img/12e3e9qx3vg3e.png" loading="lazy" width=62 height=17>}:</p>
<div class="sourceCode" id="cb457"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Plastic&quot;</span>, <span class="fu">Orange</span>, <span class="fu">Blue</span><span class="op">}</span>, <span class="fu">ViewRange</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">6.55</span>, <span class="fl">100</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/0vr3rhghs2us4.png" loading="lazy" width=245 height=156></p>
<hr />
<p>Add different closed-face coloring, used during clipping, with second
argument of the form
{shader,<img src="img/0t0x3w338emci.png" loading="lazy" width=68 height=17>,<img src="img/12e3e9qx3vg3e.png" loading="lazy" width=62 height=17>,<img src="img/0ock3hjtk6ilm.png" loading="lazy" width=73 height=17>}:</p>
<div class="sourceCode" id="cb458"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Plastic&quot;</span>, <span class="fu">Orange</span>, <span class="fu">Blue</span>, <span class="fu">Purple</span><span class="op">}</span>, <span class="fu">ViewRange</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">6.55</span>, <span class="fl">100</span><span class="op">}</span>, <span class="st">&quot;ClosedClipping&quot;</span> <span class="op">-&gt;</span> <span class="fu">True</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1cu4xqb13bzej.png" loading="lazy" width=245 height=156></p>
<hr />
<p>Render the grid using named color themes:</p>
<div class="sourceCode" id="cb454"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="va">themes</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Default&quot;</span>, <span class="st">&quot;Monochrome&quot;</span>, <span class="st">&quot;Bronze&quot;</span>, <span class="st">&quot;Bold&quot;</span>, <span class="st">&quot;Cool&quot;</span>, <span class="st">&quot;Neon&quot;</span>, <span class="st">&quot;Pastel&quot;</span>, <span class="st">&quot;Soft&quot;</span>, <span class="st">&quot;Vibrant&quot;</span>, <span class="st">&quot;Warm&quot;</span><span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb455"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Multicolumn</span><span class="op">[</span><span class="fu">Labeled</span><span class="op">[</span><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, #, <span class="fu">ViewRange</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">6.55</span>, <span class="fl">100</span><span class="op">}]</span>, <span class="fu">Text</span><span class="op">[</span>#<span class="op">]]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">themes</span>, <span class="fu">Appearance</span> <span class="op">-&gt;</span> <span class="st">&quot;Horizontal&quot;</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">ImageSizeMultipliers</span> <span class="op">-&gt;</span> <span class="fl">1</span>, <span class="fu">Spacings</span> <span class="op">-&gt;</span> <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/efkjbvber.png" loading="lazy" width=898 height=696></p>
<hr />
<p>Combine shaders and named color themes with second argument of the form
<code>{shader, theme}</code>:</p>
<div class="sourceCode" id="cb457"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Glazed&quot;</span>, <span class="st">&quot;Warm&quot;</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/wfigweiub.png" loading="lazy" width=281 height=208></p>
<hr />
<p><code>OpenVDBLevelSetRender</code> shares the following options with
<code>Graphics3D</code>:</p>
<div class="sourceCode" id="cb459"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Intersection</span><span class="op">[</span><span class="fu">Options</span><span class="op">[</span><span class="fu">OpenVDBLevelSetRender</span><span class="op">]</span>, <span class="fu">Options</span><span class="op">[</span><span class="fu">Graphics3D</span><span class="op">]</span>, <span class="fu">SameTest</span> <span class="op">-&gt;</span> <span class="op">(</span>#<span class="fl">1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]]</span> <span class="op">===</span> #<span class="fl">2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]]</span> <span class="op">&amp;)]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb460"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Background</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="fu">ViewAngle</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="fu">ViewCenter</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">1.3</span>, <span class="op">-</span><span class="fl">2.4</span>, <span class="fl">2.</span><span class="op">}</span>, <span class="fu">ViewProjection</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="fu">ViewRange</span> <span class="op">-&gt;</span> <span class="fu">All</span>, <span class="fu">ViewVertical</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<p>These option values produce similar outputs compared to
<code>Graphics3D</code>:</p>
<div class="sourceCode" id="cb461"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fu">Background</span> <span class="op">-&gt;</span> <span class="fu">GrayLevel</span><span class="op">[</span><span class="fl">0.85</span><span class="op">]</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">3</span><span class="op">}</span>, <span class="fu">ViewVertical</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fu">ViewCenter</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">}</span>, <span class="fu">ViewAngle</span> <span class="op">-&gt;</span> <span class="fu">Pi</span><span class="op">/</span><span class="fl">8</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0h4r1w5u2rrz0.png" loading="lazy" width=181 height=181></p>
<div class="sourceCode" id="cb462"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Background</span> <span class="op">-&gt;</span> <span class="fu">GrayLevel</span><span class="op">[</span><span class="fl">0.85</span><span class="op">]</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">3</span><span class="op">}</span>, <span class="fu">ViewVertical</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fu">ViewCenter</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">}</span>, <span class="fu">ViewAngle</span> <span class="op">-&gt;</span> <span class="fu">Pi</span><span class="op">/</span><span class="fl">8</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1xseflo1grv7f.png" loading="lazy" width=182 height=182></p>
<hr />
<p><code>OpenVDBLevelSetRender</code> only works with level sets:</p>
<div class="sourceCode" id="cb463"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb464"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb465"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb466"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h3 id="openvdblevelsetviewer">OpenVDBLevelSetViewer<a href="#rendering"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb467"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBLevelSetViewer</span></code></pre></div>
<p><img src="img/0qqflfyyq5hpk.png" loading="lazy" width=603 height=78></p>
<p><strong><em>The following examples are static images of an
interactive output. Reevaluate them to interact.</em></strong></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb468"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Interactively render a level set:</p>
<div class="sourceCode" id="cb469"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0lwsold4u5pyn.png" loading="lazy" width=404 height=493></p>
<p>The following controls can interactively move, zoom, and rotate the
object:</p>
<p>• <strong>3D rotation:</strong> Mouse down near the center of a 3D
graphic and drag to rotate it in 3D. The
<img src="img/0eygmo7vta608.png" loading="lazy" width=20 height=22>
cursor indicates 3D rotation.</p>
<p>• <strong>2D rotation:</strong> Mouse down near the edge of a 3D
graphic and drag to rotate it in the plane of the screen. The
<img src="img/0bz5g5kqbrpx7.png" loading="lazy" width=20 height=25>
cursor indicates 2D rotation.</p>
<p>• <strong>Pan:</strong> Press shift while dragging to pan. The
<img src="img/0wpk672rc5tii.png" loading="lazy" width=21 height=23>
cursor indicates panning.</p>
<p>• <strong>Zoom:</strong> Press cmd (on mac), ctrl (otherwise) while
dragging to zoom. Drag upward to zoom in and downward to zoom out. The
<img src="img/1kwkiwwqm472b.png" loading="lazy" width=20 height=21>
cursor indicates zoom.</p>
<p>• <strong>Dolly (V13.1+):</strong> Press cmd+shift (on mac),
ctrl+shift (otherwise) while dragging to dolly. Drag upward to move into
the screen and downward to move out of the screen. The
<img src="img/0czqpu13bgi4n.png" loading="lazy" width=17 height=23>
cursor indicates dolly.</p>
<p>• <strong>Look around (V13.1+):</strong> Press cmd+option (on mac),
ctrl+option (otherwise) while dragging to look around while staying at a
fixed view point. The
<img src="img/0ke9nsccgs7t9.png" loading="lazy" width=12 height=24>
cursor indicates looking around.</p>
<hr />
<p>The Appearance tab lets you control settings like shading,
resolution, iso‐value, and colors:</p>
<div class="sourceCode" id="cb470"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0ce2pa7py7hls.png" loading="lazy" width=404 height=285></p>
<p>The shading setting lets you pick different base shaders and
materials:</p>
<p><img src="img/0ncs9ofyv3i6l.png" loading="lazy" width=404 height=481></p>
<p>With closed clipping enabled, another color option becomes
available:</p>
<p><img src="img/0ry1o85w56l2s.png" loading="lazy" width=404 height=300></p>
<p>The color swatches are controls that open up an interactive color
picker:</p>
<p><img src="img/190ihhpf409fm.png" loading="lazy" width=527 height=446></p>
<hr />
<p>The Orientation tab lets you choose preset view verticals and view
points, as well as controls to move around the scene:</p>
<div class="sourceCode" id="cb471"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1o5ww6x76h3ko.png" loading="lazy" width=404 height=213></p>
<hr />
<p>The Field of View tab lets you clip the object, zoom by changing the
view angle, and choose the view projection:</p>
<div class="sourceCode" id="cb472"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1g8p01i33mk7o.png" loading="lazy" width=404 height=585></p>
<hr />
<p>The General tab lets you copy the current image or view settings and
allows you to reset the view:</p>
<div class="sourceCode" id="cb473"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0rw0aeg3jxpnk.png" loading="lazy" width=406 height=525></p>
<hr />
<p><code>OpenVDBLevelSetViewer</code> takes the same arguments as
<code>OpenVDBLevelSetRender</code>, which determines its initial
output:</p>
<div class="sourceCode" id="cb474"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="st">&quot;Plastic&quot;</span>, <span class="fu">Orange</span><span class="op">}</span>, <span class="fu">Background</span> <span class="op">-&gt;</span> <span class="fu">Black</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="fu">ViewAngle</span> <span class="op">-&gt;</span> <span class="fl">0.11</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1kt8xc9hbmj5m.png" loading="lazy" width=404 height=493></p>
<hr />
<p><code>OpenVDBLevelSetViewer</code> only works with level sets:</p>
<div class="sourceCode" id="cb475"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb476"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb477"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetViewer</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb478"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h1 id="aggregate-data">Aggregate data</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#data" class="local-toc-link-1">Data</a></li>
<li><a href="#slice" class="local-toc-link-1">Slice</a></li>
<li><a href="#active-regions" class="local-toc-link-1">Active
regions</a></li>
</ul>
</div>
<h2 id="data">Data<a href="#aggregate-data" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbdata" class="local-toc-link-2">OpenVDBData</a></li>
</ul>
</div>
<h3 id="openvdbdata">OpenVDBData<a href="#data" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb479"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBData</span></code></pre></div>
<p><img src="img/1achb8elvlisp.png" loading="lazy" width=468 height=78></p>
<hr />
<p>Create a grid:</p>
<div class="sourceCode" id="cb480"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<p>Retrieve the voxel data as a dense 3-tensor:</p>
<div class="sourceCode" id="cb481"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">=</span> <span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<p>Check its dimensions:</p>
<div class="sourceCode" id="cb482"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb483"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">25</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Look at a slice in the middle the data:</p>
<div class="sourceCode" id="cb484"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">data</span><span class="op">[[</span><span class="fl">13</span><span class="op">]]</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0evr4mz28hyye.png" loading="lazy" width=302 height=246></p>
<hr />
<p>Retrieve the voxel data over a bounding box:</p>
<div class="sourceCode" id="cb485"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb486"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">=</span> <span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb487"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb487-1"><a href="#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb488"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">11</span>, <span class="fl">11</span>, <span class="fl">11</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Look at a slice in the middle the data:</p>
<div class="sourceCode" id="cb489"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb489-1"><a href="#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">data</span><span class="op">[[</span><span class="fl">6</span><span class="op">]]</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0zjl6jv7m9ipg.png" loading="lazy" width=301 height=244></p>
<hr />
<p>By default <code>OpenVDBData</code> works in index coordinates:</p>
<div class="sourceCode" id="cb490"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBData</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb491"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb491-1"><a href="#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in the bounds in world space:</p>
<div class="sourceCode" id="cb492"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb493"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb493-1"><a href="#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">=</span> <span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb494"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb495"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb495-1"><a href="#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">11</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb496"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">data</span><span class="op">[[</span><span class="fl">6</span><span class="op">]]</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/13kc491rv6ah4.png" loading="lazy" width=296 height=252></p>
<hr />
<p><code>OpenVDBData</code> works with any grid type except mask.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb497"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb497-1"><a href="#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb497-2"><a href="#cb497-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb498"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb498-1"><a href="#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb499"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>Integer grid:</p>
<div class="sourceCode" id="cb500"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb500-1"><a href="#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int32&quot;</span><span class="op">];</span></span>
<span id="cb500-2"><a href="#cb500-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">17</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb501"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb501-1"><a href="#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb502"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb502-1"><a href="#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">17</span>, <span class="fl">0</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>Vector grid:</p>
<div class="sourceCode" id="cb503"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb503-1"><a href="#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vector&quot;</span><span class="op">];</span></span>
<span id="cb503-2"><a href="#cb503-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb504"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb504-1"><a href="#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBData</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb505"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb505-1"><a href="#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}}</span>, <span class="op">{{{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">1.</span>, <span class="fl">1.</span>, <span class="fl">1.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}}}</span></span></code></pre></div>
</blockquote>
<p>Mask grid:</p>
<div class="sourceCode" id="cb506"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb506-1"><a href="#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBData</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">]</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb507"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb507-1"><a href="#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="slice">Slice<a href="#aggregate-data" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbslice"
class="local-toc-link-2">OpenVDBSlice</a></li>
</ul>
</div>
<h3 id="openvdbslice">OpenVDBSlice<a href="#slice"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb508"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb508-1"><a href="#cb508-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSlice</span></code></pre></div>
<p><img src="img/0orx0g5rpxkbz.png" loading="lazy" width=418 height=78></p>
<hr />
<p>Create a grid:</p>
<div class="sourceCode" id="cb509"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb509-1"><a href="#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<p>Retrieve the voxel data at z = 0 as a dense matrix:</p>
<div class="sourceCode" id="cb510"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb510-1"><a href="#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">=</span> <span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span><span class="op">];</span></span></code></pre></div>
<p>Check its dimensions:</p>
<div class="sourceCode" id="cb511"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb511-1"><a href="#cb511-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb512"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb512-1"><a href="#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">25</span>, <span class="fl">25</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Plot the slice:</p>
<div class="sourceCode" id="cb513"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb513-1"><a href="#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">slice</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1tf4u97w7suyp.png" loading="lazy" width=301 height=245></p>
<hr />
<p>Retrieve the voxel data at z = 0 over an xy bounding box:</p>
<div class="sourceCode" id="cb514"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb514-1"><a href="#cb514-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb515"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb515-1"><a href="#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">=</span> <span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb516"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb516-1"><a href="#cb516-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb517"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb517-1"><a href="#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">11</span>, <span class="fl">11</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Plot the slice:</p>
<div class="sourceCode" id="cb518"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb518-1"><a href="#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">slice</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/18962ymmbyd0u.png" loading="lazy" width=301 height=244></p>
<hr />
<p>By default <code>OpenVDBSlice</code> works in index coordinates:</p>
<div class="sourceCode" id="cb519"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb519-1"><a href="#cb519-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSlice</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb520"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb520-1"><a href="#cb520-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in the bounds in world space:</p>
<div class="sourceCode" id="cb521"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb521-1"><a href="#cb521-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb522"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb522-1"><a href="#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">=</span> <span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span>, <span class="op">{{</span><span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb523"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb523-1"><a href="#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="va">slice</span> <span class="op">//</span> <span class="fu">Dimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb524"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb524-1"><a href="#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb525"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb525-1"><a href="#cb525-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ListDensityPlot</span><span class="op">[</span><span class="va">slice</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLegends</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0jawrkmaobxxl.png" loading="lazy" width=299 height=248></p>
<hr />
<p><code>OpenVDBSlice</code> works with any grid type except mask.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb526"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb526-2"><a href="#cb526-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb527"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb527-1"><a href="#cb527-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb528"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<p>Integer grid:</p>
<div class="sourceCode" id="cb529"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb529-1"><a href="#cb529-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int32&quot;</span><span class="op">];</span></span>
<span id="cb529-2"><a href="#cb529-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fl">17</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb530"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb530-1"><a href="#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb531"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb531-1"><a href="#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">17</span>, <span class="fl">0</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<p>Vector grid:</p>
<div class="sourceCode" id="cb532"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb532-1"><a href="#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vector&quot;</span><span class="op">];</span></span>
<span id="cb532-2"><a href="#cb532-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb533"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb533-1"><a href="#cb533-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb534"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb534-1"><a href="#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">1.</span>, <span class="fl">1.</span>, <span class="fl">1.</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">0.</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>Mask grid:</p>
<div class="sourceCode" id="cb535"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb535-1"><a href="#cb535-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSlice</span><span class="op">[</span><span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">]</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb536"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb536-1"><a href="#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="active-regions">Active regions<a href="#aggregate-data"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbactivetiles"
class="local-toc-link-2">OpenVDBActiveTiles</a></li>
<li><a href="#openvdbactivevoxels"
class="local-toc-link-2">OpenVDBActiveVoxels</a></li>
</ul>
</div>
<h3 id="openvdbactivetiles">OpenVDBActiveTiles<a href="#active-regions"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb537"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb537-1"><a href="#cb537-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBActiveTiles</span></code></pre></div>
<p><img src="img/1t6wabjz0rco3.png" loading="lazy" width=418 height=78></p>
<hr />
<p>Create a fog volume:</p>
<div class="sourceCode" id="cb538"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb538-1"><a href="#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.03</span><span class="op">]];</span></span></code></pre></div>
<p>Retrieve its tiles:</p>
<div class="sourceCode" id="cb539"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span> <span class="op">=</span> <span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span><span class="op">];</span></span></code></pre></div>
<p>Tiles are given as a list of the form
{{<img src="img/051ldrnw20j6s.png" loading="lazy" width=70 height=17>,<img src="img/0pqf3r8ztsl1i.png" loading="lazy" width=76 height=20>},{<img src="img/0woflxk3547h1.png" loading="lazy" width=70 height=17>,<img src="img/1m1athntgeza5.png" loading="lazy" width=76 height=20>},…}:</p>
<div class="sourceCode" id="cb540"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span><span class="op">[[</span><span class="fl">1</span> <span class="op">;;</span> <span class="fl">5</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb541"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb541-1"><a href="#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{-</span><span class="fl">24</span>, <span class="op">-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">8</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">9</span>, <span class="op">-</span><span class="fl">1</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">24</span>, <span class="op">-</span><span class="fl">8</span>, <span class="op">-</span><span class="fl">16</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">9</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">24</span>, <span class="op">-</span><span class="fl">8</span>, <span class="op">-</span><span class="fl">8</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">24</span>, <span class="op">-</span><span class="fl">8</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">9</span>, <span class="op">-</span><span class="fl">17</span>, <span class="op">-</span><span class="fl">1</span><span class="op">}}</span>, <span class="op">{{-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">16</span>, <span class="op">-</span><span class="fl">16</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">9</span>, <span class="op">-</span><span class="fl">9</span>, <span class="op">-</span><span class="fl">9</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>View the tiles, offsetting the high corners by 1:</p>
<div class="sourceCode" id="cb542"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb542-1"><a href="#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[</span>#<span class="fl">1</span>, #<span class="fl">2</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&amp;</span> <span class="op">@@@</span> <span class="va">tiles</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0l5jkyu4zxtz2.png" loading="lazy" width=240 height=260></p>
<hr />
<p>Retrieve tiles over a bounding box:</p>
<div class="sourceCode" id="cb543"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb543-1"><a href="#cb543-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.03</span><span class="op">]];</span></span></code></pre></div>
<p>Retrieve its tiles:</p>
<div class="sourceCode" id="cb544"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span> <span class="op">=</span> <span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb545"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb545-1"><a href="#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb546"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb546-1"><a href="#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">15</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">8</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">15</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">7</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">15</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">15</span>, <span class="fl">15</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>Only retrieve the tiles fully contained in the bounding box:</p>
<div class="sourceCode" id="cb547"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb547-1"><a href="#cb547-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}</span>, <span class="st">&quot;PartialOverlap&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb548"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb548-1"><a href="#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Retrieve tiles over a bounding box:</p>
<div class="sourceCode" id="cb549"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb549-1"><a href="#cb549-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.03</span><span class="op">]];</span></span></code></pre></div>
<p>Retrieve its tiles:</p>
<div class="sourceCode" id="cb550"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb550-1"><a href="#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span> <span class="op">=</span> <span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb551"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb551-1"><a href="#cb551-1" aria-hidden="true" tabindex="-1"></a><span class="va">tiles</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb552"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb552-1"><a href="#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">15</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">8</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">15</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">7</span>, <span class="fl">15</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">15</span>, <span class="fl">7</span><span class="op">}}</span>, <span class="op">{{</span><span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">8</span><span class="op">}</span>, <span class="op">{</span><span class="fl">15</span>, <span class="fl">15</span>, <span class="fl">15</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<p>Only retrieve the tiles fully contained in the bounding box:</p>
<div class="sourceCode" id="cb553"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb553-1"><a href="#cb553-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}</span>, <span class="st">&quot;PartialOverlap&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb554"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb554-1"><a href="#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBActiveTiles</code> works in index
coordinates:</p>
<div class="sourceCode" id="cb555"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb555-1"><a href="#cb555-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBActiveTiles</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb556"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb556-1"><a href="#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in the bounds in world space:</p>
<div class="sourceCode" id="cb557"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb557-1"><a href="#cb557-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.03</span><span class="op">]];</span></span></code></pre></div>
<div class="sourceCode" id="cb558"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb558-1"><a href="#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.3</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.3</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span>, <span class="st">&quot;PartialOverlap&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb559"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb559-1"><a href="#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span><span class="op">}}}</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbactivevoxels">OpenVDBActiveVoxels<a
href="#active-regions" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb560"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb560-1"><a href="#cb560-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBActiveVoxels</span></code></pre></div>
<p><img src="img/0uzwojyq9nuiw.png" loading="lazy" width=541 height=78></p>
<hr />
<p>Retrieve active voxels and their positions as a
<code>SparseArray</code>:</p>
<div class="sourceCode" id="cb561"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb561-1"><a href="#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.2</span>, <span class="fl">1.25</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb562"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb562-1"><a href="#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="va">voxdata</span> <span class="op">=</span> <span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0r1pw6fw4r14l.png" loading="lazy" width=287 height=46></p>
<p>Plot the locations of the active values:</p>
<div class="sourceCode" id="cb563"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb563-1"><a href="#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">Point</span><span class="op">[</span><span class="va">voxdata</span><span class="op">[</span><span class="st">&quot;NonzeroPositions&quot;</span><span class="op">]]]</span></span></code></pre></div>
<p><img src="img/189m44npqaaio.png" loading="lazy" width=240 height=260></p>
<p>Examine a histogram of all active values. Since a ball has positive
curvature, we expect more active voxels in the outer band (positive
values):</p>
<div class="sourceCode" id="cb564"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb564-1"><a href="#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Histogram</span><span class="op">[</span><span class="va">voxdata</span><span class="op">[</span><span class="st">&quot;NonzeroValues&quot;</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/082p45fwdu0qj.png" loading="lazy" width=360 height=227></p>
<hr />
<p>Retrieve active voxels inside a bounding box:</p>
<div class="sourceCode" id="cb565"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb565-1"><a href="#cb565-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.2</span>, <span class="fl">1.25</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb566"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb566-1"><a href="#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/03x36wv3gwljn.png" loading="lazy" width=285 height=46></p>
<hr />
<p>By default <code>OpenVDBActiveVoxels</code> works in index
coordinates:</p>
<div class="sourceCode" id="cb567"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb567-1"><a href="#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBActiveVoxels</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb568"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb568-1"><a href="#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in the bounds in world space:</p>
<div class="sourceCode" id="cb569"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb569-1"><a href="#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="op">.</span><span class="fl">9</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="op">.</span><span class="fl">4</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1.7</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1iut1gj1uus3p.png" loading="lazy" width=282 height=46></p>
<hr />
<p>Retrieve only the positions of active values:</p>
<div class="sourceCode" id="cb570"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb570-1"><a href="#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.2</span>, <span class="fl">1.25</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb571"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb571-1"><a href="#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="st">&quot;Positions&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Short</span></span></code></pre></div>
<p><img src="img/1bvdheltgxpy7.png" loading="lazy" width=1074 height=39></p>
<hr />
<p>Retrieve only the active values:</p>
<div class="sourceCode" id="cb572"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb572-1"><a href="#cb572-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.2</span>, <span class="fl">1.25</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb573"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb573-1"><a href="#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="st">&quot;Values&quot;</span><span class="op">]</span> <span class="op">//</span> <span class="fu">Short</span></span></code></pre></div>
<p><img src="img/060oxsbcdwfkt.png" loading="lazy" width=707 height=17></p>
<hr />
<p>The default return type is <code>SparseArray</code>, except for
vector grids which returns a list of SparseArrays.</p>
<p>Initialize a vector grid with 4 active voxels:</p>
<div class="sourceCode" id="cb574"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Vec2S&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb575"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb575-1"><a href="#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">}];</span></span>
<span id="cb575-2"><a href="#cb575-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb576"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb576-1"><a href="#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="va">voxdata</span> <span class="op">=</span> <span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0107jlnkm8geg.png" loading="lazy" width=579 height=46></p>
<p>The first sparse array contains the first component of the active
values:</p>
<div class="sourceCode" id="cb577"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb577-1"><a href="#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="va">voxdata</span><span class="op">[[</span><span class="fl">1</span><span class="op">]][</span><span class="st">&quot;NonzeroValues&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb578"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb578-1"><a href="#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>The second sparse array contains the second component of the active
values:</p>
<div class="sourceCode" id="cb579"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb579-1"><a href="#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="va">voxdata</span><span class="op">[[</span><span class="fl">2</span><span class="op">]][</span><span class="st">&quot;NonzeroValues&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb580"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb580-1"><a href="#cb580-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.75</span>, <span class="fl">0.75</span>, <span class="fl">0.75</span>, <span class="fl">0.75</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBActiveVoxels</code> works on all grid types:</p>
<div class="sourceCode" id="cb581"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb581-1"><a href="#cb581-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Int64&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb582"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb582-1"><a href="#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="fl">19</span><span class="op">];</span></span>
<span id="cb582-2"><a href="#cb582-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb583"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb583-1"><a href="#cb583-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/01ouf5in4kqm6.png" loading="lazy" width=275 height=46></p>
<p>Active values for mask grids are represented as a pattern
<code>SparseArray</code>:</p>
<div class="sourceCode" id="cb584"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb584-1"><a href="#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb585"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb585-1"><a href="#cb585-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}}</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb586"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb586-1"><a href="#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/19bqcd5cn95sc.png" loading="lazy" width=275 height=88></p>
<p>The <code>"Values"</code> property fails for mask grids:</p>
<div class="sourceCode" id="cb587"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb587-1"><a href="#cb587-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="st">&quot;Values&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb588"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb588-1"><a href="#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<hr />
<p>Visualize the narrow band of a piece of a level set:</p>
<div class="sourceCode" id="cb589"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb589-1"><a href="#cb589-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb590"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb590-1"><a href="#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="va">bg</span> <span class="op">=</span> <span class="va">grid</span><span class="op">[</span><span class="st">&quot;BackgroundValue&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb591"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb591-1"><a href="#cb591-1" aria-hidden="true" tabindex="-1"></a><span class="va">pos</span> <span class="op">=</span> <span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="st">&quot;Positions&quot;</span><span class="op">];</span></span>
<span id="cb591-2"><a href="#cb591-2" aria-hidden="true" tabindex="-1"></a><span class="va">vals</span> <span class="op">=</span> <span class="fu">Rescale</span><span class="op">[</span><span class="fu">OpenVDBActiveVoxels</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">Automatic</span>, <span class="st">&quot;Values&quot;</span><span class="op">]</span>, <span class="op">{-</span><span class="va">bg</span>, <span class="va">bg</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb592"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb592-1"><a href="#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Legended</span><span class="op">[</span></span>
<span id="cb592-2"><a href="#cb592-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Graphics3D</span><span class="op">[</span></span>
<span id="cb592-3"><a href="#cb592-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">MapThread</span><span class="op">[</span><span class="fu">If</span><span class="op">[</span>#<span class="fl">1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]]</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="op">{</span><span class="fu">ColorData</span><span class="op">[</span><span class="st">&quot;Rainbow&quot;</span><span class="op">][</span>#<span class="fl">2</span><span class="op">]</span>, <span class="fu">Cuboid</span><span class="op">[</span>#<span class="fl">1</span><span class="op">]}</span>, <span class="fu">Nothing</span><span class="op">]</span> <span class="op">&amp;</span>, <span class="op">{</span><span class="va">pos</span>, <span class="va">vals</span><span class="op">}]</span>, </span>
<span id="cb592-4"><a href="#cb592-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">Boxed</span> <span class="op">-&gt;</span> <span class="fu">False</span>, </span>
<span id="cb592-5"><a href="#cb592-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">Lighting</span> <span class="op">-&gt;</span> <span class="st">&quot;Neutral&quot;</span>, </span>
<span id="cb592-6"><a href="#cb592-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">1.2</span>, <span class="op">-</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">}</span>, </span>
<span id="cb592-7"><a href="#cb592-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ViewVertical</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}</span> </span>
<span id="cb592-8"><a href="#cb592-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span>, </span>
<span id="cb592-9"><a href="#cb592-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">BarLegend</span><span class="op">[{</span><span class="st">&quot;Rainbow&quot;</span>, <span class="op">{-</span><span class="va">bg</span>, <span class="va">bg</span><span class="op">}}]</span> </span>
<span id="cb592-10"><a href="#cb592-10" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/065p19yfsebi1.png" loading="lazy" width=421 height=362></p>
<h1 id="csg-combination">CSG &amp; combination</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#csg" class="local-toc-link-1">CSG</a></li>
<li><a href="#in-place-csg" class="local-toc-link-1">In-place
CSG</a></li>
<li><a href="#clipping" class="local-toc-link-1">Clipping</a></li>
<li><a href="#minmax-combinations" class="local-toc-link-1">Min/Max
combinations</a></li>
</ul>
</div>
<h2 id="csg">CSG<a href="#csg-combination" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbunion"
class="local-toc-link-2">OpenVDBUnion</a></li>
<li><a href="#openvdbintersection"
class="local-toc-link-2">OpenVDBIntersection</a></li>
<li><a href="#openvdbdifference"
class="local-toc-link-2">OpenVDBDifference</a></li>
</ul>
</div>
<h3 id="openvdbunion">OpenVDBUnion<a href="#csg" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb593"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb593-1"><a href="#cb593-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBUnion</span></code></pre></div>
<p><img src="img/07soo71uabfh3.png" loading="lazy" width=681 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb594"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb594-1"><a href="#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb594-2"><a href="#cb594-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a union operation:</p>
<div class="sourceCode" id="cb595"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb595-1"><a href="#cb595-1" aria-hidden="true" tabindex="-1"></a><span class="va">union</span> <span class="op">=</span> <span class="fu">OpenVDBUnion</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb596"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb596-1"><a href="#cb596-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">union</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14qq9ykieqk1p.png" loading="lazy" width=253 height=226></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb597"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb597-1"><a href="#cb597-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">union</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb598"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb598-1"><a href="#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">205</span>, <span class="fl">205</span>, <span class="fl">205</span><span class="op">}</span>, <span class="op">{</span><span class="fl">126</span>, <span class="fl">126</span>, <span class="fl">105</span><span class="op">}</span>, <span class="op">{</span><span class="fl">226</span>, <span class="fl">226</span>, <span class="fl">205</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Union more than two grids:</p>
<div class="sourceCode" id="cb599"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb599-1"><a href="#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb599-2"><a href="#cb599-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb599-3"><a href="#cb599-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb600"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb600-1"><a href="#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="va">union</span> <span class="op">=</span> <span class="fu">OpenVDBUnion</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb601"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb601-1"><a href="#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">union</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1n5xk1rnq2egu.png" loading="lazy" width=207 height=226></p>
<hr />
<p><code>OpenVDBUnion</code> is idempotent:</p>
<div class="sourceCode" id="cb602"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb602-1"><a href="#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb603"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb603-1"><a href="#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="va">union</span> <span class="op">=</span> <span class="fu">OpenVDBUnion</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<p>Both grids represent the same object:</p>
<div class="sourceCode" id="cb604"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb604-1"><a href="#cb604-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">union</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb605"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb605-1"><a href="#cb605-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">753990</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBUnion</code> only works on level sets:</p>
<div class="sourceCode" id="cb606"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb606-1"><a href="#cb606-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb606-2"><a href="#cb606-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb607"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb607-1"><a href="#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBUnion</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb608"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb608-1"><a href="#cb608-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbintersection">OpenVDBIntersection<a href="#csg"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb609"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb609-1"><a href="#cb609-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBIntersection</span></code></pre></div>
<p><img src="img/14pfkbe7mmfof.png" loading="lazy" width=751 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb610"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb610-1"><a href="#cb610-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb610-2"><a href="#cb610-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform an intersection operation:</p>
<div class="sourceCode" id="cb611"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb611-1"><a href="#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="va">intersection</span> <span class="op">=</span> <span class="fu">OpenVDBIntersection</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb612"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb612-1"><a href="#cb612-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">intersection</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0jt3tddd6r4db.png" loading="lazy" width=215 height=255></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb613"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb613-1"><a href="#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">intersection</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb614"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb614-1"><a href="#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">205</span>, <span class="fl">205</span>, <span class="fl">205</span><span class="op">}</span>, <span class="op">{</span><span class="fl">126</span>, <span class="fl">126</span>, <span class="fl">105</span><span class="op">}</span>, <span class="op">{</span><span class="fl">105</span>, <span class="fl">105</span>, <span class="fl">105</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Intersect more than two grids:</p>
<div class="sourceCode" id="cb615"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb615-1"><a href="#cb615-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb615-2"><a href="#cb615-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb615-3"><a href="#cb615-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb616"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb616-1"><a href="#cb616-1" aria-hidden="true" tabindex="-1"></a><span class="va">intersection</span> <span class="op">=</span> <span class="fu">OpenVDBIntersection</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb617"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb617-1"><a href="#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">intersection</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0kezeme3lb6gb.png" loading="lazy" width=76 height=315></p>
<hr />
<p><code>OpenVDBIntersection</code> is idempotent:</p>
<div class="sourceCode" id="cb618"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb618-1"><a href="#cb618-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb619"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb619-1"><a href="#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="va">intersection</span> <span class="op">=</span> <span class="fu">OpenVDBIntersection</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<p>Both grids represent the same object:</p>
<div class="sourceCode" id="cb620"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb620-1"><a href="#cb620-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">intersection</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb621"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb621-1"><a href="#cb621-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">753990</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBIntersection</code> only works on level sets:</p>
<div class="sourceCode" id="cb622"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb622-1"><a href="#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb622-2"><a href="#cb622-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb623"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb623-1"><a href="#cb623-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntersection</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb624"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb624-1"><a href="#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbdifference">OpenVDBDifference<a href="#csg"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb625"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb625-1"><a href="#cb625-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDifference</span></code></pre></div>
<p><img src="img/132me6tva2mqi.png" loading="lazy" width=759 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb626"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb626-1"><a href="#cb626-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb626-2"><a href="#cb626-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a difference operation:</p>
<div class="sourceCode" id="cb627"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb627-1"><a href="#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="va">diff</span> <span class="op">=</span> <span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb628"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb628-1"><a href="#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">diff</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0fckjs5f6oeju.png" loading="lazy" width=203 height=203></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb629"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb629-1"><a href="#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">diff</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb630"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb630-1"><a href="#cb630-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">299006</span>, <span class="fl">782602</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>OpenVDBDifference[<img src="img/1rh99zaznqoj4.png" loading="lazy" width=38 height=19>,<img src="img/0fbl8ag48g2pl.png" loading="lazy" width=38 height=19>,<img src="img/0ust4d3tdpymy.png" loading="lazy" width=38 height=19>,…]
is equivalent to
OpenVDBDifference[<img src="img/1rh99zaznqoj4.png" loading="lazy" width=38 height=19>,OpenVDBUnion[<img src="img/0fbl8ag48g2pl.png" loading="lazy" width=38 height=19>,<img src="img/0ust4d3tdpymy.png" loading="lazy" width=38 height=19>,…]]:</p>
<div class="sourceCode" id="cb631"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb631-1"><a href="#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb631-2"><a href="#cb631-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb631-3"><a href="#cb631-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb632"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb632-1"><a href="#cb632-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span> <span class="op">/@</span> <span class="op">{</span></span>
<span id="cb632-2"><a href="#cb632-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">]</span>, </span>
<span id="cb632-3"><a href="#cb632-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span>, <span class="fu">OpenVDBUnion</span><span class="op">[</span><span class="va">grid2</span>, <span class="va">grid3</span><span class="op">]]</span> </span>
<span id="cb632-4"><a href="#cb632-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span></code></pre></div>
<p><img src="img/13zudw8j8k314.png" loading="lazy" width=233 height=104></p>
<hr />
<p><code>OpenVDBDifference</code> is idempotent and
<code>OpenVDBDifference[expr]</code> is equivalent to
<code>OpenVDBDifference[expr, EmptyRegion[3]]</code>:</p>
<div class="sourceCode" id="cb633"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb633-1"><a href="#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb634"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb634-1"><a href="#cb634-1" aria-hidden="true" tabindex="-1"></a><span class="va">diff</span> <span class="op">=</span> <span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<p>Both grids represent the same object:</p>
<div class="sourceCode" id="cb635"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb635-1"><a href="#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">diff</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb636"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb636-1"><a href="#cb636-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">753990</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBDifference</code> only works on level sets:</p>
<div class="sourceCode" id="cb637"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb637-1"><a href="#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb637-2"><a href="#cb637-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb638"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb638-1"><a href="#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb639"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb639-1"><a href="#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="in-place-csg">In-place CSG<a href="#csg-combination"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbunionto"
class="local-toc-link-2">OpenVDBUnionTo</a></li>
<li><a href="#openvdbintersectwith"
class="local-toc-link-2">OpenVDBIntersectWith</a></li>
<li><a href="#openvdbdifferencefrom"
class="local-toc-link-2">OpenVDBDifferenceFrom</a></li>
</ul>
</div>
<h3 id="openvdbunionto">OpenVDBUnionTo<a href="#in-place-csg"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb640"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb640-1"><a href="#cb640-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBUnionTo</span></code></pre></div>
<p><img src="img/02ecyr8dtnisj.png" loading="lazy" width=744 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb641"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb641-1"><a href="#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb641-2"><a href="#cb641-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a union operation and store in the first grid:</p>
<div class="sourceCode" id="cb642"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb642-1"><a href="#cb642-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBUnionTo</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb643"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb643-1"><a href="#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14qq9ykieqk1p.png" loading="lazy" width=253 height=226></p>
<hr />
<p>Union more than two grids:</p>
<div class="sourceCode" id="cb644"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb644-1"><a href="#cb644-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb644-2"><a href="#cb644-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb644-3"><a href="#cb644-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb645"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb645-1"><a href="#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBUnionTo</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb646"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb646-1"><a href="#cb646-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1n5xk1rnq2egu.png" loading="lazy" width=207 height=226></p>
<hr />
<p><code>OpenVDBUnionTo</code> is idempotent:</p>
<div class="sourceCode" id="cb647"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb647-1"><a href="#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb648"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb648-1"><a href="#cb648-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb649"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb649-1"><a href="#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<p>The grid remains unchanged:</p>
<div class="sourceCode" id="cb650"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb650-1"><a href="#cb650-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBUnionTo</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb651"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb651-1"><a href="#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb652"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb652-1"><a href="#cb652-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBUnionTo</code> only works on level sets:</p>
<div class="sourceCode" id="cb653"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb653-1"><a href="#cb653-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb653-2"><a href="#cb653-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb654"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb654-1"><a href="#cb654-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBUnionTo</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb655"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb655-1"><a href="#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbintersectwith">OpenVDBIntersectWith<a
href="#in-place-csg" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb656"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb656-1"><a href="#cb656-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBIntersectWith</span></code></pre></div>
<p><img src="img/0evle38kvu02z.png" loading="lazy" width=808 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb657"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb657-1"><a href="#cb657-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb657-2"><a href="#cb657-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform an intersection operation and store in the first grid:</p>
<div class="sourceCode" id="cb658"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb658-1"><a href="#cb658-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntersectWith</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb659"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb659-1"><a href="#cb659-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0jt3tddd6r4db.png" loading="lazy" width=215 height=255></p>
<hr />
<p>Intersect more than two grids:</p>
<div class="sourceCode" id="cb660"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb660-1"><a href="#cb660-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb660-2"><a href="#cb660-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb660-3"><a href="#cb660-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb661"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb661-1"><a href="#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntersectWith</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb662"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb662-1"><a href="#cb662-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0kezeme3lb6gb.png" loading="lazy" width=76 height=315></p>
<hr />
<p><code>OpenVDBIntersectWith</code> is idempotent:</p>
<div class="sourceCode" id="cb663"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb663-1"><a href="#cb663-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb664"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb664-1"><a href="#cb664-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb665"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb665-1"><a href="#cb665-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<p>The grid remains unchanged:</p>
<div class="sourceCode" id="cb666"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb666-1"><a href="#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntersectWith</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb667"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb667-1"><a href="#cb667-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb668"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb668-1"><a href="#cb668-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBIntersectWith</code> only works on level sets:</p>
<div class="sourceCode" id="cb669"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb669-1"><a href="#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb669-2"><a href="#cb669-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb670"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb670-1"><a href="#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBIntersectWith</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb671"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb671-1"><a href="#cb671-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbdifferencefrom">OpenVDBDifferenceFrom<a
href="#in-place-csg" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb672"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb672-1"><a href="#cb672-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDifference</span></code></pre></div>
<p><img src="img/132me6tva2mqi.png" loading="lazy" width=759 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb673"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb673-1"><a href="#cb673-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb673-2"><a href="#cb673-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a difference operation:</p>
<div class="sourceCode" id="cb674"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb674-1"><a href="#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="va">diff</span> <span class="op">=</span> <span class="fu">OpenVDBDifference</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb675"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb675-1"><a href="#cb675-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">diff</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0fckjs5f6oeju.png" loading="lazy" width=203 height=203></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb676"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb676-1"><a href="#cb676-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">diff</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb677"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb677-1"><a href="#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">299006</span>, <span class="fl">782602</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>OpenVDBDifferenceFrom[<img src="img/1rh99zaznqoj4.png" loading="lazy" width=38 height=19>,<img src="img/0fbl8ag48g2pl.png" loading="lazy" width=38 height=19>,<img src="img/0ust4d3tdpymy.png" loading="lazy" width=38 height=19>,…]
is equivalent to
OpenVDBDifferenceFrom[<img src="img/1rh99zaznqoj4.png" loading="lazy" width=38 height=19>,OpenVDBUnionTo[<img src="img/0fbl8ag48g2pl.png" loading="lazy" width=38 height=19>,<img src="img/0ust4d3tdpymy.png" loading="lazy" width=38 height=19>,…]]:</p>
<div class="sourceCode" id="cb678"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb678-1"><a href="#cb678-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb678-2"><a href="#cb678-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb678-3"><a href="#cb678-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb679"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb679-1"><a href="#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDifferenceFrom</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb680"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb680-1"><a href="#cb680-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0v4mxj9gn047z.png" loading="lazy" width=203 height=203></p>
<hr />
<p><code>OpenVDBDifferenceFrom</code> is idempotent and
<code>OpenVDBDifferenceFrom[expr]</code> is equivalent to
<code>OpenVDBDifferenceFrom[expr, EmptyRegion[3]]</code>:</p>
<div class="sourceCode" id="cb681"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb681-1"><a href="#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb682"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb682-1"><a href="#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb683"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb683-1"><a href="#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<p>The grid remains unchanged:</p>
<div class="sourceCode" id="cb684"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb684-1"><a href="#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDifferenceFrom</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb685"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb685-1"><a href="#cb685-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb686"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb686-1"><a href="#cb686-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBDifferenceFrom</code> only works on level sets:</p>
<div class="sourceCode" id="cb687"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb687-1"><a href="#cb687-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb687-2"><a href="#cb687-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb688"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb688-1"><a href="#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDifferenceFrom</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb689"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb689-1"><a href="#cb689-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$Failed</span></span></code></pre></div>
</blockquote>
<h2 id="clipping">Clipping<a href="#csg-combination"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbclip" class="local-toc-link-2">OpenVDBClip</a></li>
</ul>
</div>
<h3 id="openvdbclip">OpenVDBClip<a href="#clipping"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb690"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb690-1"><a href="#cb690-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBClip</span></code></pre></div>
<p><img src="img/0iifnqjaiicg0.png" loading="lazy" width=395 height=78></p>
<hr />
<p>Create a level set:</p>
<div class="sourceCode" id="cb691"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb691-1"><a href="#cb691-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.05</span><span class="op">];</span></span></code></pre></div>
<p>Clip in the first octant:</p>
<div class="sourceCode" id="cb692"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb692-1"><a href="#cb692-1" aria-hidden="true" tabindex="-1"></a><span class="va">clip</span> <span class="op">=</span> <span class="fu">OpenVDBClip</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">}}];</span></span></code></pre></div>
<div class="sourceCode" id="cb693"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb693-1"><a href="#cb693-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">clip</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0invliajtgpbj.png" loading="lazy" width=240 height=282></p>
<hr />
<p>By default <code>OpenVDBClip</code> works in world coordinates:</p>
<div class="sourceCode" id="cb694"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb694-1"><a href="#cb694-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBClip</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb695"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb695-1"><a href="#cb695-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Clip with a bounding box of width 30 and lower left corner at the
origin:</p>
<div class="sourceCode" id="cb696"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb696-1"><a href="#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.05</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb697"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb697-1"><a href="#cb697-1" aria-hidden="true" tabindex="-1"></a><span class="va">clip</span> <span class="op">=</span> <span class="fu">OpenVDBClip</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{{</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb698"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb698-1"><a href="#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">clip</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0invliajtgpbj.png" loading="lazy" width=240 height=282></p>
<h2 id="minmax-combinations">Min/Max combinations<a
href="#csg-combination" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbmin" class="local-toc-link-2">OpenVDBMin</a></li>
<li><a href="#openvdbmax" class="local-toc-link-2">OpenVDBMax</a></li>
<li><a href="#openvdbminof"
class="local-toc-link-2">OpenVDBMinOf</a></li>
<li><a href="#openvdbmaxof"
class="local-toc-link-2">OpenVDBMaxOf</a></li>
</ul>
</div>
<h3 id="openvdbmin">OpenVDBMin<a href="#minmax-combinations"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb699"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb699-1"><a href="#cb699-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMin</span></code></pre></div>
<p><img src="img/0djqhc9rmem7v.png" loading="lazy" width=747 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb700"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb700-1"><a href="#cb700-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb700-2"><a href="#cb700-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a voxel‐wise min operation:</p>
<div class="sourceCode" id="cb701"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb701-1"><a href="#cb701-1" aria-hidden="true" tabindex="-1"></a><span class="va">min</span> <span class="op">=</span> <span class="fu">OpenVDBMin</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb702"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb702-1"><a href="#cb702-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">min</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14qq9ykieqk1p.png" loading="lazy" width=253 height=226></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb703"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb703-1"><a href="#cb703-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">min</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb704"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb704-1"><a href="#cb704-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">205</span>, <span class="fl">205</span>, <span class="fl">205</span><span class="op">}</span>, <span class="op">{</span><span class="fl">126</span>, <span class="fl">126</span>, <span class="fl">105</span><span class="op">}</span>, <span class="op">{</span><span class="fl">226</span>, <span class="fl">226</span>, <span class="fl">205</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Perform voxel‐wise minimum across more than two grids:</p>
<div class="sourceCode" id="cb705"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb705-1"><a href="#cb705-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb705-2"><a href="#cb705-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb705-3"><a href="#cb705-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb706"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb706-1"><a href="#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="va">min</span> <span class="op">=</span> <span class="fu">OpenVDBMin</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb707"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb707-1"><a href="#cb707-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">min</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1n5xk1rnq2egu.png" loading="lazy" width=207 height=226></p>
<hr />
<p><code>OpenVDBMin</code> is idempotent:</p>
<div class="sourceCode" id="cb708"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb708-1"><a href="#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb709"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb709-1"><a href="#cb709-1" aria-hidden="true" tabindex="-1"></a><span class="va">min</span> <span class="op">=</span> <span class="fu">OpenVDBMin</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<p>Both grids represent the same object:</p>
<div class="sourceCode" id="cb710"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb710-1"><a href="#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">min</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb711"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb711-1"><a href="#cb711-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">753990</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBMin</code> works on any grid type other than mask:</p>
<div class="sourceCode" id="cb712"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb712-1"><a href="#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb712-2"><a href="#cb712-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid1</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb713"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb713-1"><a href="#cb713-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb713-2"><a href="#cb713-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid2</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">ArrayPad</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">5</span><span class="op">]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb714"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb714-1"><a href="#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="va">min</span> <span class="op">=</span> <span class="fu">OpenVDBMin</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb715"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb715-1"><a href="#cb715-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">min</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1mmvlk9emwzuk.png" loading="lazy" width=240 height=261></p>
<h3 id="openvdbmax">OpenVDBMax<a href="#minmax-combinations"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb716"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb716-1"><a href="#cb716-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMax</span></code></pre></div>
<p><img src="img/1m0okupppn5xz.png" loading="lazy" width=753 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb717"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb717-1"><a href="#cb717-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb717-2"><a href="#cb717-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a voxel‐wise max operation:</p>
<div class="sourceCode" id="cb718"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb718-1"><a href="#cb718-1" aria-hidden="true" tabindex="-1"></a><span class="va">max</span> <span class="op">=</span> <span class="fu">OpenVDBMax</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb719"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb719-1"><a href="#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">max</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0jt3tddd6r4db.png" loading="lazy" width=215 height=255></p>
<p>The original grids are unchanged:</p>
<div class="sourceCode" id="cb720"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb720-1"><a href="#cb720-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">grid2</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">max</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb721"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb721-1"><a href="#cb721-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">205</span>, <span class="fl">205</span>, <span class="fl">205</span><span class="op">}</span>, <span class="op">{</span><span class="fl">126</span>, <span class="fl">126</span>, <span class="fl">105</span><span class="op">}</span>, <span class="op">{</span><span class="fl">226</span>, <span class="fl">226</span>, <span class="fl">205</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Perform voxel‐wise maximum across more than two grids:</p>
<div class="sourceCode" id="cb722"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb722-1"><a href="#cb722-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb722-2"><a href="#cb722-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb722-3"><a href="#cb722-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb723"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb723-1"><a href="#cb723-1" aria-hidden="true" tabindex="-1"></a><span class="va">max</span> <span class="op">=</span> <span class="fu">OpenVDBMax</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb724"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb724-1"><a href="#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">max</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0kezeme3lb6gb.png" loading="lazy" width=76 height=315></p>
<hr />
<p><code>OpenVDBMax</code> is idempotent:</p>
<div class="sourceCode" id="cb725"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb725-1"><a href="#cb725-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb726"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb726-1"><a href="#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="va">max</span> <span class="op">=</span> <span class="fu">OpenVDBMax</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<p>Both grids represent the same object:</p>
<div class="sourceCode" id="cb727"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb727-1"><a href="#cb727-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span>, <span class="va">max</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb728"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb728-1"><a href="#cb728-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">753990</span>, <span class="fl">753990</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBMax</code> works on any grid type other than mask:</p>
<div class="sourceCode" id="cb729"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb729-1"><a href="#cb729-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb729-2"><a href="#cb729-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid1</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb730"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb730-1"><a href="#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb730-2"><a href="#cb730-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid2</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">ArrayPad</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">5</span><span class="op">]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb731"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb731-1"><a href="#cb731-1" aria-hidden="true" tabindex="-1"></a><span class="va">max</span> <span class="op">=</span> <span class="fu">OpenVDBMax</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb732"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb732-1"><a href="#cb732-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">max</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1c0smeknglui3.png" loading="lazy" width=240 height=261></p>
<h3 id="openvdbminof">OpenVDBMinOf<a href="#minmax-combinations"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb733"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb733-1"><a href="#cb733-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMinOf</span></code></pre></div>
<p><img src="img/0rdv66ujjww8g.png" loading="lazy" width=808 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb734"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb734-1"><a href="#cb734-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb734-2"><a href="#cb734-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a voxel‐wise min operation and store in the first grid:</p>
<div class="sourceCode" id="cb735"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb735-1"><a href="#cb735-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMinOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb736"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb736-1"><a href="#cb736-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/14qq9ykieqk1p.png" loading="lazy" width=253 height=226></p>
<hr />
<p>Perform voxel‐wise minimum across more than two grids:</p>
<div class="sourceCode" id="cb737"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb737-1"><a href="#cb737-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb737-2"><a href="#cb737-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb737-3"><a href="#cb737-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb738"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb738-1"><a href="#cb738-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMinOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb739"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb739-1"><a href="#cb739-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1n5xk1rnq2egu.png" loading="lazy" width=207 height=226></p>
<hr />
<p><code>OpenVDBMinOf</code> is idempotent:</p>
<div class="sourceCode" id="cb740"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb740-1"><a href="#cb740-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb741"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb741-1"><a href="#cb741-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb742"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb742-1"><a href="#cb742-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<p>The grid remains unchanged:</p>
<div class="sourceCode" id="cb743"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb743-1"><a href="#cb743-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMinOf</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb744"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb744-1"><a href="#cb744-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb745"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb745-1"><a href="#cb745-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBMinOf</code> works on any grid type other than mask:</p>
<div class="sourceCode" id="cb746"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb746-1"><a href="#cb746-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb746-2"><a href="#cb746-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid1</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb747"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb747-1"><a href="#cb747-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb747-2"><a href="#cb747-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid2</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">ArrayPad</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">5</span><span class="op">]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb748"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb748-1"><a href="#cb748-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMinOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb749"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb749-1"><a href="#cb749-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1mmvlk9emwzuk.png" loading="lazy" width=240 height=261></p>
<h3 id="openvdbmaxof">OpenVDBMaxOf<a href="#minmax-combinations"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb750"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb750-1"><a href="#cb750-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMaxOf</span></code></pre></div>
<p><img src="img/00rziiadqjew4.png" loading="lazy" width=814 height=78></p>
<hr />
<p>Create two level sets:</p>
<div class="sourceCode" id="cb751"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb751-1"><a href="#cb751-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb751-2"><a href="#cb751-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.2</span>, <span class="fl">1.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Perform a voxel‐wise max operation and store in the first grid:</p>
<div class="sourceCode" id="cb752"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb752-1"><a href="#cb752-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMaxOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb753"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb753-1"><a href="#cb753-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0jt3tddd6r4db.png" loading="lazy" width=215 height=255></p>
<hr />
<p>Perform voxel‐wise maximum across more than two grids:</p>
<div class="sourceCode" id="cb754"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb754-1"><a href="#cb754-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb754-2"><a href="#cb754-2" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cuboid</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span>
<span id="cb754-3"><a href="#cb754-3" aria-hidden="true" tabindex="-1"></a><span class="va">grid3</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">CapsuleShape</span><span class="op">[{{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1.6</span><span class="op">}}</span>, <span class="fl">0.2</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb755"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb755-1"><a href="#cb755-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMaxOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span>, <span class="va">grid3</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb756"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb756-1"><a href="#cb756-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBLevelSetRender</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0kezeme3lb6gb.png" loading="lazy" width=76 height=315></p>
<hr />
<p><code>OpenVDBMaxOf</code> is idempotent:</p>
<div class="sourceCode" id="cb757"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb757-1"><a href="#cb757-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb758"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb758-1"><a href="#cb758-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb759"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb759-1"><a href="#cb759-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<p>The grid remains unchanged:</p>
<div class="sourceCode" id="cb760"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb760-1"><a href="#cb760-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMaxOf</span><span class="op">[</span><span class="va">grid1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb761"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb761-1"><a href="#cb761-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span><span class="op">[</span><span class="st">&quot;ActiveVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb762"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb762-1"><a href="#cb762-1" aria-hidden="true" tabindex="-1"></a><span class="fl">753990</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBMaxOf</code> works on any grid type other than mask:</p>
<div class="sourceCode" id="cb763"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb763-1"><a href="#cb763-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid1</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb763-2"><a href="#cb763-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid1</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb764"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb764-1"><a href="#cb764-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid2</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb764-2"><a href="#cb764-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">grid2</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">ArrayPad</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">5</span><span class="op">]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb765"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb765-1"><a href="#cb765-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMaxOf</span><span class="op">[</span><span class="va">grid1</span>, <span class="va">grid2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb766"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb766-1"><a href="#cb766-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">grid1</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1c0smeknglui3.png" loading="lazy" width=240 height=261></p>
<h1 id="filter">Filter</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbfilter"
class="local-toc-link-2">OpenVDBFilter</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbfilter">OpenVDBFilter<a href="#filter"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb767"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb767-1"><a href="#cb767-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBFilter</span></code></pre></div>
<p><img src="img/0671f71011aej.png" loading="lazy" width=390 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb768"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb768-1"><a href="#cb768-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Apply a Laplacian filter on a level set:</p>
<div class="sourceCode" id="cb769"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb769-1"><a href="#cb769-1" aria-hidden="true" tabindex="-1"></a><span class="va">gridcopy</span> <span class="op">=</span> <span class="fu">OpenVDBCopyGrid</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb770"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb770-1"><a href="#cb770-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">gridcopy</span>, <span class="st">&quot;Laplacian&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb771"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb771-1"><a href="#cb771-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span> <span class="op">/@</span> <span class="op">{</span><span class="va">grid</span>, <span class="va">gridcopy</span><span class="op">}</span></span></code></pre></div>
<p><img src="img/1od2nn2yw3kcr.png" loading="lazy" width=389 height=101></p>
<hr />
<p>OpenVDBFilter modifies the input grid:</p>
<div class="sourceCode" id="cb772"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb772-1"><a href="#cb772-1" aria-hidden="true" tabindex="-1"></a><span class="va">gridcopy</span> <span class="op">=</span> <span class="fu">OpenVDBCopyGrid</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb773"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb773-1"><a href="#cb773-1" aria-hidden="true" tabindex="-1"></a><span class="va">gridcopy</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb774"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb774-1"><a href="#cb774-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">48</span>, <span class="fl">35</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">16</span>, <span class="fl">15</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">19</span>, <span class="fl">21</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<p>The bounding box is different after applying a filter:</p>
<div class="sourceCode" id="cb775"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb775-1"><a href="#cb775-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">gridcopy</span>, <span class="op">{</span><span class="st">&quot;Mean&quot;</span>, <span class="fl">2</span><span class="op">}];</span></span></code></pre></div>
<div class="sourceCode" id="cb776"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb776-1"><a href="#cb776-1" aria-hidden="true" tabindex="-1"></a><span class="va">gridcopy</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb777"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb777-1"><a href="#cb777-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">47</span>, <span class="fl">34</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">15</span>, <span class="fl">15</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">19</span>, <span class="fl">20</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Apply 6 iterations of a Laplacian filter on a level set:</p>
<div class="sourceCode" id="cb778"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb778-1"><a href="#cb778-1" aria-hidden="true" tabindex="-1"></a><span class="va">gridcopy</span> <span class="op">=</span> <span class="fu">OpenVDBCopyGrid</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb779"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb779-1"><a href="#cb779-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="va">gridcopy</span>, <span class="st">&quot;Laplacian&quot;</span>, <span class="fl">6</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb780"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb780-1"><a href="#cb780-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span> <span class="op">/@</span> <span class="op">{</span><span class="va">grid</span>, <span class="va">gridcopy</span><span class="op">}</span></span></code></pre></div>
<p><img src="img/130mu522hg1tk.png" loading="lazy" width=389 height=106></p>
<hr />
<p>Apply 2 iterations of different filters:</p>
<div class="sourceCode" id="cb781"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb781-1"><a href="#cb781-1" aria-hidden="true" tabindex="-1"></a><span class="va">filters</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb781-2"><a href="#cb781-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Laplacian&quot;</span>, </span>
<span id="cb781-3"><a href="#cb781-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;MeanCurvature&quot;</span>, </span>
<span id="cb781-4"><a href="#cb781-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Gaussian&quot;</span>, </span>
<span id="cb781-5"><a href="#cb781-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Mean&quot;</span>,<span class="co">(* synonomous with {&quot;Mean&quot;, 1} *)</span></span>
<span id="cb781-6"><a href="#cb781-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;Mean&quot;</span>, <span class="fl">2</span><span class="op">}</span>, </span>
<span id="cb781-7"><a href="#cb781-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;Median&quot;</span>, <span class="fl">2</span><span class="op">}</span> </span>
<span id="cb781-8"><a href="#cb781-8" aria-hidden="true" tabindex="-1"></a>   <span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb782"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb782-1"><a href="#cb782-1" aria-hidden="true" tabindex="-1"></a><span class="va">grids</span> <span class="op">=</span> <span class="fu">Table</span><span class="op">[</span></span>
<span id="cb782-2"><a href="#cb782-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">OpenVDBFilter</span><span class="op">[</span><span class="fu">OpenVDBCopyGrid</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="va">f</span>, <span class="fl">2</span><span class="op">]</span>, </span>
<span id="cb782-3"><a href="#cb782-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="va">f</span>, <span class="va">filters</span><span class="op">}</span> </span>
<span id="cb782-4"><a href="#cb782-4" aria-hidden="true" tabindex="-1"></a>   <span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb783"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb783-1"><a href="#cb783-1" aria-hidden="true" tabindex="-1"></a><span class="va">meshes</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span> <span class="op">/@</span> <span class="va">grids</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb784"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb784-1"><a href="#cb784-1" aria-hidden="true" tabindex="-1"></a><span class="va">basemesh</span> <span class="op">=</span> <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb785"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb785-1"><a href="#cb785-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Grid</span><span class="op">[{</span></span>
<span id="cb785-2"><a href="#cb785-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">Prepend</span><span class="op">[</span><span class="fu">Show</span><span class="op">[</span>#, <span class="fu">MeshRegion</span><span class="op">[</span><span class="va">basemesh</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Opacity</span><span class="op">[</span><span class="fl">0.1</span><span class="op">]]]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">meshes</span>, <span class="va">basemesh</span><span class="op">]</span>, </span>
<span id="cb785-3"><a href="#cb785-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">Text</span> <span class="op">/@</span> <span class="fu">Prepend</span><span class="op">[</span><span class="va">filters</span>, <span class="st">&quot;Base Grid&quot;</span><span class="op">]</span> </span>
<span id="cb785-4"><a href="#cb785-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">}]</span></span></code></pre></div>
<p><img src="img/01wl9wslilzlz.png" loading="lazy" width=1290 height=120></p>
<h1 id="image">Image</h1>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbimage3d"
class="local-toc-link-2">OpenVDBImage3D</a></li>
<li><a href="#openvdbdepthimage"
class="local-toc-link-2">OpenVDBDepthImage</a></li>
<li><a href="#openvdbprojectionimage"
class="local-toc-link-2">OpenVDBProjectionImage</a></li>
<li><a href="#openvdbsliceimage"
class="local-toc-link-2">OpenVDBSliceImage</a></li>
<li><a href="#openvdbdynamicsliceimage"
class="local-toc-link-2">OpenVDBDynamicSliceImage</a></li>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<h3 id="openvdbimage3d">OpenVDBImage3D<a href="#image"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb786"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb786-1"><a href="#cb786-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBImage3D</span></code></pre></div>
<p><img src="img/1nv1e0bavlupq.png" loading="lazy" width=485 height=78></p>
<p>The following examples will use these grids as base inputs:</p>
<div class="sourceCode" id="cb787"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb787-1"><a href="#cb787-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.1</span>, <span class="fl">1.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb788"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb788-1"><a href="#cb788-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve the <code>Image3D</code> representation of a fog volume:</p>
<div class="sourceCode" id="cb789"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb789-1"><a href="#cb789-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0tjcq6y8nci4c.png" loading="lazy" width=360 height=269></p>
<hr />
<p>Clip within specified bounds:</p>
<div class="sourceCode" id="cb790"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb790-1"><a href="#cb790-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb791"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb791-1"><a href="#cb791-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">45</span>, <span class="fl">32</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">12</span>, <span class="fl">12</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">16</span>, <span class="fl">17</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb792"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb792-1"><a href="#cb792-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">12</span>, <span class="fl">32</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">12</span>, <span class="fl">12</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">16</span>, <span class="fl">17</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/0tzf53ekfrcju.png" loading="lazy" width=240 height=334></p>
<hr />
<p>By default <code>OpenVDBImage3D</code> works in index
coordinates.</p>
<div class="sourceCode" id="cb793"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb793-1"><a href="#cb793-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBImage3D</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb794"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb794-1"><a href="#cb794-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Specify a bounding box in world coordinates:</p>
<div class="sourceCode" id="cb795"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb795-1"><a href="#cb795-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">1.2</span>, <span class="fl">3.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.2</span>, <span class="fl">1.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.6</span>, <span class="fl">1.7</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1ig5r7zryxw4b.png" loading="lazy" width=240 height=334></p>
<hr />
<p><code>OpenVDBImage3D</code> works on level sets, rescaling all values
to lie between 0 and 1:</p>
<div class="sourceCode" id="cb796"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb796-1"><a href="#cb796-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0h19jknmqffmx.png" loading="lazy" width=360 height=277></p>
<div class="sourceCode" id="cb797"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb797-1"><a href="#cb797-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MinMax</span><span class="op">[</span><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">grid</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb798"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb798-1"><a href="#cb798-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.996078</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBImage3D</code> works on Boolean, byte, and mask
grids.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb799"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb799-1"><a href="#cb799-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb799-2"><a href="#cb799-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb800"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb800-1"><a href="#cb800-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">bgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0k29jokhf5h27.png" loading="lazy" width=240 height=261></p>
<p>Byte grid:</p>
<div class="sourceCode" id="cb801"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb801-1"><a href="#cb801-1" aria-hidden="true" tabindex="-1"></a><span class="va">kernel</span> <span class="op">=</span> <span class="fu">GaussianFilter</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb802"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb802-1"><a href="#cb802-1" aria-hidden="true" tabindex="-1"></a><span class="va">btgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">];</span></span>
<span id="cb802-2"><a href="#cb802-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="va">kernel</span>, _?<span class="fu">Positive</span><span class="op">]</span>, <span class="fu">Round</span><span class="op">[</span><span class="fl">255</span> <span class="fu">Select</span><span class="op">[</span><span class="fu">Flatten</span><span class="op">[</span><span class="va">kernel</span><span class="op">]</span>, <span class="fu">Positive</span><span class="op">]]];</span></span></code></pre></div>
<div class="sourceCode" id="cb803"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb803-1"><a href="#cb803-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">btgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/00b3zeqa0ej68.png" loading="lazy" width=240 height=261></p>
<p>Mask grid:</p>
<div class="sourceCode" id="cb804"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb804-1"><a href="#cb804-1" aria-hidden="true" tabindex="-1"></a><span class="va">mgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb804-2"><a href="#cb804-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb805"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb805-1"><a href="#cb805-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">mgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1mu71hzk6n5tb.png" loading="lazy" width=240 height=261></p>
<hr />
<p>For large datasets, the option <code>"ScalingFactor"</code> can
reduce overall size:</p>
<div class="sourceCode" id="cb806"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb806-1"><a href="#cb806-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span> <span class="op">//</span> <span class="fu">ImageDimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb807"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb807-1"><a href="#cb807-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">78</span>, <span class="fl">25</span>, <span class="fl">34</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb808"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb808-1"><a href="#cb808-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span>, <span class="st">&quot;ScalingFactor&quot;</span> <span class="op">-&gt;</span> <span class="fl">0.5</span><span class="op">]</span> <span class="op">//</span> <span class="fu">ImageDimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb809"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb809-1"><a href="#cb809-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">39</span>, <span class="fl">13</span>, <span class="fl">17</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>The <code>"ScalingFactor" -&gt; Automatic</code> chooses a factor to
keep the total (dense) voxel count in the Image3D object under <span
class="math inline">\(1.5\times 10^9\)</span>.</p>
<p>This data is small enough to not down sample:</p>
<div class="sourceCode" id="cb810"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb810-1"><a href="#cb810-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">fog</span>, <span class="st">&quot;ScalingFactor&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]</span> <span class="op">//</span> <span class="fu">ImageDimensions</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb811"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb811-1"><a href="#cb811-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">78</span>, <span class="fl">25</span>, <span class="fl">34</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>Create a large dataset whose bounding box contains <span
class="math inline">\(8\times 10^9\)</span> voxels:</p>
<div class="sourceCode" id="cb812"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb812-1"><a href="#cb812-1" aria-hidden="true" tabindex="-1"></a><span class="va">large</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.001</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb813"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb813-1"><a href="#cb813-1" aria-hidden="true" tabindex="-1"></a><span class="va">large</span><span class="op">[</span><span class="st">&quot;BoundingGridVoxelCount&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb814"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb814-1"><a href="#cb814-1" aria-hidden="true" tabindex="-1"></a><span class="fl">8060150125</span></span></code></pre></div>
</blockquote>
<p>With <code>"ScalingFactor" -&gt; Automatic</code>, the total voxel
count is smaller:</p>
<div class="sourceCode" id="cb815"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb815-1"><a href="#cb815-1" aria-hidden="true" tabindex="-1"></a><span class="va">dims</span> <span class="op">=</span> <span class="fu">ImageDimensions</span><span class="op">[</span><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">large</span>, <span class="st">&quot;ScalingFactor&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb816"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb816-1"><a href="#cb816-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">1145</span>, <span class="fl">1145</span>, <span class="fl">1145</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb817"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb817-1"><a href="#cb817-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Times</span> <span class="op">@@</span> <span class="va">dims</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb818"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb818-1"><a href="#cb818-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1501123625</span></span></code></pre></div>
</blockquote>
<p>Clear the large dataset:</p>
<div class="sourceCode" id="cb819"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb819-1"><a href="#cb819-1" aria-hidden="true" tabindex="-1"></a><span class="va">large</span> <span class="op">=.</span></span></code></pre></div>
<h3 id="openvdbdepthimage">OpenVDBDepthImage<a href="#image"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb820"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb820-1"><a href="#cb820-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDepthImage</span></code></pre></div>
<p><img src="img/07ghg85r2peld.png" loading="lazy" width=507 height=78></p>
<p>The following examples will use these grids as base inputs:</p>
<div class="sourceCode" id="cb821"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb821-1"><a href="#cb821-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.02</span>, <span class="fl">1.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb822"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb822-1"><a href="#cb822-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve depth map of a fog volume:</p>
<div class="sourceCode" id="cb823"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb823-1"><a href="#cb823-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1kn3u9t75hluf.png" loading="lazy" width=393 height=130></p>
<hr />
<p>Clip within specified bounds:</p>
<div class="sourceCode" id="cb824"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb824-1"><a href="#cb824-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb825"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb825-1"><a href="#cb825-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">228</span>, <span class="fl">164</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">65</span>, <span class="fl">64</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">82</span>, <span class="fl">90</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb826"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb826-1"><a href="#cb826-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">60</span>, <span class="fl">160</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">60</span>, <span class="fl">60</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">80</span>, <span class="fl">85</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/0nxri72elbiiz.png" loading="lazy" width=101 height=121></p>
<hr />
<p>By default <code>OpenVDBDepthImage</code> works in index
coordinates.</p>
<div class="sourceCode" id="cb827"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb827-1"><a href="#cb827-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBDepthImage</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb828"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb828-1"><a href="#cb828-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Specify a bounding box in world coordinates:</p>
<div class="sourceCode" id="cb829"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb829-1"><a href="#cb829-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">1.2</span>, <span class="fl">3.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.2</span>, <span class="fl">1.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.6</span>, <span class="fl">1.7</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1caitltn3s9j3.png" loading="lazy" width=101 height=121></p>
<hr />
<p>Apply a gamma correction factor of 2:</p>
<div class="sourceCode" id="cb830"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb830-1"><a href="#cb830-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fu">Automatic</span>, <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/09m5lvk33tmmg.png" loading="lazy" width=393 height=130></p>
<hr />
<p>Apply a gamma correction factor of 2 and rescale the nonzero values
to lie between 0.6 and 1.0:</p>
<div class="sourceCode" id="cb831"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb831-1"><a href="#cb831-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fu">Automatic</span>, <span class="fl">2</span>, <span class="op">{</span><span class="fl">0.6</span>, <span class="fl">1</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/1b67mjjvml5mw.png" loading="lazy" width=393 height=130></p>
<hr />
<p><code>OpenVDBDepthImage</code> works on level sets, rescaling all
values to lie between 0 and 1:</p>
<div class="sourceCode" id="cb832"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb832-1"><a href="#cb832-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1kpx8zx1jdgxd.png" loading="lazy" width=396 height=132></p>
<div class="sourceCode" id="cb833"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb833-1"><a href="#cb833-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MinMax</span><span class="op">[</span><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">grid</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb834"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb834-1"><a href="#cb834-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.</span>, <span class="fl">1.</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBDepthImage</code> works on Boolean, byte, and mask
grids.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb835"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb835-1"><a href="#cb835-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb835-2"><a href="#cb835-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb836"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb836-1"><a href="#cb836-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">bgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/17fd922ta04xg.png" loading="lazy" width=240 height=240></p>
<p>Byte grid:</p>
<div class="sourceCode" id="cb837"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb837-1"><a href="#cb837-1" aria-hidden="true" tabindex="-1"></a><span class="va">kernel</span> <span class="op">=</span> <span class="fu">GaussianFilter</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb838"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb838-1"><a href="#cb838-1" aria-hidden="true" tabindex="-1"></a><span class="va">btgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">];</span></span>
<span id="cb838-2"><a href="#cb838-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="va">kernel</span>, _?<span class="fu">Positive</span><span class="op">]</span>, <span class="fu">Round</span><span class="op">[</span><span class="fl">255</span> <span class="fu">Select</span><span class="op">[</span><span class="fu">Flatten</span><span class="op">[</span><span class="va">kernel</span><span class="op">]</span>, <span class="fu">Positive</span><span class="op">]]];</span></span></code></pre></div>
<div class="sourceCode" id="cb839"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb839-1"><a href="#cb839-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">btgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0f0mdz1gwi0ih.png" loading="lazy" width=240 height=240></p>
<p>Mask grid:</p>
<div class="sourceCode" id="cb840"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb840-1"><a href="#cb840-1" aria-hidden="true" tabindex="-1"></a><span class="va">mgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb840-2"><a href="#cb840-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb841"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb841-1"><a href="#cb841-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDepthImage</span><span class="op">[</span><span class="va">mgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0u21zp0d1gzb2.png" loading="lazy" width=240 height=240></p>
<h3 id="openvdbprojectionimage">OpenVDBProjectionImage<a href="#image"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb842"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb842-1"><a href="#cb842-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBProjectionImage</span></code></pre></div>
<p><img src="img/1g2bjb0ovn18h.png" loading="lazy" width=527 height=78></p>
<p>The following examples will use these grids as base inputs:</p>
<div class="sourceCode" id="cb843"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb843-1"><a href="#cb843-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.02</span>, <span class="fl">1.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb844"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb844-1"><a href="#cb844-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve projection image of a fog volume:</p>
<div class="sourceCode" id="cb845"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb845-1"><a href="#cb845-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0pk3xfeqf56zz.png" loading="lazy" width=393 height=130></p>
<hr />
<p>Clip within specified bounds:</p>
<div class="sourceCode" id="cb846"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb846-1"><a href="#cb846-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb847"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb847-1"><a href="#cb847-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">228</span>, <span class="fl">164</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">65</span>, <span class="fl">64</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">82</span>, <span class="fl">90</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb848"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb848-1"><a href="#cb848-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">60</span>, <span class="fl">160</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">60</span>, <span class="fl">60</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">80</span>, <span class="fl">85</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/0e8h0wu6bmobk.png" loading="lazy" width=101 height=121></p>
<hr />
<p>By default <code>OpenVDBProjectionImage</code> works in index
coordinates.</p>
<div class="sourceCode" id="cb849"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb849-1"><a href="#cb849-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBProjectionImage</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb850"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb850-1"><a href="#cb850-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Specify a bounding box in world coordinates:</p>
<div class="sourceCode" id="cb851"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb851-1"><a href="#cb851-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">fog</span>, <span class="op">{{</span><span class="fl">1.2</span>, <span class="fl">3.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.2</span>, <span class="fl">1.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.6</span>, <span class="fl">1.7</span><span class="op">}}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1f8ralx6ocykw.png" loading="lazy" width=101 height=121></p>
<hr />
<p><code>OpenVDBProjectionImage</code> works on level sets, projecting
the entire band:</p>
<div class="sourceCode" id="cb852"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb852-1"><a href="#cb852-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0viqjm7q8n0lr.png" loading="lazy" width=396 height=132></p>
<hr />
<p><code>OpenVDBProjectionImage</code> works on Boolean, byte, and mask
grids.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb853"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb853-1"><a href="#cb853-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb853-2"><a href="#cb853-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb854"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb854-1"><a href="#cb854-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">bgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/05u2k3sevyc87.png" loading="lazy" width=240 height=240></p>
<p>Byte grid:</p>
<div class="sourceCode" id="cb855"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb855-1"><a href="#cb855-1" aria-hidden="true" tabindex="-1"></a><span class="va">kernel</span> <span class="op">=</span> <span class="fu">GaussianFilter</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb856"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb856-1"><a href="#cb856-1" aria-hidden="true" tabindex="-1"></a><span class="va">btgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">];</span></span>
<span id="cb856-2"><a href="#cb856-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="va">kernel</span>, _?<span class="fu">Positive</span><span class="op">]</span>, <span class="fu">Round</span><span class="op">[</span><span class="fl">255</span> <span class="fu">Select</span><span class="op">[</span><span class="fu">Flatten</span><span class="op">[</span><span class="va">kernel</span><span class="op">]</span>, <span class="fu">Positive</span><span class="op">]]];</span></span></code></pre></div>
<div class="sourceCode" id="cb857"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb857-1"><a href="#cb857-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">btgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1e54hyxz68tmf.png" loading="lazy" width=240 height=240></p>
<p>Mask grid:</p>
<div class="sourceCode" id="cb858"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb858-1"><a href="#cb858-1" aria-hidden="true" tabindex="-1"></a><span class="va">mgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb858-2"><a href="#cb858-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb859"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb859-1"><a href="#cb859-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBProjectionImage</span><span class="op">[</span><span class="va">mgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1nup9nn9wih3f.png" loading="lazy" width=240 height=240></p>
<h3 id="openvdbsliceimage">OpenVDBSliceImage<a href="#image"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb860"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb860-1"><a href="#cb860-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSliceImage</span></code></pre></div>
<p><img src="img/1swiun91aes2e.png" loading="lazy" width=490 height=78></p>
<p>The following examples will use these grids as base inputs:</p>
<div class="sourceCode" id="cb861"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb861-1"><a href="#cb861-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.02</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb862"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb862-1"><a href="#cb862-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Retrieve depth map of a fog volume:</p>
<div class="sourceCode" id="cb863"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb863-1"><a href="#cb863-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0hw8kob71jvbw.png" loading="lazy" width=393 height=130></p>
<hr />
<p>Slice at z = 0 and clip within specified xy bounds:</p>
<div class="sourceCode" id="cb864"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb864-1"><a href="#cb864-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span><span class="op">[</span><span class="st">&quot;IndexBoundingBox&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb865"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb865-1"><a href="#cb865-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">228</span>, <span class="fl">164</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">65</span>, <span class="fl">64</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">82</span>, <span class="fl">90</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb866"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb866-1"><a href="#cb866-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span>, <span class="op">{{</span><span class="fl">60</span>, <span class="fl">160</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">60</span>, <span class="fl">60</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/0u1sz8whrxweo.png" loading="lazy" width=101 height=121></p>
<hr />
<p>By default <code>OpenVDBSliceImage</code> works in index
coordinates.</p>
<div class="sourceCode" id="cb867"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb867-1"><a href="#cb867-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb868"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb868-1"><a href="#cb868-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Index&quot;</span></span></code></pre></div>
</blockquote>
<p>Specify a bounding box in world coordinates:</p>
<div class="sourceCode" id="cb869"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb869-1"><a href="#cb869-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0.0</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span>, <span class="op">{{</span><span class="fl">1.2</span>, <span class="fl">3.2</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">1.2</span>, <span class="fl">1.2</span><span class="op">}}]</span></span></code></pre></div>
<p><img src="img/1w1ihatkensg6.png" loading="lazy" width=101 height=121></p>
<hr />
<p><code>OpenVDBSliceImage</code> works on level sets, rescaling all
values to lie between 0 and 1:</p>
<div class="sourceCode" id="cb870"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb870-1"><a href="#cb870-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/123qscb3xl7na.png" loading="lazy" width=398 height=134></p>
<div class="sourceCode" id="cb871"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb871-1"><a href="#cb871-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MinMax</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb872"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb872-1"><a href="#cb872-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.</span>, <span class="fl">0.996078</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBSliceImage</code> works on Boolean, byte, and mask
grids.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb873"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb873-1"><a href="#cb873-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb873-2"><a href="#cb873-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb874"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb874-1"><a href="#cb874-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/022gbjen4mlub.png" loading="lazy" width=240 height=240></p>
<p>Byte grid:</p>
<div class="sourceCode" id="cb875"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb875-1"><a href="#cb875-1" aria-hidden="true" tabindex="-1"></a><span class="va">kernel</span> <span class="op">=</span> <span class="fu">GaussianFilter</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb876"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb876-1"><a href="#cb876-1" aria-hidden="true" tabindex="-1"></a><span class="va">btgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">];</span></span>
<span id="cb876-2"><a href="#cb876-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="va">kernel</span>, _?<span class="fu">Positive</span><span class="op">]</span>, <span class="fu">Round</span><span class="op">[</span><span class="fl">255</span> <span class="fu">Select</span><span class="op">[</span><span class="fu">Flatten</span><span class="op">[</span><span class="va">kernel</span><span class="op">]</span>, <span class="fu">Positive</span><span class="op">]]];</span></span></code></pre></div>
<div class="sourceCode" id="cb877"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb877-1"><a href="#cb877-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1vrpdaxgpa5cc.png" loading="lazy" width=240 height=240></p>
<p>Mask grid:</p>
<div class="sourceCode" id="cb878"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb878-1"><a href="#cb878-1" aria-hidden="true" tabindex="-1"></a><span class="va">mgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb878-2"><a href="#cb878-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb879"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb879-1"><a href="#cb879-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0s9jx1p0vslb9.png" loading="lazy" width=240 height=240></p>
<h3 id="openvdbdynamicsliceimage">OpenVDBDynamicSliceImage<a
href="#image" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb880"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb880-1"><a href="#cb880-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDynamicSliceImage</span></code></pre></div>
<p><img src="img/1bajaz2iay664.png" loading="lazy" width=456 height=78></p>
<p><strong><em>The following examples are static images of an
interactive output. Reevaluate them to interact.</em></strong></p>
<p>The following examples will use these grids as base inputs:</p>
<div class="sourceCode" id="cb881"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb881-1"><a href="#cb881-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.02</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb882"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb882-1"><a href="#cb882-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Dynamically slice through a fog volume:</p>
<div class="sourceCode" id="cb883"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb883-1"><a href="#cb883-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1lebvq8y7z3m1.png" loading="lazy" width=384 height=229></p>
<hr />
<p>Dragging the mouse in the image selects a region to zoom into:</p>
<div class="sourceCode" id="cb884"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb884-1"><a href="#cb884-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1qgfwrgo6p5p8.png" loading="lazy" width=384 height=226></p>
<p>The zoomed in region upon mouse release:</p>
<div class="sourceCode" id="cb885"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb885-1"><a href="#cb885-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/13pi1e7iimg2q.png" loading="lazy" width=384 height=370></p>
<p>Clicking anywhere in the image will zoom back out:</p>
<div class="sourceCode" id="cb886"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb886-1"><a href="#cb886-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1g4zi45clypxq.png" loading="lazy" width=384 height=229></p>
<hr />
<p>Clicking in the margins allows for resizing:</p>
<div class="sourceCode" id="cb887"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb887-1"><a href="#cb887-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">fog</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/10hxp88rqrktf.png" loading="lazy" width=384 height=226></p>
<hr />
<p>Dynamically slice through a level set, where all values are rescaled
to lie between 0 and 1:</p>
<div class="sourceCode" id="cb888"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb888-1"><a href="#cb888-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1w61tadlepafo.png" loading="lazy" width=384 height=230></p>
<hr />
<p><code>OpenVDBDynamicSliceImage</code> works on Boolean, byte, and
mask grids.</p>
<p>Boolean grid:</p>
<div class="sourceCode" id="cb889"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb889-1"><a href="#cb889-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb889-2"><a href="#cb889-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb890"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb890-1"><a href="#cb890-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">bgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0rp1lnfqitfl4.png" loading="lazy" width=384 height=433></p>
<p>Byte grid:</p>
<div class="sourceCode" id="cb891"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb891-1"><a href="#cb891-1" aria-hidden="true" tabindex="-1"></a><span class="va">kernel</span> <span class="op">=</span> <span class="fu">GaussianFilter</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb892"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb892-1"><a href="#cb892-1" aria-hidden="true" tabindex="-1"></a><span class="va">btgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Byte&quot;</span><span class="op">];</span></span>
<span id="cb892-2"><a href="#cb892-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">btgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="va">kernel</span>, _?<span class="fu">Positive</span><span class="op">]</span>, <span class="fu">Round</span><span class="op">[</span><span class="fl">255</span> <span class="fu">Select</span><span class="op">[</span><span class="fu">Flatten</span><span class="op">[</span><span class="va">kernel</span><span class="op">]</span>, <span class="fu">Positive</span><span class="op">]]];</span></span></code></pre></div>
<div class="sourceCode" id="cb893"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb893-1"><a href="#cb893-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">btgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/037xjme3v1oaw.png" loading="lazy" width=384 height=433></p>
<p>Mask grid:</p>
<div class="sourceCode" id="cb894"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb894-1"><a href="#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="va">mgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Mask&quot;</span><span class="op">];</span></span>
<span id="cb894-2"><a href="#cb894-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetStates</span><span class="op">[</span><span class="va">mgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb895"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb895-1"><a href="#cb895-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDynamicSliceImage</span><span class="op">[</span><span class="va">mgrid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0bcsfrtycwu3b.png" loading="lazy" width=384 height=433></p>
<h1 id="measure">Measure</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#spatial-measure" class="local-toc-link-1">Spatial
measure</a></li>
<li><a href="#intrinsic-measure" class="local-toc-link-1">Intrinsic
measure</a></li>
</ul>
</div>
<h2 id="spatial-measure">Spatial measure<a href="#measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbdistance"
class="local-toc-link-2">OpenVDBDistance</a></li>
<li><a href="#openvdbsigneddistance"
class="local-toc-link-2">OpenVDBSignedDistance</a></li>
<li><a href="#openvdbnearest"
class="local-toc-link-2">OpenVDBNearest</a></li>
<li><a href="#openvdbmember"
class="local-toc-link-2">OpenVDBMember</a></li>
<li><a href="#openvdbfillwithballs"
class="local-toc-link-2">OpenVDBFillWithBalls</a></li>
</ul>
</div>
<h3 id="openvdbdistance">OpenVDBDistance<a href="#spatial-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb896"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb896-1"><a href="#cb896-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDistance</span></code></pre></div>
<p><img src="img/0n3arb2a0mhe0.png" loading="lazy" width=553 height=78></p>
<hr />
<p>Find the distance from a point to the boundary of the unit ball in
world coordinates:</p>
<div class="sourceCode" id="cb897"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb897-1"><a href="#cb897-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb898"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb898-1"><a href="#cb898-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb899"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb899-1"><a href="#cb899-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.00006</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBDistance</code> threads over multiple points:</p>
<div class="sourceCode" id="cb900"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb900-1"><a href="#cb900-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2.5</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0.4</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb901"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb901-1"><a href="#cb901-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">2.00006</span>, <span class="fl">1.50007</span>, <span class="fl">0.688222</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>The distance is unsigned and so the center of the ball has positive
distance to the boundary:</p>
<div class="sourceCode" id="cb902"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb902-1"><a href="#cb902-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb903"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb903-1"><a href="#cb903-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.999963</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBDistance</code> assumes points are in world
coordinates:</p>
<div class="sourceCode" id="cb904"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb904-1"><a href="#cb904-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBDistance</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb905"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb905-1"><a href="#cb905-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in a point as an index coordinate. The distance is still
returned in world space:</p>
<div class="sourceCode" id="cb906"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb906-1"><a href="#cb906-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Here, the index coordinate <code>{300, 0, 0}</code> is the same as
the world coordinate <code>{3.0, 0.0, 0.0}</code>:</p>
<div class="sourceCode" id="cb907"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb907-1"><a href="#cb907-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">300</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb908"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb908-1"><a href="#cb908-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.00006</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbsigneddistance">OpenVDBSignedDistance<a
href="#spatial-measure" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb909"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb909-1"><a href="#cb909-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBSignedDistance</span></code></pre></div>
<p><img src="img/1u5zmnzwz49ed.png" loading="lazy" width=995 height=78></p>
<hr />
<p>Find the signed distance from a point to the boundary of the unit
ball in world coordinates:</p>
<div class="sourceCode" id="cb910"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb910-1"><a href="#cb910-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb911"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb911-1"><a href="#cb911-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb912"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb912-1"><a href="#cb912-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.00006</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBSignedDistance</code> threads over multiple points:</p>
<div class="sourceCode" id="cb913"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb913-1"><a href="#cb913-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2.5</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0.4</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb914"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb914-1"><a href="#cb914-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">2.00006</span>, <span class="fl">1.50007</span>, <span class="fl">0.688222</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p>The distance is signed and so the center of the ball has negative
distance to the boundary:</p>
<div class="sourceCode" id="cb915"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb915-1"><a href="#cb915-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb916"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb916-1"><a href="#cb916-1" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="fl">0.999963</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBSignedDistance</code> assumes points are in
world coordinates:</p>
<div class="sourceCode" id="cb917"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb917-1"><a href="#cb917-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBSignedDistance</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb918"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb918-1"><a href="#cb918-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in a point as an index coordinate. The distance is still
returned in world space:</p>
<div class="sourceCode" id="cb919"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb919-1"><a href="#cb919-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Here, the index coordinate <code>{300, 0, 0}</code> is the same as
the world coordinate <code>{3.0, 0.0, 0.0}</code>:</p>
<div class="sourceCode" id="cb920"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb920-1"><a href="#cb920-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSignedDistance</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">300</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb921"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb921-1"><a href="#cb921-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.00006</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbnearest">OpenVDBNearest<a href="#spatial-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb922"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb922-1"><a href="#cb922-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBNearest</span></code></pre></div>
<p><img src="img/1tfht911uaus8.png" loading="lazy" width=507 height=78></p>
<hr />
<p>Find the closest point on the boundary of the unit ball closest to a
point in world coordinates:</p>
<div class="sourceCode" id="cb923"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb923-1"><a href="#cb923-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb924"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb924-1"><a href="#cb924-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBNearest</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb925"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb925-1"><a href="#cb925-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.99995</span>, <span class="op">-</span><span class="fl">0.005</span>, <span class="op">-</span><span class="fl">0.005</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBNearest</code> threads over multiple points:</p>
<div class="sourceCode" id="cb926"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb926-1"><a href="#cb926-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBNearest</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">2.5</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0.4</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb927"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb927-1"><a href="#cb927-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">0.99995</span>, <span class="op">-</span><span class="fl">0.005</span>, <span class="op">-</span><span class="fl">0.005</span><span class="op">}</span>, <span class="op">{-</span><span class="fl">0.005</span>, <span class="fl">0.99995</span>, <span class="op">-</span><span class="fl">0.005</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.771213</span>, <span class="op">-</span><span class="fl">0.591578</span>, <span class="fl">0.235</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBNearest</code> assumes points are in world
coordinates:</p>
<div class="sourceCode" id="cb928"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb928-1"><a href="#cb928-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBNearest</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb929"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb929-1"><a href="#cb929-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in a point as an index coordinate. The nearest point is still
returned in world space:</p>
<div class="sourceCode" id="cb930"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb930-1"><a href="#cb930-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Here, the index coordinate <code>{300, 0, 0}</code> is the same as
the world coordinate <code>{3.0, 0.0, 0.0}</code>:</p>
<div class="sourceCode" id="cb931"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb931-1"><a href="#cb931-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBNearest</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">300</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb932"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb932-1"><a href="#cb932-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.99995</span>, <span class="op">-</span><span class="fl">0.005</span>, <span class="op">-</span><span class="fl">0.005</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbmember">OpenVDBMember<a href="#spatial-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb933"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb933-1"><a href="#cb933-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMember</span></code></pre></div>
<p><img src="img/0zzg32nx0gwhu.png" loading="lazy" width=572 height=78></p>
<hr />
<p>Determine if a point lies in the unit ball or not:</p>
<div class="sourceCode" id="cb934"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb934-1"><a href="#cb934-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p><code>OpenVDBMember</code> returns 1 if the point is inside the
region and 0 otherwise:</p>
<div class="sourceCode" id="cb935"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb935-1"><a href="#cb935-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMember</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb936"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb936-1"><a href="#cb936-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBmember</code> threads over multiple points:</p>
<div class="sourceCode" id="cb937"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb937-1"><a href="#cb937-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMember</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{{</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1.3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0.4</span><span class="op">}}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb938"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb938-1"><a href="#cb938-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBMember</code> assumes points are in world
coordinates:</p>
<div class="sourceCode" id="cb939"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb939-1"><a href="#cb939-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBMember</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb940"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb940-1"><a href="#cb940-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in a point as an index coordinate:</p>
<div class="sourceCode" id="cb941"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb941-1"><a href="#cb941-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<p>Here, the index coordinate <code>{300, 0, 0}</code> is the same as
the world coordinate <code>{3.0, 0.0, 0.0}</code>:</p>
<div class="sourceCode" id="cb942"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb942-1"><a href="#cb942-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMember</span><span class="op">[</span><span class="va">ball</span>, <span class="op">{</span><span class="fl">300</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb943"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb943-1"><a href="#cb943-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbfillwithballs">OpenVDBFillWithBalls<a
href="#spatial-measure" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb944"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb944-1"><a href="#cb944-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBFillWithBalls</span></code></pre></div>
<p><img src="img/09kh74meltl7k.png" loading="lazy" width=797 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb945"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb945-1"><a href="#cb945-1" aria-hidden="true" tabindex="-1"></a><span class="va">mesh</span> <span class="op">=</span> <span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb946"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb946-1"><a href="#cb946-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="va">mesh</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Fill the grid with balls:</p>
<div class="sourceCode" id="cb947"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb947-1"><a href="#cb947-1" aria-hidden="true" tabindex="-1"></a><span class="va">balls</span> <span class="op">=</span> <span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">20</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb948"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb948-1"><a href="#cb948-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span><span class="op">}</span>, <span class="fl">0.83733</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span><span class="op">}</span>, <span class="fl">0.796918</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">2.01556</span>, <span class="op">-</span><span class="fl">0.00181097</span>, <span class="fl">0.561839</span><span class="op">}</span>, <span class="fl">0.470206</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.0293926</span>, <span class="op">-</span><span class="fl">0.0384966</span>, <span class="fl">1.17062</span><span class="op">}</span>, <span class="fl">0.340039</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.0773139</span>, <span class="fl">0.486744</span>, <span class="fl">0.805491</span><span class="op">}</span>, <span class="fl">0.278327</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">2.13005</span>, <span class="fl">0.0168609</span>, <span class="fl">0.456068</span><span class="op">}</span>, <span class="fl">0.277243</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.55613</span>, <span class="fl">0.602449</span>, <span class="op">-</span><span class="fl">0.261292</span><span class="op">}</span>, <span class="fl">0.27172</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.0145876</span>, <span class="op">-</span><span class="fl">0.535948</span>, <span class="fl">0.771326</span><span class="op">}</span>, <span class="fl">0.264356</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.50713</span>, <span class="op">-</span><span class="fl">0.68613</span>, <span class="op">-</span><span class="fl">0.359144</span><span class="op">}</span>, <span class="fl">0.261304</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.454163</span>, <span class="fl">0.57152</span>, <span class="op">-</span><span class="fl">0.569954</span><span class="op">}</span>, <span class="fl">0.246802</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">1.70943</span>, <span class="op">-</span><span class="fl">0.379784</span>, <span class="fl">1.10312</span><span class="op">}</span>, <span class="fl">0.241353</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.550185</span>, <span class="op">-</span><span class="fl">0.541509</span>, <span class="op">-</span><span class="fl">0.538848</span><span class="op">}</span>, <span class="fl">0.2345</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.196868</span>, <span class="fl">0.0812204</span>, <span class="op">-</span><span class="fl">0.213856</span><span class="op">}</span>, <span class="fl">0.230036</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.65143</span>, <span class="fl">0.82725</span>, <span class="op">-</span><span class="fl">0.852141</span><span class="op">}</span>, <span class="fl">0.223974</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">2.7123</span>, <span class="op">-</span><span class="fl">0.0343122</span>, <span class="fl">0.0474559</span><span class="op">}</span>, <span class="fl">0.22267</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.723783</span>, <span class="op">-</span><span class="fl">0.00531771</span>, <span class="fl">1.49002</span><span class="op">}</span>, <span class="fl">0.222041</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">1.67713</span>, <span class="fl">0.447553</span>, <span class="fl">1.02029</span><span class="op">}</span>, <span class="fl">0.215089</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.68856</span>, <span class="op">-</span><span class="fl">0.819582</span>, <span class="op">-</span><span class="fl">0.826577</span><span class="op">}</span>, <span class="fl">0.212723</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.0946777</span>, <span class="fl">0.531053</span>, <span class="fl">0.315056</span><span class="op">}</span>, <span class="fl">0.208753</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.0712329</span>, <span class="op">-</span><span class="fl">0.459107</span>, <span class="fl">0.090024</span><span class="op">}</span>, <span class="fl">0.200934</span><span class="op">]}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb949"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb949-1"><a href="#cb949-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Show</span><span class="op">[</span></span>
<span id="cb949-2"><a href="#cb949-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="va">mesh</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Opacity</span><span class="op">[</span><span class="fl">0.3</span><span class="op">]]</span>, </span>
<span id="cb949-3"><a href="#cb949-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Graphics3D</span><span class="op">[{</span><span class="fu">Red</span>, <span class="fu">Opacity</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">balls</span><span class="op">}]</span> </span>
<span id="cb949-4"><a href="#cb949-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/1drl8ac5oimn1.png" loading="lazy" width=360 height=189></p>
<hr />
<p>Restrict the radii to lie between 0.2 and 0.4 in world
coordinates:</p>
<div class="sourceCode" id="cb950"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb950-1"><a href="#cb950-1" aria-hidden="true" tabindex="-1"></a><span class="va">balls</span> <span class="op">=</span> <span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">20</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.4</span><span class="op">}]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb951"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb951-1"><a href="#cb951-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.0835382</span>, <span class="op">-</span><span class="fl">0.0153026</span>, <span class="fl">0.853562</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">1.59609</span>, <span class="op">-</span><span class="fl">0.00745467</span>, <span class="fl">0.714091</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.273902</span>, <span class="fl">0.0262284</span>, <span class="fl">0.022122</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.85805</span>, <span class="op">-</span><span class="fl">0.00571709</span>, <span class="fl">0.521056</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.47445</span>, <span class="op">-</span><span class="fl">0.455557</span>, <span class="op">-</span><span class="fl">0.0221767</span><span class="op">}</span>, <span class="fl">0.381804</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.868758</span>, <span class="op">-</span><span class="fl">0.04433</span>, <span class="fl">1.2384</span><span class="op">}</span>, <span class="fl">0.381278</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.38017</span>, <span class="fl">0.423527</span>, <span class="op">-</span><span class="fl">0.0264647</span><span class="op">}</span>, <span class="fl">0.366138</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.626848</span>, <span class="op">-</span><span class="fl">0.46181</span>, <span class="op">-</span><span class="fl">0.314694</span><span class="op">}</span>, <span class="fl">0.356633</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">2.30442</span>, <span class="fl">0.0357996</span>, <span class="fl">0.376507</span><span class="op">}</span>, <span class="fl">0.355544</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.54862</span>, <span class="fl">0.44484</span>, <span class="op">-</span><span class="fl">0.256626</span><span class="op">}</span>, <span class="fl">0.334349</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.625238</span>, <span class="fl">0.0720034</span>, <span class="fl">1.0285</span><span class="op">}</span>, <span class="fl">0.332226</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.465397</span>, <span class="fl">0.509542</span>, <span class="fl">0.537133</span><span class="op">}</span>, <span class="fl">0.312104</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.152381</span>, <span class="op">-</span><span class="fl">0.472868</span>, <span class="fl">0.305261</span><span class="op">}</span>, <span class="fl">0.311758</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">0.472325</span>, <span class="op">-</span><span class="fl">0.499457</span>, <span class="fl">0.524151</span><span class="op">}</span>, <span class="fl">0.302903</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.215345</span>, <span class="fl">0.445606</span>, <span class="fl">0.3286</span><span class="op">}</span>, <span class="fl">0.300017</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.3</span>, <span class="fl">0.369991</span>, <span class="fl">0.929636</span><span class="op">}</span>, <span class="fl">0.273247</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.42933</span>, <span class="op">-</span><span class="fl">0.462188</span>, <span class="fl">0.763712</span><span class="op">}</span>, <span class="fl">0.271606</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">1.38767</span>, <span class="fl">0.145444</span>, <span class="fl">0.0995472</span><span class="op">}</span>, <span class="fl">0.261759</span><span class="op">]}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb952"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb952-1"><a href="#cb952-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Show</span><span class="op">[</span></span>
<span id="cb952-2"><a href="#cb952-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="va">mesh</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Opacity</span><span class="op">[</span><span class="fl">0.3</span><span class="op">]]</span>, </span>
<span id="cb952-3"><a href="#cb952-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Graphics3D</span><span class="op">[{</span><span class="fu">Red</span>, <span class="fu">Opacity</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">balls</span><span class="op">}]</span> </span>
<span id="cb952-4"><a href="#cb952-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/0bo6q9blwxogd.png" loading="lazy" width=360 height=189></p>
<hr />
<p>By default <code>OpenVDBFillWithBalls</code> assumes the input radii
are in world coordinates:</p>
<div class="sourceCode" id="cb953"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb953-1"><a href="#cb953-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBFillWithBalls</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb954"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb954-1"><a href="#cb954-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Pass in radii in index space. The balls are still returned in world
space:</p>
<div class="sourceCode" id="cb955"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb955-1"><a href="#cb955-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span>, <span class="op">{</span><span class="fl">20</span>, <span class="fl">40</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb956"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb956-1"><a href="#cb956-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb957"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb957-1"><a href="#cb957-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">0.4</span><span class="op">}</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb958"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb958-1"><a href="#cb958-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span><span class="op">}</span>, <span class="fl">0.4</span><span class="op">]}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBFillWithBalls</code> has the following options:</p>
<div class="sourceCode" id="cb959"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb959-1"><a href="#cb959-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Options</span><span class="op">[</span><span class="fu">OpenVDBFillWithBalls</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb960"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb960-1"><a href="#cb960-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;IsoValue&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="st">&quot;Overlapping&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span>, <span class="st">&quot;ReturnType&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="st">&quot;SeedCount&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Allow the balls to overlap:</p>
<div class="sourceCode" id="cb961"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb961-1"><a href="#cb961-1" aria-hidden="true" tabindex="-1"></a><span class="va">balls</span> <span class="op">=</span> <span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">20</span>, <span class="st">&quot;Overlapping&quot;</span> <span class="op">-&gt;</span> <span class="fu">True</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb962"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb962-1"><a href="#cb962-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="va">balls</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0khqhz5o9wwoi.png" loading="lazy" width=360 height=282></p>
<hr />
<p>Increase the seed count to place balls more optimally:</p>
<div class="sourceCode" id="cb963"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb963-1"><a href="#cb963-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">100</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/09a5v5gu3zhkh.png" loading="lazy" width=360 height=281></p>
<div class="sourceCode" id="cb964"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb964-1"><a href="#cb964-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Graphics3D</span><span class="op">[</span><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">100</span>, <span class="st">&quot;SeedCount&quot;</span> <span class="op">-&gt;</span> <span class="fl">1000000</span><span class="op">]]</span></span></code></pre></div>
<p><img src="img/19k4ovbtf1522.png" loading="lazy" width=360 height=284></p>
<hr />
<p>Represent the balls as a packed array:</p>
<div class="sourceCode" id="cb965"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb965-1"><a href="#cb965-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb966"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb966-1"><a href="#cb966-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;IsoValue&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="st">&quot;Overlapping&quot;</span> <span class="op">-&gt;</span> <span class="fu">False</span>, <span class="st">&quot;ReturnType&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span>, <span class="st">&quot;SeedCount&quot;</span> <span class="op">-&gt;</span> <span class="fu">Automatic</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb967"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb967-1"><a href="#cb967-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb968"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb968-1"><a href="#cb968-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fu">Ball</span><span class="op">[{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span><span class="op">}</span>, <span class="fl">0.83733</span><span class="op">]</span>, <span class="fu">Ball</span><span class="op">[{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span><span class="op">}</span>, <span class="fl">0.796918</span><span class="op">]}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb969"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb969-1"><a href="#cb969-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBFillWithBalls</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span>, <span class="st">&quot;ReturnType&quot;</span> <span class="op">-&gt;</span> <span class="st">&quot;PackedArray&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb970"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb970-1"><a href="#cb970-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{-</span><span class="fl">1.00919</span>, <span class="op">-</span><span class="fl">0.0268353</span>, <span class="fl">0.470044</span>, <span class="fl">0.83733</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.773351</span>, <span class="fl">0.0232177</span>, <span class="fl">0.313072</span>, <span class="fl">0.796918</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<h2 id="intrinsic-measure">Intrinsic measure<a href="#measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbarea" class="local-toc-link-2">OpenVDBArea</a></li>
<li><a href="#openvdbvolume"
class="local-toc-link-2">OpenVDBVolume</a></li>
<li><a href="#openvdbeulercharacteristic"
class="local-toc-link-2">OpenVDBEulerCharacteristic</a></li>
<li><a href="#openvdbgenus"
class="local-toc-link-2">OpenVDBGenus</a></li>
</ul>
</div>
<h3 id="openvdbarea">OpenVDBArea<a href="#intrinsic-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb971"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb971-1"><a href="#cb971-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBArea</span></code></pre></div>
<p><img src="img/177p4mmohenhl.png" loading="lazy" width=408 height=78></p>
<hr />
<p>Find the area of the unit ball:</p>
<div class="sourceCode" id="cb972"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb972-1"><a href="#cb972-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb973"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb973-1"><a href="#cb973-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBArea</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb974"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb974-1"><a href="#cb974-1" aria-hidden="true" tabindex="-1"></a><span class="fl">12.5665</span></span></code></pre></div>
</blockquote>
<p>Compare to the exact value:</p>
<div class="sourceCode" id="cb975"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb975-1"><a href="#cb975-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SurfaceArea</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span> <span class="op">//</span> <span class="fu">N</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb976"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb976-1"><a href="#cb976-1" aria-hidden="true" tabindex="-1"></a><span class="fl">12.5664</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBArea</code> returns a value in world
coordinates:</p>
<div class="sourceCode" id="cb977"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb977-1"><a href="#cb977-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBArea</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb978"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb978-1"><a href="#cb978-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Return an area in index coordinates:</p>
<div class="sourceCode" id="cb979"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb979-1"><a href="#cb979-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb980"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb980-1"><a href="#cb980-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBArea</span><span class="op">[</span><span class="va">ball</span>, <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb981"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb981-1"><a href="#cb981-1" aria-hidden="true" tabindex="-1"></a><span class="fl">125665</span></span></code></pre></div>
</blockquote>
<p>Since this grid has voxel size 0.01, the above value is roughly the
world area divided by <span class="math inline">\(0.01^2\)</span>:</p>
<div class="sourceCode" id="cb982"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb982-1"><a href="#cb982-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBArea</span><span class="op">[</span><span class="va">ball</span><span class="op">]/</span><span class="fl">0.01</span><span class="op">^</span><span class="fl">2</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb983"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb983-1"><a href="#cb983-1" aria-hidden="true" tabindex="-1"></a><span class="fl">125665.</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbvolume">OpenVDBVolume<a href="#intrinsic-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb984"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb984-1"><a href="#cb984-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBVolume</span></code></pre></div>
<p><img src="img/0hmxxkmmbq9uv.png" loading="lazy" width=396 height=78></p>
<hr />
<p>Find the volume of the unit ball:</p>
<div class="sourceCode" id="cb985"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb985-1"><a href="#cb985-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb986"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb986-1"><a href="#cb986-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb987"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb987-1"><a href="#cb987-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4.18908</span></span></code></pre></div>
</blockquote>
<p>Compare to the exact value:</p>
<div class="sourceCode" id="cb988"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb988-1"><a href="#cb988-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Volume</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]]</span> <span class="op">//</span> <span class="fu">N</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb989"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb989-1"><a href="#cb989-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4.18879</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBVolume</code> returns a value in world
coordinates:</p>
<div class="sourceCode" id="cb990"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb990-1"><a href="#cb990-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBVolume</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb991"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb991-1"><a href="#cb991-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Return an area in index coordinates:</p>
<div class="sourceCode" id="cb992"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb992-1"><a href="#cb992-1" aria-hidden="true" tabindex="-1"></a><span class="va">ball</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb993"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb993-1"><a href="#cb993-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBVolume</span><span class="op">[</span><span class="va">ball</span>, <span class="st">&quot;Index&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb994"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb994-1"><a href="#cb994-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4189075</span></span></code></pre></div>
</blockquote>
<p>Since this grid has voxel size 0.01, the above value is roughly the
world area divided by <span class="math inline">\(0.01^3\)</span>:</p>
<div class="sourceCode" id="cb995"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb995-1"><a href="#cb995-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBVolume</span><span class="op">[</span><span class="va">ball</span><span class="op">]/</span><span class="fl">0.01</span><span class="op">^</span><span class="fl">3</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb996"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb996-1"><a href="#cb996-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4.18908</span><span class="op">*</span><span class="fl">10</span><span class="op">^</span><span class="fl">6</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbeulercharacteristic">OpenVDBEulerCharacteristic<a
href="#intrinsic-measure" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb997"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb997-1"><a href="#cb997-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBEulerCharacteristic</span></code></pre></div>
<p><img src="img/1k2o3utgjkj0k.png" loading="lazy" width=529 height=78></p>
<hr />
<p>Find the Euler characteristic of a torus:</p>
<div class="sourceCode" id="cb998"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb998-1"><a href="#cb998-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Torus</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb999"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb999-1"><a href="#cb999-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBEulerCharacteristic</span><span class="op">[</span><span class="fu">Torus</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1000"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1000-1"><a href="#cb1000-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<p>Compare to a mesh representation:</p>
<div class="sourceCode" id="cb1001"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1001-1"><a href="#cb1001-1" aria-hidden="true" tabindex="-1"></a><span class="fu">EulerCharacteristic</span><span class="op">[</span><span class="fu">BoundaryDiscretizeGraphics</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1002"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1002-1"><a href="#cb1002-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<h3 id="openvdbgenus">OpenVDBGenus<a href="#intrinsic-measure"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1003"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1003-1"><a href="#cb1003-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBGenus</span></code></pre></div>
<p><img src="img/0pthlg2kr3qqy.png" loading="lazy" width=382 height=78></p>
<hr />
<p>Find the genus of a torus:</p>
<div class="sourceCode" id="cb1004"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1004-1"><a href="#cb1004-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Torus</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1005"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1005-1"><a href="#cb1005-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGenus</span><span class="op">[</span><span class="fu">Torus</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1006"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1006-1"><a href="#cb1006-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<p>Compare to a mesh representation:</p>
<div class="sourceCode" id="cb1007"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1007-1"><a href="#cb1007-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PolyhedronGenus</span><span class="op">[</span><span class="fu">BoundaryDiscretizeGraphics</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1008"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1008-1"><a href="#cb1008-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code></pre></div>
</blockquote>
<h1 id="morphology">Morphology</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#bandwidth" class="local-toc-link-1">Bandwidth</a></li>
<li><a href="#morphology-1" class="local-toc-link-1">Morphology</a></li>
</ul>
</div>
<h2 id="bandwidth">Bandwidth<a href="#morphology"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbresizebandwidth"
class="local-toc-link-2">OpenVDBResizeBandwidth</a></li>
</ul>
</div>
<h3 id="openvdbresizebandwidth">OpenVDBResizeBandwidth<a
href="#bandwidth" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1009"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1009-1"><a href="#cb1009-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBResizeBandwidth</span></code></pre></div>
<p><img src="img/1a99yp5lpihai.png" loading="lazy" width=533 height=78></p>
<hr />
<p>Create a level set with half width 3.0:</p>
<div class="sourceCode" id="cb1010"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1010-1"><a href="#cb1010-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1011"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1011-1"><a href="#cb1011-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1012"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1012-1"><a href="#cb1012-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3.</span></span></code></pre></div>
</blockquote>
<p>Resize the width to 2.0:</p>
<div class="sourceCode" id="cb1013"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1013-1"><a href="#cb1013-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBResizeBandwidth</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1014"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1014-1"><a href="#cb1014-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1015"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1015-1"><a href="#cb1015-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBResizeBandwidth</code> works in index
coordinates:</p>
<div class="sourceCode" id="cb1016"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1016-1"><a href="#cb1016-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1017"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1017-1"><a href="#cb1017-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBResizeBandwidth</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1018"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1018-1"><a href="#cb1018-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1019"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1019-1"><a href="#cb1019-1" aria-hidden="true" tabindex="-1"></a><span class="fl">2.</span></span></code></pre></div>
</blockquote>
<p>Resize the width to 0.4 by working in world space:</p>
<div class="sourceCode" id="cb1020"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1020-1"><a href="#cb1020-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBResizeBandwidth</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.4</span> <span class="op">-&gt;</span> <span class="st">&quot;World&quot;</span><span class="op">];</span></span></code></pre></div>
<p>Here, the width is expressed in index space:</p>
<div class="sourceCode" id="cb1021"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1021-1"><a href="#cb1021-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;HalfWidth&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1022"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1022-1"><a href="#cb1022-1" aria-hidden="true" tabindex="-1"></a><span class="fl">4.</span></span></code></pre></div>
</blockquote>
<h2 id="morphology-1">Morphology<a href="#morphology"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbdilation"
class="local-toc-link-2">OpenVDBDilation</a></li>
<li><a href="#openvdberosion"
class="local-toc-link-2">OpenVDBErosion</a></li>
<li><a href="#openvdbclosing"
class="local-toc-link-2">OpenVDBClosing</a></li>
<li><a href="#openvdbopening"
class="local-toc-link-2">OpenVDBOpening</a></li>
</ul>
</div>
<h3 id="openvdbdilation">OpenVDBDilation<a href="#morphology-1"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1023"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1023-1"><a href="#cb1023-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBDilation</span></code></pre></div>
<p><img src="img/1pnofdqqho1hy.png" loading="lazy" width=428 height=78></p>
<hr />
<p>Create a level set:</p>
<div class="sourceCode" id="cb1024"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1024-1"><a href="#cb1024-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1025"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1025-1"><a href="#cb1025-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/18oozcexkbshc.png" loading="lazy" width=240 height=168></p>
<p>Dilate by 0.2 units:</p>
<div class="sourceCode" id="cb1026"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1026-1"><a href="#cb1026-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDilation</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1027"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1027-1"><a href="#cb1027-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0a3i0148bl0jo.png" loading="lazy" width=240 height=178></p>
<hr />
<p>By default <code>OpenVDBDilation</code> works in world space:</p>
<div class="sourceCode" id="cb1028"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1028-1"><a href="#cb1028-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBDilation</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1029"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1029-1"><a href="#cb1029-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Dilate a grid by 2 voxels by working in index space:</p>
<div class="sourceCode" id="cb1030"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1030-1"><a href="#cb1030-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1031"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1031-1"><a href="#cb1031-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDilation</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1032"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1032-1"><a href="#cb1032-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0a3i0148bl0jo.png" loading="lazy" width=240 height=178></p>
<h3 id="openvdberosion">OpenVDBErosion<a href="#morphology-1"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1033"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1033-1"><a href="#cb1033-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBErosion</span></code></pre></div>
<p><img src="img/01bdb6rvm8us0.png" loading="lazy" width=428 height=78></p>
<hr />
<p>Create a level set:</p>
<div class="sourceCode" id="cb1034"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1034-1"><a href="#cb1034-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1035"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1035-1"><a href="#cb1035-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/18oozcexkbshc.png" loading="lazy" width=240 height=168></p>
<p>Erode by 0.1 units:</p>
<div class="sourceCode" id="cb1036"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1036-1"><a href="#cb1036-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBErosion</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1037"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1037-1"><a href="#cb1037-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/10abbjtrj66zo.png" loading="lazy" width=240 height=158></p>
<hr />
<p>By default <code>OpenVDBErosion</code> works in world space:</p>
<div class="sourceCode" id="cb1038"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1038-1"><a href="#cb1038-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBErosion</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1039"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1039-1"><a href="#cb1039-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Erode a grid by 1 voxel by working in index space:</p>
<div class="sourceCode" id="cb1040"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1040-1"><a href="#cb1040-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1041"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1041-1"><a href="#cb1041-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBErosion</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">1</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1042"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1042-1"><a href="#cb1042-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/10abbjtrj66zo.png" loading="lazy" width=240 height=158></p>
<h3 id="openvdbclosing">OpenVDBClosing<a href="#morphology-1"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1043"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1043-1"><a href="#cb1043-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBClosing</span></code></pre></div>
<p><img src="img/12gc7epfq79m6.png" loading="lazy" width=426 height=78></p>
<hr />
<p>Create a level set:</p>
<div class="sourceCode" id="cb1044"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1044-1"><a href="#cb1044-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1045"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1045-1"><a href="#cb1045-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/1adutvh3ul1lm.png" loading="lazy" width=240 height=226></p>
<p>Fill in the hole by closing by 0.4 units:</p>
<div class="sourceCode" id="cb1046"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1046-1"><a href="#cb1046-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBClosing</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.4</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1047"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1047-1"><a href="#cb1047-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/1i103tb3rq92z.png" loading="lazy" width=240 height=226></p>
<hr />
<p>By default <code>OpenVDBClosing</code> works in world space:</p>
<div class="sourceCode" id="cb1048"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1048-1"><a href="#cb1048-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBClosing</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1049"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1049-1"><a href="#cb1049-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Close a grid by 4 voxels by working in index space:</p>
<div class="sourceCode" id="cb1050"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1050-1"><a href="#cb1050-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Torus</span><span class="op">[{</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="op">{</span><span class="fl">0.2</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1051"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1051-1"><a href="#cb1051-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBClosing</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">4</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1052"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1052-1"><a href="#cb1052-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span>, <span class="fu">ViewPoint</span> <span class="op">-&gt;</span> <span class="op">{</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/1i103tb3rq92z.png" loading="lazy" width=240 height=226></p>
<h3 id="openvdbopening">OpenVDBOpening<a href="#morphology-1"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1053"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1053-1"><a href="#cb1053-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBOpening</span></code></pre></div>
<p><img src="img/0mlo1g72vqt1r.png" loading="lazy" width=438 height=78></p>
<hr />
<p>Represent a cube as a level set:</p>
<div class="sourceCode" id="cb1054"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1054-1"><a href="#cb1054-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cube</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1055"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1055-1"><a href="#cb1055-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/000sdxdgnanqs.png" loading="lazy" width=240 height=261></p>
<p>Open by 0.1 units:</p>
<div class="sourceCode" id="cb1056"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1056-1"><a href="#cb1056-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBOpening</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.1</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1057"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1057-1"><a href="#cb1057-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0inlgd0n2t19k.png" loading="lazy" width=240 height=260></p>
<hr />
<p>Create a scene of random balls:</p>
<div class="sourceCode" id="cb1058"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1058-1"><a href="#cb1058-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">RegionUnion</span> <span class="op">@@</span> <span class="fu">Table</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[</span><span class="fu">RandomReal</span><span class="op">[{-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">}</span>, <span class="fl">3</span><span class="op">]</span>, <span class="fu">RandomReal</span><span class="op">[{</span><span class="fl">0.1</span>, <span class="fl">0.4</span><span class="op">}]]</span>, <span class="fl">20</span><span class="op">]</span>, <span class="fl">0.05</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1059"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1059-1"><a href="#cb1059-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0e9d1khy1o7d8.png" loading="lazy" width=240 height=210></p>
<p>Delete small objects from the scene:</p>
<div class="sourceCode" id="cb1060"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1060-1"><a href="#cb1060-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBOpening</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">0.2</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1061"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1061-1"><a href="#cb1061-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0uyom7mugqzmu.png" loading="lazy" width=240 height=208></p>
<hr />
<p>By default <code>OpenVDBOpening</code> works in world space:</p>
<div class="sourceCode" id="cb1062"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1062-1"><a href="#cb1062-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBOpening</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1063"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1063-1"><a href="#cb1063-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<p>Open a grid by 10 voxels by working in index space:</p>
<div class="sourceCode" id="cb1064"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1064-1"><a href="#cb1064-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Cube</span><span class="op">[]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1065"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1065-1"><a href="#cb1065-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBOpening</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">10</span> <span class="op">-&gt;</span> <span class="st">&quot;Index&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1066"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1066-1"><a href="#cb1066-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0inlgd0n2t19k.png" loading="lazy" width=240 height=260></p>
<h1 id="transform">Transform</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#geometric-transformation"
class="local-toc-link-1">Geometric transformation</a></li>
<li><a href="#value-transformation" class="local-toc-link-1">Value
transformation</a></li>
</ul>
</div>
<h2 id="geometric-transformation">Geometric transformation<a
href="#transform" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbtransform"
class="local-toc-link-2">OpenVDBTransform</a></li>
</ul>
</div>
<h3 id="openvdbtransform">OpenVDBTransform<a
href="#geometric-transformation" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1067"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1067-1"><a href="#cb1067-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBTransform</span></code></pre></div>
<p><img src="img/1dsqsdhae6ik2.png" loading="lazy" width=534 height=78></p>
<p>The following examples will use this level set grid as the base
input:</p>
<div class="sourceCode" id="cb1068"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1068-1"><a href="#cb1068-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">ExampleData</span><span class="op">[{</span><span class="st">&quot;Geometry3D&quot;</span>, <span class="st">&quot;Triceratops&quot;</span><span class="op">}</span>, <span class="st">&quot;MeshRegion&quot;</span><span class="op">]</span>, <span class="fl">0.01</span><span class="op">];</span></span></code></pre></div>
<hr />
<p>Translate a grid by <code>{2.0, 3.4, -1.0}</code> in world
coordinates:</p>
<div class="sourceCode" id="cb1069"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1069-1"><a href="#cb1069-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">TranslationTransform</span><span class="op">[{</span><span class="fl">2</span>, <span class="fl">3.4</span>, <span class="op">-</span><span class="fl">1</span><span class="op">}]];</span></span></code></pre></div>
<p>Compare bounding boxes:</p>
<div class="sourceCode" id="cb1070"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1070-1"><a href="#cb1070-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldBoundingBox&quot;</span><span class="op">]</span>, <span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;WorldBoundingBox&quot;</span><span class="op">]}</span> <span class="op">//</span> <span class="fu">Column</span></span></code></pre></div>
<p><img src="img/1tu03fiywy59r.png" loading="lazy" width=342 height=34></p>
<hr />
<p>Scale a grid by a factor of 2.4:</p>
<div class="sourceCode" id="cb1071"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1071-1"><a href="#cb1071-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">ScalingTransform</span><span class="op">[{</span><span class="fl">2.4</span>, <span class="fl">2.4</span>, <span class="fl">2.4</span><span class="op">}]];</span></span></code></pre></div>
<p>The bounding box of the resulting grid is roughly 2.4 times
larger:</p>
<div class="sourceCode" id="cb1072"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1072-1"><a href="#cb1072-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]/</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1073"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1073-1"><a href="#cb1073-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">2.40302</span>, <span class="fl">2.40977</span>, <span class="fl">2.40456</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Rotate about the x axis, centered about the center of the bounding
box:</p>
<div class="sourceCode" id="cb1074"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1074-1"><a href="#cb1074-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fu">RotationTransform</span><span class="op">[</span><span class="fl">50</span> <span class="op">\[Degree]</span>, <span class="op">{</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">}</span>, <span class="fu">Mean</span> <span class="op">/@</span> <span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldBoundingBox&quot;</span><span class="op">]]];</span></span></code></pre></div>
<p>Compare bounding box of the resulting grid is roughly 2.4 times
larger:</p>
<div class="sourceCode" id="cb1075"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1075-1"><a href="#cb1075-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Show</span><span class="op">[</span></span>
<span id="cb1075-2"><a href="#cb1075-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, </span>
<span id="cb1075-3"><a href="#cb1075-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">tgrid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Red</span><span class="op">]</span> </span>
<span id="cb1075-4"><a href="#cb1075-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/0oad7nz3k0ah1.png" loading="lazy" width=360 height=239></p>
<hr />
<p>The transformation can be any valid affine transform:</p>
<p><img src="img/1xgnsrfiwwwlg.png" loading="lazy" width=666 height=70></p>
<p>Compare objects:</p>
<div class="sourceCode" id="cb1076"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1076-1"><a href="#cb1076-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Show</span><span class="op">[</span></span>
<span id="cb1076-2"><a href="#cb1076-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">tgrid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Red</span><span class="op">]</span>, </span>
<span id="cb1076-3"><a href="#cb1076-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Opacity</span><span class="op">[</span><span class="fl">0.3</span><span class="op">]]</span> </span>
<span id="cb1076-4"><a href="#cb1076-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/0cyc0d5zzb2kq.png" loading="lazy" width=360 height=261></p>
<hr />
<p>The transformation can be any valid perspective transform:</p>
<p><img src="img/0vhmervq4w6p8.png" loading="lazy" width=666 height=70></p>
<p>Compare objects:</p>
<div class="sourceCode" id="cb1077"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1077-1"><a href="#cb1077-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Show</span><span class="op">[</span></span>
<span id="cb1077-2"><a href="#cb1077-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">tgrid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Red</span><span class="op">]</span>, </span>
<span id="cb1077-3"><a href="#cb1077-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">MeshRegion</span><span class="op">[</span><span class="fu">OpenVDBMesh</span><span class="op">[</span><span class="va">grid</span>, <span class="st">&quot;Adaptivity&quot;</span> <span class="op">-&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu">BaseStyle</span> <span class="op">-&gt;</span> <span class="fu">Opacity</span><span class="op">[</span><span class="fl">0.3</span><span class="op">]]</span> </span>
<span id="cb1077-4"><a href="#cb1077-4" aria-hidden="true" tabindex="-1"></a> <span class="op">]</span></span></code></pre></div>
<p><img src="img/1fvpnarv9u3dj.png" loading="lazy" width=360 height=380></p>
<hr />
<p>A list of 3 scalars is shorthand for translation in world
coordinates:</p>
<div class="sourceCode" id="cb1078"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1078-1"><a href="#cb1078-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="op">{</span><span class="fl">2</span>, <span class="fl">3.4</span>, <span class="op">-</span><span class="fl">1</span><span class="op">}];</span></span></code></pre></div>
<p>Compare bounding boxes:</p>
<div class="sourceCode" id="cb1079"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1079-1"><a href="#cb1079-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldBoundingBox&quot;</span><span class="op">]</span>, <span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;WorldBoundingBox&quot;</span><span class="op">]}</span> <span class="op">//</span> <span class="fu">Column</span></span></code></pre></div>
<p><img src="img/0v2q8jczmstac.png" loading="lazy" width=342 height=34></p>
<hr />
<p>A positive scalar is shorthand for isotropic scaling:</p>
<div class="sourceCode" id="cb1080"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1080-1"><a href="#cb1080-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.4</span><span class="op">];</span></span></code></pre></div>
<p>The bounding box of the resulting grid is roughly 2.4 times
larger:</p>
<div class="sourceCode" id="cb1081"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1081-1"><a href="#cb1081-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]/</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1082"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1082-1"><a href="#cb1082-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">2.40302</span>, <span class="fl">2.40977</span>, <span class="fl">2.40456</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBTransform</code> works on fog volumes:</p>
<div class="sourceCode" id="cb1083"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1083-1"><a href="#cb1083-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1084"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1084-1"><a href="#cb1084-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0.75</span><span class="op">];</span></span></code></pre></div>
<p>The bounding box of the resulting grid is roughly 0.75 times the
input:</p>
<div class="sourceCode" id="cb1085"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1085-1"><a href="#cb1085-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]/</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;WorldDimensions&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1086"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1086-1"><a href="#cb1086-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">0.745592</span>, <span class="fl">0.736842</span>, <span class="fl">0.737892</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<p><code>OpenVDBTransform</code> turns all active tiles dense for fog
volumes:</p>
<div class="sourceCode" id="cb1087"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1087-1"><a href="#cb1087-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Length</span><span class="op">[</span><span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">fog</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1088"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1088-1"><a href="#cb1088-1" aria-hidden="true" tabindex="-1"></a><span class="fl">17387</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb1089"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1089-1"><a href="#cb1089-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Length</span><span class="op">[</span><span class="fu">OpenVDBActiveTiles</span><span class="op">[</span><span class="va">tgrid</span><span class="op">]]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1090"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1090-1"><a href="#cb1090-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0</span></span></code></pre></div>
</blockquote>
<hr />
<p><code>OpenVDBTransform</code> works on all types:</p>
<div class="sourceCode" id="cb1091"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1091-1"><a href="#cb1091-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;Boolean&quot;</span><span class="op">];</span></span>
<span id="cb1091-2"><a href="#cb1091-2" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBSetValues</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">Position</span><span class="op">[</span><span class="fu">DiskMatrix</span><span class="op">[</span><span class="fl">10</span> <span class="op">{</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">}]</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span><span class="op">];</span></span></code></pre></div>
<p>Apply an anisotropic scaling:</p>
<div class="sourceCode" id="cb1092"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1092-1"><a href="#cb1092-1" aria-hidden="true" tabindex="-1"></a><span class="va">bgrid2</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">bgrid</span>, <span class="fu">ScalingTransform</span><span class="op">[{</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">}]];</span></span></code></pre></div>
<div class="sourceCode" id="cb1093"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1093-1"><a href="#cb1093-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBImage3D</span><span class="op">[</span><span class="va">bgrid2</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1ii8u7tn7130x.png" loading="lazy" width=360 height=236></p>
<hr />
<p><code>OpenVDBTransform</code> creates a new grid:</p>
<div class="sourceCode" id="cb1094"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1094-1"><a href="#cb1094-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1095"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1095-1"><a href="#cb1095-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="fl">794</span>, <span class="fl">266</span>, <span class="fl">351</span><span class="op">}</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb1096"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1096-1"><a href="#cb1096-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<p>The original grid remains the same:</p>
<div class="sourceCode" id="cb1097"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1097-1"><a href="#cb1097-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1098"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1098-1"><a href="#cb1098-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">794</span>, <span class="fl">266</span>, <span class="fl">351</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1589</span>, <span class="fl">533</span>, <span class="fl">703</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>By default <code>OpenVDBTransform</code> works in world
coordinates:</p>
<div class="sourceCode" id="cb1099"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1099-1"><a href="#cb1099-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBDefaultSpace</span><span class="op">[</span><span class="fu">OpenVDBTransform</span><span class="op">]</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1100"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1100-1"><a href="#cb1100-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;World&quot;</span></span></code></pre></div>
</blockquote>
<div class="sourceCode" id="cb1101"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1101-1"><a href="#cb1101-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrid</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.0</span><span class="op">];</span></span></code></pre></div>
<p>The original grid remains the same:</p>
<div class="sourceCode" id="cb1102"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1102-1"><a href="#cb1102-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">grid</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]</span>, <span class="va">tgrid</span><span class="op">[</span><span class="st">&quot;IndexDimensions&quot;</span><span class="op">]}</span></span></code></pre></div>
<blockquote>
<div class="sourceCode" id="cb1103"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1103-1"><a href="#cb1103-1" aria-hidden="true" tabindex="-1"></a><span class="op">{{</span><span class="fl">794</span>, <span class="fl">266</span>, <span class="fl">351</span><span class="op">}</span>, <span class="op">{</span><span class="fl">1589</span>, <span class="fl">533</span>, <span class="fl">703</span><span class="op">}}</span></span></code></pre></div>
</blockquote>
<hr />
<p>Use different resampling schemes</p>
<div class="sourceCode" id="cb1104"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1104-1"><a href="#cb1104-1" aria-hidden="true" tabindex="-1"></a><span class="va">resamps</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Nearest&quot;</span>, <span class="st">&quot;Linear&quot;</span>, <span class="st">&quot;Quadratic&quot;</span><span class="op">};</span></span></code></pre></div>
<div class="sourceCode" id="cb1105"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1105-1"><a href="#cb1105-1" aria-hidden="true" tabindex="-1"></a><span class="va">tgrids</span> <span class="op">=</span> <span class="fu">OpenVDBTransform</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2.0</span>, <span class="fu">Resampling</span> <span class="op">-&gt;</span> #<span class="op">]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">resamps</span><span class="op">;</span></span></code></pre></div>
<p>For each resampling scheme, look at a piece of the narrow band at
slice z = 0 and xy bounds {{-395, -365}, {70, 100}} (index
coordinates):</p>
<div class="sourceCode" id="cb1106"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1106-1"><a href="#cb1106-1" aria-hidden="true" tabindex="-1"></a><span class="va">slices</span> <span class="op">=</span> <span class="fu">OpenVDBSlice</span><span class="op">[</span>#, <span class="fl">0</span>, <span class="op">{{-</span><span class="fl">395</span>, <span class="op">-</span><span class="fl">365</span><span class="op">}</span>, <span class="op">{</span><span class="fl">70</span>, <span class="fl">100</span><span class="op">}}]</span> <span class="op">&amp;</span> <span class="op">/@</span> <span class="va">tgrids</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb1107"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1107-1"><a href="#cb1107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MapThread</span><span class="op">[</span><span class="fu">ListDensityPlot</span><span class="op">[</span>#<span class="fl">1</span>, <span class="fu">InterpolationOrder</span> <span class="op">-&gt;</span> <span class="fl">0</span>, <span class="fu">PlotLabel</span> <span class="op">-&gt;</span> #<span class="fl">2</span><span class="op">]</span> <span class="op">&amp;</span>, <span class="op">{</span><span class="va">slices</span>, <span class="va">resamps</span><span class="op">}]</span></span></code></pre></div>
<p><img src="img/1r8bnfy1jhk3h.png" loading="lazy" width=582 height=198></p>
<h2 id="value-transformation">Value transformation<a href="#transform"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
<li><a href="#openvdbmultiply"
class="local-toc-link-2">OpenVDBMultiply</a></li>
<li><a href="#openvdbgammaadjust"
class="local-toc-link-2">OpenVDBGammaAdjust</a></li>
</ul>
</div>
<h3 id="openvdbmultiply">OpenVDBMultiply<a href="#value-transformation"
class="link-back"><span class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1108"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1108-1"><a href="#cb1108-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBMultiply</span></code></pre></div>
<p><img src="img/0y662oaelku4u.png" loading="lazy" width=650 height=78></p>
<hr />
<p>Create a fog volume with grayscale band width 3:</p>
<div class="sourceCode" id="cb1109"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1109-1"><a href="#cb1109-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1110"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1110-1"><a href="#cb1110-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1111"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1111-1"><a href="#cb1111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/18pu2lx8yiz95.png" loading="lazy" width=240 height=240></p>
<p>Multiplying by 3 results in a grayscale band width of 1 for this
grid:</p>
<div class="sourceCode" id="cb1112"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1112-1"><a href="#cb1112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMultiply</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1113"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1113-1"><a href="#cb1113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0lv8xv05265r0.png" loading="lazy" width=240 height=240></p>
<hr />
<p><code>OpenVDBMultiply</code> only works on scalar grids:</p>
<div class="sourceCode" id="cb1114"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1114-1"><a href="#cb1114-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;UInt32&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1115"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1115-1"><a href="#cb1115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBMultiply</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span><span class="op">];</span></span></code></pre></div>
<p><img src="img/1wqvat3csmnf0.png" loading="lazy" width=450 height=43></p>
<h3 id="openvdbgammaadjust">OpenVDBGammaAdjust<a
href="#value-transformation" class="link-back"><span
class="link-back-triangle">▴</span></a></h3>
<div class="sourceCode" id="cb1116"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1116-1"><a href="#cb1116-1" aria-hidden="true" tabindex="-1"></a>?OpenVDBGammaAdjust</span></code></pre></div>
<p><img src="img/0e0401mobwnco.png" loading="lazy" width=458 height=78></p>
<hr />
<p>Create a fog volume:</p>
<div class="sourceCode" id="cb1117"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1117-1"><a href="#cb1117-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1118"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1118-1"><a href="#cb1118-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1119"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1119-1"><a href="#cb1119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/10nas2kww0loq.png" loading="lazy" width=240 height=240></p>
<p>Adjust with gamma correction factor 0.25:</p>
<div class="sourceCode" id="cb1120"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1120-1"><a href="#cb1120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGammaAdjust</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0.25</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1121"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1121-1"><a href="#cb1121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1hwaue7i21z6t.png" loading="lazy" width=240 height=240></p>
<hr />
<p>A very small gamma correction factor effectively turns all nonzero
values to 1.0:</p>
<div class="sourceCode" id="cb1122"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1122-1"><a href="#cb1122-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1123"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1123-1"><a href="#cb1123-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1124"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1124-1"><a href="#cb1124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/138m2lnduj5wi.png" loading="lazy" width=240 height=240></p>
<p>Adjust with gamma correction factor 0.25:</p>
<div class="sourceCode" id="cb1125"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1125-1"><a href="#cb1125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGammaAdjust</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0.0001</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1126"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1126-1"><a href="#cb1126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1l2ow30fs6kf1.png" loading="lazy" width=240 height=240></p>
<hr />
<p>A very large gamma correction factor effectively turns all non-one
values to 0.0:</p>
<div class="sourceCode" id="cb1127"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1127-1"><a href="#cb1127-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBLevelSet</span><span class="op">[</span><span class="fu">Ball</span><span class="op">[]</span>, <span class="fl">0.1</span>, <span class="fl">3.0</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1128"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1128-1"><a href="#cb1128-1" aria-hidden="true" tabindex="-1"></a><span class="va">fog</span> <span class="op">=</span> <span class="fu">OpenVDBFogVolume</span><span class="op">[</span><span class="va">grid</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1129"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1129-1"><a href="#cb1129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1cqtcp22hnaey.png" loading="lazy" width=240 height=240></p>
<p>Adjust with gamma correction factor 0.25:</p>
<div class="sourceCode" id="cb1130"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1130-1"><a href="#cb1130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGammaAdjust</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">1000</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1131"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1131-1"><a href="#cb1131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Image</span><span class="op">[</span><span class="fu">OpenVDBSliceImage</span><span class="op">[</span><span class="va">fog</span>, <span class="fl">0</span><span class="op">]</span>, <span class="fu">ImageSize</span> <span class="op">-&gt;</span> <span class="fl">240</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/1hdgr8hnhqtls.png" loading="lazy" width=240 height=240></p>
<hr />
<p><code>OpenVDBGammaAdjust</code> only works on fog volumes:</p>
<div class="sourceCode" id="cb1132"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1132-1"><a href="#cb1132-1" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="op">=</span> <span class="fu">OpenVDBCreateGrid</span><span class="op">[</span><span class="fl">1.0</span>, <span class="st">&quot;UInt32&quot;</span><span class="op">];</span></span></code></pre></div>
<div class="sourceCode" id="cb1133"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1133-1"><a href="#cb1133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OpenVDBGammaAdjust</span><span class="op">[</span><span class="va">grid</span>, <span class="fl">2</span><span class="op">];</span></span></code></pre></div>
<p><img src="img/09dhu555mrlzc.png" loading="lazy" width=481 height=43></p>
<h1 id="testing">Testing</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#running-unit-tests" class="local-toc-link-1">Running unit
tests</a></li>
<li><a href="#adding-unit-tests" class="local-toc-link-1">Adding unit
tests</a></li>
</ul>
</div>
<p>The unit test framework leverages <em>Mathematica’s</em> built in <a
href="https://reference.wolfram.com/language/tutorial/UsingTheTestingFramework.html">testing
framework</a>. In particular test results are returned as a collection
of <a
href="https://reference.wolfram.com/language/ref/TestReportObject.html">TestReportObjects</a>
that can be inspected.</p>
<h2 id="running-unit-tests">Running unit tests<a href="#testing"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>Run all unit tests:</p>
<div class="sourceCode" id="cb1134"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1134-1"><a href="#cb1134-1" aria-hidden="true" tabindex="-1"></a><span class="va">OpenVDBLink`Developer`TestOpenVDBLink</span><span class="op">[]</span></span></code></pre></div>
<p><img src="img/02m2ftjxdioe2.png" loading="lazy" width=1499 height=348></p>
<hr />
<p>Test just a particular area:</p>
<div class="sourceCode" id="cb1135"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1135-1"><a href="#cb1135-1" aria-hidden="true" tabindex="-1"></a><span class="va">OpenVDBLink`Developer`TestOpenVDBLink</span><span class="op">[</span><span class="st">&quot;Measure&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/03w0ze4pmaqk9.png" loading="lazy" width=1484 height=46></p>
<h2 id="adding-unit-tests">Adding unit tests<a href="#testing"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>To add a unit test, first convert the plaintext .wlt files into an
interactive notebook:</p>
<div class="sourceCode" id="cb1136"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1136-1"><a href="#cb1136-1" aria-hidden="true" tabindex="-1"></a><span class="va">OpenVDBLink`Developer`WLTToNotebook</span><span class="op">[</span><span class="st">&quot;Measure&quot;</span><span class="op">]</span></span></code></pre></div>
<p><img src="img/0a44mgrh3qouz.png" loading="lazy" width=209 height=26></p>
<p>A notebook will open:</p>
<p><img src="img/0euax7aovistz.png" loading="lazy" width=808 height=375></p>
<hr />
<p>Insert your tests:</p>
<p><img src="img/09dcnz3c3e12x.png" loading="lazy" width=808 height=625></p>
<hr />
<p>Save the notebook as .wlt, replacing the old file:</p>
<p><img src="img/0yybxoou1jate.png" loading="lazy" width=808 height=625></p>
<h1 id="acknowledgements">Acknowledgements</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
</ul>
</div>
<p>OpenVDBLink is built and compiled with a fork of LTemplate written by
Szabolcs Horvát. Website: <a
href="https://github.com/szhorvat/LTemplate">https://github.com/szhorvat/LTemplate</a></p>
<p>The structure of OpenVDBLink, as well as this documentation notebook
&amp; web version, is inspired by and uses tools from igraph/M also
written by Szabolcs Horvát. Website: <a
href="http://szhorvat.net/pelican/igraphm-a-mathematica-interface-for-igraph.html">http://szhorvat.net/pelican/igraphm-a-mathematica-interface-for-igraph.html</a></p>
<p>The web version of the documentation is prepared with the M2MD
package by Kuba Podkalicki. Website: <a
href="https://github.com/kubaPod/M2MD/">https://github.com/kubaPod/M2MD/</a></p>
<p><code>OpenVDBLink</code>Developer<code>WLTToNotebook</code> is based
off the resource function <code>WLTToNotebook</code> by Sjoerd Smit and
Jon McLoone. Website: <a
href="https://resources.wolframcloud.com/FunctionRepository/resources/WLTToNotebook/">https://resources.wolframcloud.com/FunctionRepository/resources/WLTToNotebook/</a></p>
<h1 id="license">License</h1>
<div class="local-toc-2">
<ul>
</ul>
</div>
<div class="local-toc-1">
<ul>
<li><a href="#about" class="local-toc-link-1">About</a></li>
<li><a href="#contributor-license-agreement"
class="local-toc-link-1">Contributor License Agreement</a></li>
<li><a href="#dco-sign-offs" class="local-toc-link-1">DCO
sign-offs</a></li>
</ul>
</div>
<h2 id="about">About<a href="#license" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>OpenVDB is released under the <a
href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License
Version 2.0</a>, which is a free, open source, and detailed software
license developed and maintained by the Mozilla Foundation. For more
information about this license, see the <a
href="https://www.mozilla.org/en-US/MPL/">Mozilla FAQ</a>. The
trademarks of any contributor to this project may not be used in
association with the project without the contributor’s express
permission.</p>
<h2 id="contributor-license-agreement">Contributor License Agreement<a
href="#license" class="link-back"><span
class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>Developers who wish to contribute code to be considered for inclusion
in the OpenVDB distribution must first be authorized under a signed
Contributor License Agreement. The signature and authorization process
is managed via the Linux Foundation’s EasyCLA system, to handle the
different CLAs depending on whether you are contributing on your own
behalf or on behalf of your employer. The EasyCLA process will begin the
first time you submit a PR to the project.</p>
<h2 id="dco-sign-offs">DCO sign-offs<a href="#license"
class="link-back"><span class="link-back-triangle">▴</span></a></h2>
<div class="local-toc-2">
<ul>
</ul>
</div>
<p>All code should adhere to the OpenVDB <a
href="https://academysoftwarefoundation.github.io/openvdb/codingStyle.html">coding
standards</a>, and every commit must be signed off. That is, every
commit log message must include a “Signed-off-by” line (generated, for
example, with “git commit –signoff”), indicating that the contributor
has the right to release it under the <a
href="http://www.mozilla.org/MPL/2.0/">MPL 2.0</a> license. See <a
href="http://developercertificate.org/">http://developercertificate.org/</a>
for more information on this requirement.</p>
<p><br></p>
<hr />
<div
style="text-align: center; color: #999; margin: 15px 0; font-size: 0.85em;">
OpenVDBDLink Documentation © 2022 Greg Hurst
</div>
</body>
</html>
