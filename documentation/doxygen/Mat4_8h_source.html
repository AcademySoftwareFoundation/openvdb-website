<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: openvdb/math/Mat4.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5862e09d5e9b1231151ba919eed3a485.html">openvdb</a></li><li class="navelem"><a class="el" href="dir_69617f6be853dce416486f133b3b7581.html">math</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Mat4.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Mat4_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright Contributors to the OpenVDB Project</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// SPDX-License-Identifier: MPL-2.0</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#ifndef OPENVDB_MATH_MAT4_H_HAS_BEEN_INCLUDED</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#define OPENVDB_MATH_MAT4_H_HAS_BEEN_INCLUDED</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="openvdb_2Exceptions_8h.html">openvdb/Exceptions.h</a>&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Platform_8h.html">openvdb/Platform.h</a>&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Math_8h.html">Math.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Mat3_8h.html">Mat3.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Vec3_8h.html">Vec3.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Vec4_8h.html">Vec4.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span> <span class="comment">// for std::copy(), std::swap()</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceopenvdb.html">openvdb</a> {</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<a class="code" href="version_8h_8in.html#a2dde157791cd7558cdf886489256ba14">OPENVDB_USE_VERSION_NAMESPACE</a></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span><a class="code" href="version_8h_8in.html#a00be3835cb8ad1ded8abd821fad20fc0">OPENVDB_VERSION_NAME</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>math {</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">   24</a></span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class </span><a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// @class Mat4 Mat4.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// @brief 4x4 -matrix class.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">class </span><a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>: <span class="keyword">public</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html">Mat</a>&lt;4, T&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">    /// Data type held by the matrix.</span></div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#afb9ded5f49336ae503bb9f2035ea902b">   34</a></span>&#160;<span class="comment"></span>    <span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#afb9ded5f49336ae503bb9f2035ea902b">value_type</a> = T;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aecaeabaa9da616ae42bb20787878260d">   35</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#aecaeabaa9da616ae42bb20787878260d">ValueType</a> = T;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7cd9e1303f807b3efd6fa91c82890694">   36</a></span>&#160;    <span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html">MyBase</a> = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html">Mat&lt;4, T&gt;</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    /// Trivial constructor, the matrix is NOT initialized</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"></span><span class="preprocessor">#if OPENVDB_ABI_VERSION_NUMBER &gt;= 8</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    /// @note destructor, copy constructor, assignment operator and</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span><span class="comment">    ///   move constructor are left to be defined by the compiler (default)</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>() {}</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">    /// Copy constructor</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html">Mat&lt;4, T&gt;</a> &amp;m)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                MyBase::mm[i*4 + j] = m[i][j];</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">    /// Constructor given array of elements, the ordering is in row major form:</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span><span class="comment">    /** @verbatim</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">        a[ 0] a[1]  a[ 2] a[ 3]</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">        a[ 4] a[5]  a[ 6] a[ 7]</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">        a[ 8] a[9]  a[10] a[11]</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">        a[12] a[13] a[14] a[15]</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">        @endverbatim */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Source&gt;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab225ef444ee1962bc0abfafb9b8dfb5b">   65</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab225ef444ee1962bc0abfafb9b8dfb5b">Mat4</a>(Source *a)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            MyBase::mm[i] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(a[i]);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">    /// Constructor given array of elements, the ordering is in row major form:</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span><span class="comment">    /** @verbatim</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">        a b c d</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">        e f g h</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">        i j k l</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">        m n o p</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">        @endverbatim */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Source&gt;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#abec46d0f9d9083cccab32bbe61e8ce2a">   80</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#abec46d0f9d9083cccab32bbe61e8ce2a">Mat4</a>(Source a, Source b, Source c, Source d,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;         Source e, Source f, Source g, Source h,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;         Source i, Source j, Source k, Source l,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;         Source m, Source n, Source o, Source p)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        MyBase::mm[ 0] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(a);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        MyBase::mm[ 1] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(b);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        MyBase::mm[ 2] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(c);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        MyBase::mm[ 3] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(d);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        MyBase::mm[ 4] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(e);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        MyBase::mm[ 5] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(f);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        MyBase::mm[ 6] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(g);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        MyBase::mm[ 7] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(h);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        MyBase::mm[ 8] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(i);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        MyBase::mm[ 9] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(j);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        MyBase::mm[10] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(k);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        MyBase::mm[11] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(l);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        MyBase::mm[12] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(m);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        MyBase::mm[13] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(n);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        MyBase::mm[14] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(o);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        MyBase::mm[15] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(p);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">    /// Construct matrix from rows or columns vectors (defaults to rows</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    /// for historical reasons)</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Source&gt;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a84369eb1962b9b38120540353c4e309f">  109</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a84369eb1962b9b38120540353c4e309f">Mat4</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;Source&gt;</a> &amp;v1, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;Source&gt;</a> &amp;v2,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;Source&gt;</a> &amp;v3, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;Source&gt;</a> &amp;v4, <span class="keywordtype">bool</span> rows = <span class="keyword">true</span>)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> (rows) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            this-&gt;setRows(v1, v2, v3, v4);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            this-&gt;setColumns(v1, v2, v3, v4);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    /// Conversion constructor</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Source&gt;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a28dccdc05858b244cd361cea1f57512b">  121</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a28dccdc05858b244cd361cea1f57512b">Mat4</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;Source&gt;</a> &amp;m)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">const</span> Source *src = m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;16; ++i) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            MyBase::mm[i] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(src[i]);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">    /// Predefined constant for identity matrix</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a71890348d53084982694f39988f4b286">  131</a></span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a71890348d53084982694f39988f4b286">identity</a>() {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> sIdentity = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>(</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            1, 0, 0, 0,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            0, 1, 0, 0,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            0, 0, 1, 0,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            0, 0, 0, 1</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">return</span> sIdentity;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    /// Predefined constant for zero matrix</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a860a0abbff4a4a673c9c708f6fd2b49d">  142</a></span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a860a0abbff4a4a673c9c708f6fd2b49d">zero</a>() {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> sZero = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>(</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            0, 0, 0, 0,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            0, 0, 0, 0,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            0, 0, 0, 0,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            0, 0, 0, 0</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        );</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> sZero;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">    /// Set ith row to vector v</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab9ccd8d858c93f78abce438c9abad1be">  153</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab9ccd8d858c93f78abce438c9abad1be">setRow</a>(<span class="keywordtype">int</span> i, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">// assert(i&gt;=0 &amp;&amp; i&lt;4);</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">int</span> i4 = i * 4;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        MyBase::mm[i4+0] = v[0];</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        MyBase::mm[i4+1] = v[1];</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        MyBase::mm[i4+2] = v[2];</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        MyBase::mm[i4+3] = v[3];</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">    /// Get ith row, e.g.    Vec4f v = m.row(1);</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6918ef84a51ab39533d827f31203c756">  164</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6918ef84a51ab39533d827f31203c756">row</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// assert(i&gt;=0 &amp;&amp; i&lt;3);</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a>((*this)(i,0), (*<span class="keyword">this</span>)(i,1), (*<span class="keyword">this</span>)(i,2), (*<span class="keyword">this</span>)(i,3));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    /// Set jth column to vector v</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a68c3859392fa67a8dbb7bda68fd7813f">  171</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a68c3859392fa67a8dbb7bda68fd7813f">setCol</a>(<span class="keywordtype">int</span> j, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a>&amp; v)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// assert(j&gt;=0 &amp;&amp; j&lt;4);</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        MyBase::mm[ 0+j] = v[0];</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        MyBase::mm[ 4+j] = v[1];</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        MyBase::mm[ 8+j] = v[2];</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        MyBase::mm[12+j] = v[3];</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">    /// Get jth column, e.g.    Vec4f v = m.col(0);</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7f3f03ad0e44c62ba30750d445b4b1e9">  181</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7f3f03ad0e44c62ba30750d445b4b1e9">col</a>(<span class="keywordtype">int</span> j)<span class="keyword"> const</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">// assert(j&gt;=0 &amp;&amp; j&lt;4);</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a>((*this)(0,j), (*<span class="keyword">this</span>)(1,j), (*<span class="keyword">this</span>)(2,j), (*<span class="keyword">this</span>)(3,j));</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">    /// Alternative indexed reference to the elements</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    /// Note that the indices are row first and column second.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    /// e.g.    m(0,0) = 1;</span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8c8ceabc696d63c5c1949706e5f949af">  190</a></span>&#160;<span class="comment"></span>    T&amp; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8c8ceabc696d63c5c1949706e5f949af">operator()</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// assert(i&gt;=0 &amp;&amp; i&lt;4);</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">// assert(j&gt;=0 &amp;&amp; j&lt;4);</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> MyBase::mm[4*i+j];</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    /// Alternative indexed constant reference to the elements,</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    /// Note that the indices are row first and column second.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">    /// e.g.    float f = m(1,0);</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a52f400707bfe09b4abe0f2cc6dac6e74">  200</a></span>&#160;<span class="comment"></span>    T <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a52f400707bfe09b4abe0f2cc6dac6e74">operator()</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword"> const</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// assert(i&gt;=0 &amp;&amp; i&lt;4);</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// assert(j&gt;=0 &amp;&amp; j&lt;4);</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> MyBase::mm[4*i+j];</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">    /// Set the rows of this matrix to the vectors v1, v2, v3, v4</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a454011d03dc14216a6b68d03e5798cf1">  208</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a454011d03dc14216a6b68d03e5798cf1">setRows</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v1, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v2,</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v3, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v4)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        MyBase::mm[ 0] = v1[0];</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        MyBase::mm[ 1] = v1[1];</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        MyBase::mm[ 2] = v1[2];</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        MyBase::mm[ 3] = v1[3];</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        MyBase::mm[ 4] = v2[0];</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        MyBase::mm[ 5] = v2[1];</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        MyBase::mm[ 6] = v2[2];</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        MyBase::mm[ 7] = v2[3];</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        MyBase::mm[ 8] = v3[0];</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        MyBase::mm[ 9] = v3[1];</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        MyBase::mm[10] = v3[2];</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        MyBase::mm[11] = v3[3];</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        MyBase::mm[12] = v4[0];</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        MyBase::mm[13] = v4[1];</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        MyBase::mm[14] = v4[2];</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        MyBase::mm[15] = v4[3];</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">    /// Set the columns of this matrix to the vectors v1, v2, v3, v4</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a792bba2fb77c5beb92721efe95332585">  233</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a792bba2fb77c5beb92721efe95332585">setColumns</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v1, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v2,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v3, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;v4)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        MyBase::mm[ 0] = v1[0];</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        MyBase::mm[ 1] = v2[0];</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        MyBase::mm[ 2] = v3[0];</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        MyBase::mm[ 3] = v4[0];</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        MyBase::mm[ 4] = v1[1];</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        MyBase::mm[ 5] = v2[1];</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        MyBase::mm[ 6] = v3[1];</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        MyBase::mm[ 7] = v4[1];</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        MyBase::mm[ 8] = v1[2];</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        MyBase::mm[ 9] = v2[2];</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        MyBase::mm[10] = v3[2];</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        MyBase::mm[11] = v4[2];</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        MyBase::mm[12] = v1[3];</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        MyBase::mm[13] = v2[3];</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        MyBase::mm[14] = v3[3];</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        MyBase::mm[15] = v4[3];</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Set this matrix to zero</span></div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a47affd1a10b589811fc4828c1a2e0c6d">  258</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a47affd1a10b589811fc4828c1a2e0c6d">setZero</a>()</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        MyBase::mm[ 0] = 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        MyBase::mm[ 1] = 0;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        MyBase::mm[ 2] = 0;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        MyBase::mm[ 3] = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        MyBase::mm[ 4] = 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        MyBase::mm[ 5] = 0;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        MyBase::mm[ 6] = 0;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        MyBase::mm[ 7] = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        MyBase::mm[ 8] = 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        MyBase::mm[ 9] = 0;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        MyBase::mm[10] = 0;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        MyBase::mm[11] = 0;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        MyBase::mm[12] = 0;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        MyBase::mm[13] = 0;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        MyBase::mm[14] = 0;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        MyBase::mm[15] = 0;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    /// Set this matrix to identity</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a382e6ad7e6721b121e510959e1011be3">  279</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a382e6ad7e6721b121e510959e1011be3">setIdentity</a>()</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        MyBase::mm[ 0] = 1;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        MyBase::mm[ 1] = 0;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        MyBase::mm[ 2] = 0;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        MyBase::mm[ 3] = 0;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        MyBase::mm[ 4] = 0;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        MyBase::mm[ 5] = 1;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        MyBase::mm[ 6] = 0;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        MyBase::mm[ 7] = 0;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        MyBase::mm[ 8] = 0;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        MyBase::mm[ 9] = 0;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        MyBase::mm[10] = 1;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        MyBase::mm[11] = 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        MyBase::mm[12] = 0;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        MyBase::mm[13] = 0;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        MyBase::mm[14] = 0;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        MyBase::mm[15] = 1;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    /// Set upper left to a Mat3</span></div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#adad43709ee54eb7b3dc9c1f283ce7a91">  304</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#adad43709ee54eb7b3dc9c1f283ce7a91">setMat3</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html">Mat3&lt;T&gt;</a> &amp;m)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; 3; j++)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                MyBase::mm[i*4+j] = m[i][j];</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a4932169c6f880b6b2c3d8f48928788ab">  311</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html">Mat3&lt;T&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a4932169c6f880b6b2c3d8f48928788ab">getMat3</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html">Mat3&lt;T&gt;</a> m;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                m[i][j] = MyBase::mm[i*4+j];</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> m;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">    /// Return the translation component</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#af94576a217cee27acbd0a5da6663a7db">  323</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#af94576a217cee27acbd0a5da6663a7db">getTranslation</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a>(MyBase::mm[12], MyBase::mm[13], MyBase::mm[14]);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a88fe526682c68a40911ab19cf6deb625">  328</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a88fe526682c68a40911ab19cf6deb625">setTranslation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;t)</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        MyBase::mm[12] = t[0];</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        MyBase::mm[13] = t[1];</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        MyBase::mm[14] = t[2];</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    /// Assignment operator</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Source&gt;</div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8388e3e849221e57cb9601f56d84460b">  337</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>&amp; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8388e3e849221e57cb9601f56d84460b">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;Source&gt;</a> &amp;m)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keyword">const</span> Source *src = m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">// don&#39;t suppress warnings when assigning from different numerical types</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        std::copy(src, (src + this-&gt;numElements()), MyBase::mm);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    /// Return @c true if this matrix is equivalent to @a m within a tolerance of @a eps.</span></div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2239aaff81254932a0dcf65333f276dc">  347</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2239aaff81254932a0dcf65333f276dc">eq</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a> &amp;m, T eps=1.0e-8)<span class="keyword"> const</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#aac4da3e67cc928274ae7134c7afb83cf">isApproxEqual</a>(MyBase::mm[i], m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i], eps))</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">    /// Negation operator, for e.g.   m1 = -m2;</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ae5fb13158e0e81260e69dff3915b4b26">  357</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ae5fb13158e0e81260e69dff3915b4b26">operator-</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>(</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                       -MyBase::mm[ 0], -MyBase::mm[ 1], -MyBase::mm[ 2], -MyBase::mm[ 3],</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                       -MyBase::mm[ 4], -MyBase::mm[ 5], -MyBase::mm[ 6], -MyBase::mm[ 7],</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                       -MyBase::mm[ 8], -MyBase::mm[ 9], -MyBase::mm[10], -MyBase::mm[11],</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                       -MyBase::mm[12], -MyBase::mm[13], -MyBase::mm[14], -MyBase::mm[15]</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                       );</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    } <span class="comment">// trivial</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">    /// Multiply each element of this matrix by @a scalar.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S&gt;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac8aacd8fbff44f48de698b93a31b7913">  369</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac8aacd8fbff44f48de698b93a31b7913">operator*=</a>(S scalar)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        MyBase::mm[ 0] *= scalar;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        MyBase::mm[ 1] *= scalar;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        MyBase::mm[ 2] *= scalar;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        MyBase::mm[ 3] *= scalar;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        MyBase::mm[ 4] *= scalar;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        MyBase::mm[ 5] *= scalar;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        MyBase::mm[ 6] *= scalar;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        MyBase::mm[ 7] *= scalar;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        MyBase::mm[ 8] *= scalar;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        MyBase::mm[ 9] *= scalar;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        MyBase::mm[10] *= scalar;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        MyBase::mm[11] *= scalar;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        MyBase::mm[12] *= scalar;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        MyBase::mm[13] *= scalar;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        MyBase::mm[14] *= scalar;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        MyBase::mm[15] *= scalar;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    /// Add each element of the given matrix to the corresponding element of this matrix.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S&gt;</div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7192ad4c0ffc0a3f632b8cf75a719f26">  395</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7192ad4c0ffc0a3f632b8cf75a719f26">operator+=</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;S&gt;</a> &amp;m1)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keyword">const</span> S* s = m1.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        MyBase::mm[ 0] += s[ 0];</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        MyBase::mm[ 1] += s[ 1];</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        MyBase::mm[ 2] += s[ 2];</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        MyBase::mm[ 3] += s[ 3];</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        MyBase::mm[ 4] += s[ 4];</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        MyBase::mm[ 5] += s[ 5];</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        MyBase::mm[ 6] += s[ 6];</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        MyBase::mm[ 7] += s[ 7];</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        MyBase::mm[ 8] += s[ 8];</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        MyBase::mm[ 9] += s[ 9];</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        MyBase::mm[10] += s[10];</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        MyBase::mm[11] += s[11];</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        MyBase::mm[12] += s[12];</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        MyBase::mm[13] += s[13];</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        MyBase::mm[14] += s[14];</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        MyBase::mm[15] += s[15];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">    /// Subtract each element of the given matrix from the corresponding element of this matrix.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S&gt;</div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad647c7d2b6246e17671289edf08f45f1">  424</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad647c7d2b6246e17671289edf08f45f1">operator-=</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;S&gt;</a> &amp;m1)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keyword">const</span> S* s = m1.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        MyBase::mm[ 0] -= s[ 0];</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        MyBase::mm[ 1] -= s[ 1];</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        MyBase::mm[ 2] -= s[ 2];</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        MyBase::mm[ 3] -= s[ 3];</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        MyBase::mm[ 4] -= s[ 4];</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        MyBase::mm[ 5] -= s[ 5];</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        MyBase::mm[ 6] -= s[ 6];</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        MyBase::mm[ 7] -= s[ 7];</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        MyBase::mm[ 8] -= s[ 8];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        MyBase::mm[ 9] -= s[ 9];</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        MyBase::mm[10] -= s[10];</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        MyBase::mm[11] -= s[11];</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        MyBase::mm[12] -= s[12];</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        MyBase::mm[13] -= s[13];</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        MyBase::mm[14] -= s[14];</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        MyBase::mm[15] -= s[15];</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    /// Multiply this matrix by the given matrix.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> S&gt;</div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a9adf02885b273ef7b0ac15e9f8c8c13f">  453</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a9adf02885b273ef7b0ac15e9f8c8c13f">operator*=</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;S&gt;</a> &amp;m1)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> m0(*<span class="keyword">this</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">const</span> T* s0 = m0.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keyword">const</span> S* s1 = m1.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordtype">int</span> i4 = 4 * i;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            MyBase::mm[i4+0] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(s0[i4+0] * s1[ 0] +</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                              s0[i4+1] * s1[ 4] +</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                              s0[i4+2] * s1[ 8] +</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                              s0[i4+3] * s1[12]);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            MyBase::mm[i4+1] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(s0[i4+0] * s1[ 1] +</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                              s0[i4+1] * s1[ 5] +</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                              s0[i4+2] * s1[ 9] +</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                              s0[i4+3] * s1[13]);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            MyBase::mm[i4+2] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(s0[i4+0] * s1[ 2] +</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                              s0[i4+1] * s1[ 6] +</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                              s0[i4+2] * s1[10] +</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                              s0[i4+3] * s1[14]);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            MyBase::mm[i4+3] = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(s0[i4+0] * s1[ 3] +</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                              s0[i4+1] * s1[ 7] +</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                              s0[i4+2] * s1[11] +</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                              s0[i4+3] * s1[15]);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    /// @return transpose of this</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8109d997fd3a616f735ff95df91e37e1">  486</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8109d997fd3a616f735ff95df91e37e1">transpose</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>(</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                       MyBase::mm[ 0], MyBase::mm[ 4], MyBase::mm[ 8], MyBase::mm[12],</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                       MyBase::mm[ 1], MyBase::mm[ 5], MyBase::mm[ 9], MyBase::mm[13],</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                       MyBase::mm[ 2], MyBase::mm[ 6], MyBase::mm[10], MyBase::mm[14],</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                       MyBase::mm[ 3], MyBase::mm[ 7], MyBase::mm[11], MyBase::mm[15]</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                       );</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">    /// @return inverse of this</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">    /// @throw ArithmeticError if singular</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a26a6d7acc07d370764b895b848f846e0">  499</a></span>&#160;<span class="comment"></span>    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a26a6d7acc07d370764b895b848f846e0">inverse</a>(T tolerance = 0)<span class="keyword"> const</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="comment">// inv [ A  | b ]  =  [ E  | f ]    A: 3x3, b: 3x1, c&#39;: 1x3 d: 1x1</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="comment">//     [ c&#39; | d ]     [ g&#39; | h ]</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">// If A is invertible use</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">//   E  = A^-1 + p*h*r</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="comment">//   p  = A^-1 * b</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">//   f  = -p * h</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment">//   g&#39; = -h * c&#39;</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">//   h  = 1 / (d - c&#39;*p)</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="comment">//   r&#39; = c&#39;*A^-1</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="comment">// Otherwise use gauss-jordan elimination</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="comment">// We create this alias to ourself so we can easily use own subscript</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="comment">// operator.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m(*<span class="keyword">this</span>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        T m0011 = m[0][0] * m[1][1];</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        T m0012 = m[0][0] * m[1][2];</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        T m0110 = m[0][1] * m[1][0];</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        T m0210 = m[0][2] * m[1][0];</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        T m0120 = m[0][1] * m[2][0];</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        T m0220 = m[0][2] * m[2][0];</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        T detA = m0011 * m[2][2] - m0012 * m[2][1] - m0110 * m[2][2]</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;               + m0210 * m[2][1] + m0120 * m[1][2] - m0220 * m[1][1];</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordtype">bool</span> hasPerspective =</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                (!<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(m[0][3], T(0.0)) ||</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                 !<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(m[1][3], T(0.0)) ||</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                 !<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(m[2][3], T(0.0)) ||</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                 !<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(m[3][3], T(1.0)));</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        T det;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span> (hasPerspective) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            det = m[0][3] * det3(m, 1,2,3, 0,2,1)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                + m[1][3] * det3(m, 2,0,3, 0,2,1)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                + m[2][3] * det3(m, 3,0,1, 0,2,1)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                + m[3][3] * detA;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            det = detA * m[3][3];</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> inv;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordtype">bool</span> invertible;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#aac4da3e67cc928274ae7134c7afb83cf">isApproxEqual</a>(det,T(0.0),tolerance)) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            invertible = <span class="keyword">false</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#aac4da3e67cc928274ae7134c7afb83cf">isApproxEqual</a>(detA,T(0.0),T(1e-8))) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="comment">// det is too small to rely on inversion by subblocks</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            invertible = m.invert(inv, tolerance);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            invertible = <span class="keyword">true</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            detA = 1.0 / detA;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="comment">// Calculate A^-1</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            inv[0][0] = detA * ( m[1][1] * m[2][2] - m[1][2] * m[2][1]);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            inv[0][1] = detA * (-m[0][1] * m[2][2] + m[0][2] * m[2][1]);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            inv[0][2] = detA * ( m[0][1] * m[1][2] - m[0][2] * m[1][1]);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            inv[1][0] = detA * (-m[1][0] * m[2][2] + m[1][2] * m[2][0]);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            inv[1][1] = detA * ( m[0][0] * m[2][2] - m0220);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            inv[1][2] = detA * ( m0210   - m0012);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            inv[2][0] = detA * ( m[1][0] * m[2][1] - m[1][1] * m[2][0]);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            inv[2][1] = detA * ( m0120 - m[0][0] * m[2][1]);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            inv[2][2] = detA * ( m0011 - m0110);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">if</span> (hasPerspective) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="comment">//</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="comment">// Calculate r, p, and h</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="comment">//</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> r;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                r[0] = m[3][0] * inv[0][0] + m[3][1] * inv[1][0]</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                     + m[3][2] * inv[2][0];</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                r[1] = m[3][0] * inv[0][1] + m[3][1] * inv[1][1]</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                     + m[3][2] * inv[2][1];</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                r[2] = m[3][0] * inv[0][2] + m[3][1] * inv[1][2]</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                     + m[3][2] * inv[2][2];</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> p;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                p[0] = inv[0][0] * m[0][3] + inv[0][1] * m[1][3]</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                     + inv[0][2] * m[2][3];</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                p[1] = inv[1][0] * m[0][3] + inv[1][1] * m[1][3]</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                     + inv[1][2] * m[2][3];</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                p[2] = inv[2][0] * m[0][3] + inv[2][1] * m[1][3]</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                     + inv[2][2] * m[2][3];</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                T h = m[3][3] - p.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a2578e437cc5c4c0cdd1b3fa7134ea323">dot</a>(<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a>(m[3][0],m[3][1],m[3][2]));</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#aac4da3e67cc928274ae7134c7afb83cf">isApproxEqual</a>(h,T(0.0),tolerance)) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    invertible = <span class="keyword">false</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    h = 1.0 / h;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    <span class="comment">//</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    <span class="comment">// Calculate h, g, and f</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    <span class="comment">//</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    inv[3][3] = h;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    inv[3][0] = -h * r[0];</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    inv[3][1] = -h * r[1];</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    inv[3][2] = -h * r[2];</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    inv[0][3] = -h * p[0];</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    inv[1][3] = -h * p[1];</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    inv[2][3] = -h * p[2];</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    <span class="comment">//</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <span class="comment">// Calculate E</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <span class="comment">//</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    p *= h;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    inv[0][0] += p[0] * r[0];</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    inv[0][1] += p[0] * r[1];</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    inv[0][2] += p[0] * r[2];</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    inv[1][0] += p[1] * r[0];</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    inv[1][1] += p[1] * r[1];</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    inv[1][2] += p[1] * r[2];</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    inv[2][0] += p[2] * r[0];</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    inv[2][1] += p[2] * r[1];</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    inv[2][2] += p[2] * r[2];</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="comment">// Equations are much simpler in the non-perspective case</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                inv[3][0] = - (m[3][0] * inv[0][0] + m[3][1] * inv[1][0]</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                + m[3][2] * inv[2][0]);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                inv[3][1] = - (m[3][0] * inv[0][1] + m[3][1] * inv[1][1]</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                + m[3][2] * inv[2][1]);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                inv[3][2] = - (m[3][0] * inv[0][2] + m[3][1] * inv[1][2]</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                + m[3][2] * inv[2][2]);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                inv[0][3] = 0.0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                inv[1][3] = 0.0;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                inv[2][3] = 0.0;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                inv[3][3] = 1.0;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">if</span> (!invertible) <a class="code" href="openvdb_2Exceptions_8h.html#a3eec2ef3138c64fc5844490187c1b8d1">OPENVDB_THROW</a>(<a class="code" href="classopenvdb_1_1v9__0_1_1ArithmeticError.html">ArithmeticError</a>, <span class="stringliteral">&quot;Inversion of singular 4x4 matrix&quot;</span>);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">return</span> inv;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">    /// Determinant of matrix</span></div><div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a67ccc6cfa482de0cf47a6ff7124a2b81">  651</a></span>&#160;<span class="comment"></span>    T <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a67ccc6cfa482de0cf47a6ff7124a2b81">det</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keyword">const</span> T *ap;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html">Mat3&lt;T&gt;</a> submat;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        T       det;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        T       *sp;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordtype">int</span>     i, j, k, sign;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        det = 0;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        sign = 1;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            ap = &amp;MyBase::mm[ 0];</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            sp = submat.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; 4; k++) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="keywordflow">if</span> ((k != i) &amp;&amp; (j != 0)) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        *sp++ = *ap;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                    ap++;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            det += T(sign) * MyBase::mm[i] * submat.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html#a67ccc6cfa482de0cf47a6ff7124a2b81">det</a>();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            sign = -sign;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">return</span> det;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">    /// Sets the matrix to a matrix that translates by v</span></div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a54bfdafb84268d331ea8dd5abecd9579">  681</a></span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a54bfdafb84268d331ea8dd5abecd9579">translation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3d</a>&amp; v)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4</a>(</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            T(1),     T(0),    T(0),     T(0),</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            T(0),     T(1),    T(0),     T(0),</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            T(0),     T(0),    T(1),     T(0),</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            T(v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>()), T(v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>()),T(v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>()), T(1));</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">    /// Sets the matrix to a matrix that translates by v</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8f656f58c602f9bda786a57c448920d4">  692</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8f656f58c602f9bda786a57c448920d4">setToTranslation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; v)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        MyBase::mm[ 0] = 1;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        MyBase::mm[ 1] = 0;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        MyBase::mm[ 2] = 0;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        MyBase::mm[ 3] = 0;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        MyBase::mm[ 4] = 0;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        MyBase::mm[ 5] = 1;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        MyBase::mm[ 6] = 0;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        MyBase::mm[ 7] = 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        MyBase::mm[ 8] = 0;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        MyBase::mm[ 9] = 0;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        MyBase::mm[10] = 1;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        MyBase::mm[11] = 0;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        MyBase::mm[12] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        MyBase::mm[13] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        MyBase::mm[14] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        MyBase::mm[15] = 1;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    /// Left multiples by the specified translation, i.e.  Trans * (*this)</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2ea9bf4884840c97e8055d7dedc127b0">  717</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2ea9bf4884840c97e8055d7dedc127b0">preTranslate</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; tr)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> tmp(tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>(), tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>(), tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>());</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> Tr = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;::translation</a>(tmp);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        *<span class="keyword">this</span> =  Tr * (*this);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">    /// Right multiplies by the specified translation matrix, i.e. (*this) * Trans</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a051d1c234447df316d9e611c13b526f6">  728</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a051d1c234447df316d9e611c13b526f6">postTranslate</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; tr)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> tmp(tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>(), tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>(), tr.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>());</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> Tr = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;::translation</a>(tmp);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        *<span class="keyword">this</span> = (*this) * Tr;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">    /// Sets the matrix to a matrix that scales by v</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a48787960db8612ebca270560134278f4">  740</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a48787960db8612ebca270560134278f4">setToScale</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; v)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        this-&gt;setIdentity();</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        MyBase::mm[ 0] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        MyBase::mm[ 5] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        MyBase::mm[10] = v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// Left multiples by the specified scale matrix, i.e. Sc * (*this)</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1442bceaea3367cd5b2d2ff89d0d1b4b">  750</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1442bceaea3367cd5b2d2ff89d0d1b4b">preScale</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; v)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        MyBase::mm[ 0] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        MyBase::mm[ 1] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        MyBase::mm[ 2] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        MyBase::mm[ 3] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        MyBase::mm[ 4] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        MyBase::mm[ 5] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        MyBase::mm[ 6] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        MyBase::mm[ 7] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        MyBase::mm[ 8] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        MyBase::mm[ 9] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        MyBase::mm[10] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        MyBase::mm[11] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// Right multiples by the specified scale matrix, i.e. (*this) * Sc</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac144e1db0c68fd87748e27fe4d96f80a">  772</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac144e1db0c68fd87748e27fe4d96f80a">postScale</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>&amp; v)</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        MyBase::mm[ 0] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        MyBase::mm[ 1] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        MyBase::mm[ 2] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        MyBase::mm[ 4] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        MyBase::mm[ 5] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        MyBase::mm[ 6] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        MyBase::mm[ 8] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        MyBase::mm[ 9] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        MyBase::mm[10] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        MyBase::mm[12] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">x</a>();</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        MyBase::mm[13] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">y</a>();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        MyBase::mm[14] *= v.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">z</a>();</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">    /// @brief Sets the matrix to a rotation about the given axis.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    /// @param axis The axis (one of X, Y, Z) to rotate about.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">    /// @param angle The rotation angle, in radians.</span></div><div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a685d4df4285b296c70bc8dbd8a46484a">  797</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a685d4df4285b296c70bc8dbd8a46484a">setToRotation</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>) {*<span class="keyword">this</span> = rotation&lt;Mat4&lt;T&gt; &gt;(axis, <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>);}</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">    /// @brief Sets the matrix to a rotation about an arbitrary axis</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">    /// @param axis The axis of rotation (cannot be zero-length)</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">    /// @param angle The rotation angle, in radians.</span></div><div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a45287dd453383615dcb732a3e54df92a">  802</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a45287dd453383615dcb732a3e54df92a">setToRotation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a>&amp; axis, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>) {*<span class="keyword">this</span> = rotation&lt;Mat4&lt;T&gt; &gt;(axis, <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>);}</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">    /// @brief Sets the matrix to a rotation that maps v1 onto v2 about the cross</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">    /// product of v1 and v2.</span></div><div class="line"><a name="l00806"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8e67c2d44a8b038838fb6e49d8a37ef3">  806</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8e67c2d44a8b038838fb6e49d8a37ef3">setToRotation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a>&amp; v1, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a>&amp; v2) {*<span class="keyword">this</span> = rotation&lt;Mat4&lt;T&gt; &gt;(v1, v2);}</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">    /// @brief Left multiplies by a rotation clock-wiseabout the given axis into this matrix.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">    /// @param axis The axis (one of X, Y, Z) of rotation.</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">    /// @param angle The clock-wise rotation angle, in radians.</span></div><div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a553dbb93ea3eb9ccf0e075123bb48b90">  812</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a553dbb93ea3eb9ccf0e075123bb48b90">preRotate</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        T c = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(cos(angle));</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        T s = -<span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(sin(angle)); <span class="comment">// the &quot;-&quot; makes it clockwise</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">switch</span> (axis) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33">X_AXIS</a>:</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                T a4, a5, a6, a7;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                a4 = c * MyBase::mm[ 4] - s * MyBase::mm[ 8];</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                a5 = c * MyBase::mm[ 5] - s * MyBase::mm[ 9];</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                a6 = c * MyBase::mm[ 6] - s * MyBase::mm[10];</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                a7 = c * MyBase::mm[ 7] - s * MyBase::mm[11];</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                MyBase::mm[ 8] = s * MyBase::mm[ 4] + c * MyBase::mm[ 8];</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                MyBase::mm[ 9] = s * MyBase::mm[ 5] + c * MyBase::mm[ 9];</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                MyBase::mm[10] = s * MyBase::mm[ 6] + c * MyBase::mm[10];</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                MyBase::mm[11] = s * MyBase::mm[ 7] + c * MyBase::mm[11];</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                MyBase::mm[ 4] = a4;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                MyBase::mm[ 5] = a5;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                MyBase::mm[ 6] = a6;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                MyBase::mm[ 7] = a7;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0">Y_AXIS</a>:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                T a0, a1, a2, a3;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                a0 = c * MyBase::mm[ 0] + s * MyBase::mm[ 8];</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                a1 = c * MyBase::mm[ 1] + s * MyBase::mm[ 9];</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                a2 = c * MyBase::mm[ 2] + s * MyBase::mm[10];</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                a3 = c * MyBase::mm[ 3] + s * MyBase::mm[11];</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                MyBase::mm[ 8] = -s * MyBase::mm[ 0] + c * MyBase::mm[ 8];</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                MyBase::mm[ 9] = -s * MyBase::mm[ 1] + c * MyBase::mm[ 9];</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                MyBase::mm[10] = -s * MyBase::mm[ 2] + c * MyBase::mm[10];</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                MyBase::mm[11] = -s * MyBase::mm[ 3] + c * MyBase::mm[11];</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                MyBase::mm[ 0] = a0;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                MyBase::mm[ 1] = a1;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                MyBase::mm[ 2] = a2;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                MyBase::mm[ 3] = a3;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f">Z_AXIS</a>:</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                T a0, a1, a2, a3;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                a0 = c * MyBase::mm[ 0] - s * MyBase::mm[ 4];</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                a1 = c * MyBase::mm[ 1] - s * MyBase::mm[ 5];</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                a2 = c * MyBase::mm[ 2] - s * MyBase::mm[ 6];</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                a3 = c * MyBase::mm[ 3] - s * MyBase::mm[ 7];</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                MyBase::mm[ 4] = s * MyBase::mm[ 0] + c * MyBase::mm[ 4];</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                MyBase::mm[ 5] = s * MyBase::mm[ 1] + c * MyBase::mm[ 5];</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                MyBase::mm[ 6] = s * MyBase::mm[ 2] + c * MyBase::mm[ 6];</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                MyBase::mm[ 7] = s * MyBase::mm[ 3] + c * MyBase::mm[ 7];</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                MyBase::mm[ 0] = a0;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                MyBase::mm[ 1] = a1;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                MyBase::mm[ 2] = a2;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                MyBase::mm[ 3] = a3;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            assert(axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33">X_AXIS</a> || axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0">Y_AXIS</a> || axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f">Z_AXIS</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">    /// @brief Right multiplies by a rotation clock-wiseabout the given axis into this matrix.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">    /// @param axis The axis (one of X, Y, Z) of rotation.</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">    /// @param angle The clock-wise rotation angle, in radians.</span></div><div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a33aea91c54ba93aecc1a648e464f89a8">  892</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a33aea91c54ba93aecc1a648e464f89a8">postRotate</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">angle</a>)</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        T c = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(cos(angle));</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        T s = -<span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(sin(angle)); <span class="comment">// the &quot;-&quot; makes it clockwise</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">switch</span> (axis) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33">X_AXIS</a>:</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                T a2, a6, a10, a14;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                a2  = c * MyBase::mm[ 2] - s * MyBase::mm[ 1];</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                a6  = c * MyBase::mm[ 6] - s * MyBase::mm[ 5];</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                a10 = c * MyBase::mm[10] - s * MyBase::mm[ 9];</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                a14 = c * MyBase::mm[14] - s * MyBase::mm[13];</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                MyBase::mm[ 1] = c * MyBase::mm[ 1] + s * MyBase::mm[ 2];</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                MyBase::mm[ 5] = c * MyBase::mm[ 5] + s * MyBase::mm[ 6];</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                MyBase::mm[ 9] = c * MyBase::mm[ 9] + s * MyBase::mm[10];</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                MyBase::mm[13] = c * MyBase::mm[13] + s * MyBase::mm[14];</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                MyBase::mm[ 2] = a2;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                MyBase::mm[ 6] = a6;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                MyBase::mm[10] = a10;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                MyBase::mm[14] = a14;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0">Y_AXIS</a>:</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                T a2, a6, a10, a14;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                a2  = c * MyBase::mm[ 2] + s * MyBase::mm[ 0];</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                a6  = c * MyBase::mm[ 6] + s * MyBase::mm[ 4];</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                a10 = c * MyBase::mm[10] + s * MyBase::mm[ 8];</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                a14 = c * MyBase::mm[14] + s * MyBase::mm[12];</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                MyBase::mm[ 0] = c * MyBase::mm[ 0] - s * MyBase::mm[ 2];</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                MyBase::mm[ 4] = c * MyBase::mm[ 4] - s * MyBase::mm[ 6];</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                MyBase::mm[ 8] = c * MyBase::mm[ 8] - s * MyBase::mm[10];</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                MyBase::mm[12] = c * MyBase::mm[12] - s * MyBase::mm[14];</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                MyBase::mm[ 2] = a2;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                MyBase::mm[ 6] = a6;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                MyBase::mm[10] = a10;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                MyBase::mm[14] = a14;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f">Z_AXIS</a>:</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                T a1, a5, a9, a13;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                a1  = c * MyBase::mm[ 1] - s * MyBase::mm[ 0];</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                a5  = c * MyBase::mm[ 5] - s * MyBase::mm[ 4];</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                a9  = c * MyBase::mm[ 9] - s * MyBase::mm[ 8];</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                a13 = c * MyBase::mm[13] - s * MyBase::mm[12];</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                MyBase::mm[ 0] = c * MyBase::mm[ 0] + s * MyBase::mm[ 1];</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                MyBase::mm[ 4] = c * MyBase::mm[ 4] + s * MyBase::mm[ 5];</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                MyBase::mm[ 8] = c * MyBase::mm[ 8] + s * MyBase::mm[ 9];</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                MyBase::mm[12] = c * MyBase::mm[12] + s * MyBase::mm[13];</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                MyBase::mm[ 1] = a1;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                MyBase::mm[ 5] = a5;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                MyBase::mm[ 9] = a9;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                MyBase::mm[13] = a13;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            assert(axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33">X_AXIS</a> || axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0">Y_AXIS</a> || axis==<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f">Z_AXIS</a>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">    /// @brief Sets the matrix to a shear along axis0 by a fraction of axis1.</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">    /// @param axis0 The fixed axis of the shear.</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">    /// @param axis1 The shear axis.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">    /// @param shearby The shear factor.</span></div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a5b663434a1d79dac075e03314a139136">  974</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a5b663434a1d79dac075e03314a139136">setToShear</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis0, <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis1, T shearby)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        *<span class="keyword">this</span> = shear&lt;Mat4&lt;T&gt; &gt;(axis0, axis1, shearby);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">    /// @brief Left multiplies a shearing transformation into the matrix.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">    /// @see setToShear</span></div><div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a788febd9a66a36a1c19f607079e61291">  982</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a788febd9a66a36a1c19f607079e61291">preShear</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis0, <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis1, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a9380353378ddeacf6f55ea83ea2fc88e">shear</a>)</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keywordtype">int</span> index0 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(axis0);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordtype">int</span> index1 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(axis1);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="comment">// to row &quot;index1&quot; add a multiple of the index0 row</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        MyBase::mm[index1 * 4 + 0] += shear * MyBase::mm[index0 * 4 + 0];</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        MyBase::mm[index1 * 4 + 1] += shear * MyBase::mm[index0 * 4 + 1];</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        MyBase::mm[index1 * 4 + 2] += shear * MyBase::mm[index0 * 4 + 2];</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        MyBase::mm[index1 * 4 + 3] += shear * MyBase::mm[index0 * 4 + 3];</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">    /// @brief Right multiplies a shearing transformation into the matrix.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">    /// @see setToShear</span></div><div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a63c1c6744beeceedaa2b3bafe94aaf48">  997</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a63c1c6744beeceedaa2b3bafe94aaf48">postShear</a>(<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis0, <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">Axis</a> axis1, T <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a9380353378ddeacf6f55ea83ea2fc88e">shear</a>)</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordtype">int</span> index0 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(axis0);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordtype">int</span> index1 = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(axis1);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="comment">// to collumn &quot;index0&quot; add a multiple of the index1 row</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        MyBase::mm[index0 +  0] += shear * MyBase::mm[index1 +  0];</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        MyBase::mm[index0 +  4] += shear * MyBase::mm[index1 +  4];</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        MyBase::mm[index0 +  8] += shear * MyBase::mm[index1 +  8];</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        MyBase::mm[index0 + 12] += shear * MyBase::mm[index1 + 12];</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">    /// Transform a Vec4 by post-multiplication.</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa98b5754979a7c680da6bbab8b8e8d85"> 1012</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa98b5754979a7c680da6bbab8b8e8d85">transform</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> &amp;v)<span class="keyword"> const</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> <span class="keyword">&gt;</span>(v * *<span class="keyword">this</span>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">    /// Transform a Vec3 by post-multiplication, without homogenous division.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a66c7c913e921933b40c68c12c71626f9"> 1019</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a66c7c913e921933b40c68c12c71626f9">transform</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> &amp;v)<span class="keyword"> const</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <span class="keyword">&gt;</span>(v * *<span class="keyword">this</span>);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">    /// Transform a Vec4 by pre-multiplication.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a30b6f926de87ee5c9fa638c51535707d"> 1026</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a30b6f926de87ee5c9fa638c51535707d">pretransform</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> &amp;v)<span class="keyword"> const</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T0&gt;</a> <span class="keyword">&gt;</span>(*<span class="keyword">this</span> * v);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">    /// Transform a Vec3 by pre-multiplication, without homogenous division.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aaf30abe93cba053480ccaa110aa13c3b"> 1033</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aaf30abe93cba053480ccaa110aa13c3b">pretransform</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> &amp;v)<span class="keyword"> const</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <span class="keyword">&gt;</span>(*<span class="keyword">this</span> * v);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">    /// Transform a Vec3 by post-multiplication, doing homogenous divison.</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01040"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a0a00e0cee96464deef181d12adb43c5d"> 1040</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a0a00e0cee96464deef181d12adb43c5d">transformH</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> &amp;p)<span class="keyword"> const</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        T0  w;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="comment">// w = p * (*this).col(3);</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        w = <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>(p[0] * MyBase::mm[ 3] + p[1] * MyBase::mm[ 7]</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            + p[2] * MyBase::mm[11] + MyBase::mm[15]);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(w , 0.0) ) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>(<span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 0] + p[1] * MyBase::mm[ 4] +</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                                             p[2] * MyBase::mm[ 8] + MyBase::mm[12]) / w),</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 1] + p[1] * MyBase::mm[ 5] +</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                                             p[2] * MyBase::mm[ 9] + MyBase::mm[13]) / w),</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 2] + p[1] * MyBase::mm[ 6] +</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                                             p[2] * MyBase::mm[10] + MyBase::mm[14]) / w));</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>(0, 0, 0);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">    /// Transform a Vec3 by pre-multiplication, doing homogenous division.</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a955f5393e942df350011b7e4fdb37ce4"> 1062</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a955f5393e942df350011b7e4fdb37ce4">pretransformH</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> &amp;p)<span class="keyword"> const</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        T0  w;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="comment">// w = p * (*this).col(3);</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        w = p[0] * MyBase::mm[12] + p[1] * MyBase::mm[13] + p[2] * MyBase::mm[14] + MyBase::mm[15];</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(w , 0.0) ) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>(<span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 0] + p[1] * MyBase::mm[ 1] +</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                                             p[2] * MyBase::mm[ 2] + MyBase::mm[ 3]) / w),</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 4] + p[1] * MyBase::mm[ 5] +</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                                             p[2] * MyBase::mm[ 6] + MyBase::mm[ 7]) / w),</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>((p[0] * MyBase::mm[ 8]  + p[1] * MyBase::mm[ 9] +</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                             p[2] * MyBase::mm[10] + MyBase::mm[11]) / w));</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>(0, 0, 0);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">    /// Transform a Vec3 by post-multiplication, without translation.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0&gt;</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad7ddb61aa28cebf719bdf59719c875bc"> 1083</a></span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad7ddb61aa28cebf719bdf59719c875bc">transform3x3</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a> &amp;v)<span class="keyword"> const</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T0&gt;</a>(</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>(v[0] * MyBase::mm[ 0] + v[1] * MyBase::mm[ 4] + v[2] * MyBase::mm[ 8]),</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            static_cast&lt;T0&gt;(v[0] * MyBase::mm[ 1] + v[1] * MyBase::mm[ 5] + v[2] * MyBase::mm[ 9]),</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <span class="keyword">static_cast&lt;</span>T0<span class="keyword">&gt;</span>(v[0] * MyBase::mm[ 2] + v[1] * MyBase::mm[ 6] + v[2] * MyBase::mm[10]));</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordtype">bool</span> invert(<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;inverse, T tolerance) <span class="keyword">const</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    T det2(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;a, <span class="keywordtype">int</span> i0, <span class="keywordtype">int</span> i1, <span class="keywordtype">int</span> j0, <span class="keywordtype">int</span> j1)<span class="keyword"> const </span>{</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordtype">int</span> i0row = i0 * 4;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordtype">int</span> i1row = i1 * 4;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">return</span> a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i0row+j0]*a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i1row+j1] - a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i0row+j1]*a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i1row+j0];</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    T det3(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;a, <span class="keywordtype">int</span> i0, <span class="keywordtype">int</span> i1, <span class="keywordtype">int</span> i2,</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;           <span class="keywordtype">int</span> j0, <span class="keywordtype">int</span> j1, <span class="keywordtype">int</span> j2)<span class="keyword"> const </span>{</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordtype">int</span> i0row = i0 * 4;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span> a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i0row+j0]*det2(a, i1,i2, j1,j2) +</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i0row+j1]*det2(a, i1,i2, j2,j0) +</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            a.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">mm</a>[i0row+j2]*det2(a, i1,i2, j0,j1);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}; <span class="comment">// class Mat4</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// @brief Equality operator, does exact floating point comparisons</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a679a33cc9a91af7a67b3a65bc61c9774"> 1114</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a679a33cc9a91af7a67b3a65bc61c9774">operator==</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T1&gt;</a> &amp;m1)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;{</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keyword">const</span> T0 *t0 = m0.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keyword">const</span> T1 *t1 = m1.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;16; ++i) <span class="keywordflow">if</span> (!<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(t0[i], t1[i])) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">/// @brief Inequality operator, does exact floating point comparisons</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab6fc63084c691d2dab40d617ea6651ca"> 1126</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab6fc63084c691d2dab40d617ea6651ca">operator!=</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T1&gt;</a> &amp;m1) { <span class="keywordflow">return</span> !(m0 == m1); }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">/// @brief Multiply each element of the given matrix by @a scalar and return the result.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> S, <span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa9be65e76ae6c34be7cfcf0920c8ab2e"> 1131</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;S, T&gt;::type</a>&gt; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa9be65e76ae6c34be7cfcf0920c8ab2e">operator*</a>(S scalar, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;m)</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;{</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">return</span> m*scalar;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;}</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">/// @brief Multiply each element of the given matrix by @a scalar and return the result.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> S, <span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a3c8dfb84ee5364be6e46ad2e957227ac"> 1139</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;S, T&gt;::type</a>&gt; <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a3c8dfb84ee5364be6e46ad2e957227ac">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;m, S scalar)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;S, T&gt;::type</a>&gt; result(m);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    result *= scalar;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">/// @brief Multiply @a _m by @a _v and return the resulting vector.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> MT&gt;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;typename promote&lt;T, MT&gt;::type</a>&gt;</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aef4da8365964b954dbf45fc89b478c3b"> 1150</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aef4da8365964b954dbf45fc89b478c3b">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;MT&gt;</a> &amp;_m,</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;          <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;_v)</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;{</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    MT <span class="keyword">const</span> *m = _m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;typename promote&lt;T, MT&gt;::type</a>&gt;(</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        _v[0]*m[0]  + _v[1]*m[1]  + _v[2]*m[2]  + _v[3]*m[3],</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        _v[0]*m[4]  + _v[1]*m[5]  + _v[2]*m[6]  + _v[3]*m[7],</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        _v[0]*m[8]  + _v[1]*m[9]  + _v[2]*m[10] + _v[3]*m[11],</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        _v[0]*m[12] + _v[1]*m[13] + _v[2]*m[14] + _v[3]*m[15]);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;}</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">/// @brief Multiply @a _v by @a _m and return the resulting vector.</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> MT&gt;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;typename promote&lt;T, MT&gt;::type</a>&gt;</div><div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a40b16531473bae42fced2e2af0ed3ef8"> 1165</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a40b16531473bae42fced2e2af0ed3ef8">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a> &amp;_v,</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;          <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;MT&gt;</a> &amp;_m)</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;{</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    MT <span class="keyword">const</span> *m = _m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;typename promote&lt;T, MT&gt;::type</a>&gt;(</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        _v[0]*m[0] + _v[1]*m[4] + _v[2]*m[8]  + _v[3]*m[12],</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        _v[0]*m[1] + _v[1]*m[5] + _v[2]*m[9]  + _v[3]*m[13],</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        _v[0]*m[2] + _v[1]*m[6] + _v[2]*m[10] + _v[3]*m[14],</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        _v[0]*m[3] + _v[1]*m[7] + _v[2]*m[11] + _v[3]*m[15]);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">/// @brief Multiply @a _m by @a _v and return the resulting vector.</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> MT&gt;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;typename promote&lt;T, MT&gt;::type</a>&gt;</div><div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6bb7dbbe6eac76c5ab56d14a44e42054"> 1180</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6bb7dbbe6eac76c5ab56d14a44e42054">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;MT&gt;</a> &amp;_m, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;_v)</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    MT <span class="keyword">const</span> *m = _m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;typename promote&lt;T, MT&gt;::type</a>&gt;(</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        _v[0]*m[0] + _v[1]*m[1] + _v[2]*m[2]  + m[3],</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        _v[0]*m[4] + _v[1]*m[5] + _v[2]*m[6]  + m[7],</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        _v[0]*m[8] + _v[1]*m[9] + _v[2]*m[10] + m[11]);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;}</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">/// @brief Multiply @a _v by @a _m and return the resulting vector.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> MT&gt;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;typename promote&lt;T, MT&gt;::type</a>&gt;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6c1c733f608528224d3921d30adafb75"> 1193</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6c1c733f608528224d3921d30adafb75">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T&gt;</a> &amp;_v, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;MT&gt;</a> &amp;_m)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    MT <span class="keyword">const</span> *m = _m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;typename promote&lt;T, MT&gt;::type</a>&gt;(</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        _v[0]*m[0] + _v[1]*m[4] + _v[2]*m[8]  + m[12],</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        _v[0]*m[1] + _v[1]*m[5] + _v[2]*m[9]  + m[13],</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        _v[0]*m[2] + _v[1]*m[6] + _v[2]*m[10] + m[14]);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">/// @brief Add corresponding elements of @a m0 and @a m1 and return the result.</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt;</div><div class="line"><a name="l01206"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1beb2d5aaa98378e767f9f0cd314a9f4"> 1206</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1beb2d5aaa98378e767f9f0cd314a9f4">operator+</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T1&gt;</a> &amp;m1)</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt; result(m0);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    result += m1;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;}</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">/// @brief Subtract corresponding elements of @a m0 and @a m1 and return the result.</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt;</div><div class="line"><a name="l01217"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab0af2cb0604fcc0bec0a63f0980ce3b6"> 1217</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab0af2cb0604fcc0bec0a63f0980ce3b6">operator-</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T1&gt;</a> &amp;m1)</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt; result(m0);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    result -= m1;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">/// @relates Mat4</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">/// @brief Multiply @a m0 by @a m1 and return the resulting matrix.</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt;</div><div class="line"><a name="l01228"></a><span class="lineno"><a class="line" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#acaedaf8e88143243abe7729a82507b65"> 1228</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#acaedaf8e88143243abe7729a82507b65">operator*</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T1&gt;</a> &amp;m1)</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;{</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;typename promote&lt;T0, T1&gt;::type</a>&gt; result(m0);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    result *= m1;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">/// Transform a Vec3 by pre-multiplication, without translation.</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">/// Presumes this matrix is inverse of coordinate transform</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">/// Synonymous to &quot;pretransform3x3&quot;</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span> T1&gt;</div><div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a04c26f943090a3608d0f3287e1b98965"> 1240</a></span>&#160;<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T1&gt;</a> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a04c26f943090a3608d0f3287e1b98965">transformNormal</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T0&gt;</a> &amp;m, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T1&gt;</a> &amp;n)</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;{</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">Vec3&lt;T1&gt;</a>(</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="keyword">static_cast&lt;</span>T1<span class="keyword">&gt;</span>(m[0][0]*n[0] + m[0][1]*n[1] + m[0][2]*n[2]),</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        static_cast&lt;T1&gt;(m[1][0]*n[0] + m[1][1]*n[1] + m[1][2]*n[2]),</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keyword">static_cast&lt;</span>T1<span class="keyword">&gt;</span>(m[2][0]*n[0] + m[2][1]*n[1] + m[2][2]*n[2]));</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">/// Invert via gauss-jordan elimination. Modified from dreamworks internal mx library</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;::invert</a>(<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> &amp;inverse, T tolerance)<span class="keyword"> const</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> temp(*<span class="keyword">this</span>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    inverse.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a382e6ad7e6721b121e510959e1011be3">setIdentity</a>();</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="comment">// Forward elimination step</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordtype">double</span> det = 1.0;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordtype">int</span> row = i;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1tools_1_1composite.html#af102709567b92b0c0bf370c1c3a918e4">max</a> = fabs(temp[i][i]);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = i+1; k &lt; 4; ++k) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="keywordflow">if</span> (fabs(temp[k][i]) &gt; max) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                row = k;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                max = fabs(temp[k][i]);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(max, 0.0)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="comment">// must move pivot to row i</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">if</span> (row != i) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            det = -det;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; ++k) {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                std::swap(temp[row][k], temp[i][k]);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                std::swap(inverse[row][k], inverse[i][k]);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal.html#a410ea7279cc4e32e6247fc7e42bf63bc">pivot</a> = temp[i][i];</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        det *= <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal.html#a410ea7279cc4e32e6247fc7e42bf63bc">pivot</a>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="comment">// scale row i</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; ++k) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            temp[i][k] /= <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal.html#a410ea7279cc4e32e6247fc7e42bf63bc">pivot</a>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            inverse[i][k] /= <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal.html#a410ea7279cc4e32e6247fc7e42bf63bc">pivot</a>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="comment">// eliminate in rows below i</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = i+1; j &lt; 4; ++j) {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="keywordtype">double</span> t = temp[j][i];</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(t, 0.0)) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <span class="comment">// subtract scaled row i from row j</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; ++k) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    temp[j][k] -= temp[i][k] * t;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    inverse[j][k] -= inverse[i][k] * t;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="comment">// Backward elimination step</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 3; i &gt; 0; --i) {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; ++j) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="keywordtype">double</span> t = temp[j][i];</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">isExactlyEqual</a>(t, 0.0)) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; ++k) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                    inverse[j][k] -= inverse[i][k]*t;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            }</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">return</span> det*det &gt;= tolerance*tolerance;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;}</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01318"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a44f0c199dc47774a9e6f6ed725d6df7d"> 1318</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a44f0c199dc47774a9e6f6ed725d6df7d">isAffine</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">return</span> (m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7f3f03ad0e44c62ba30750d445b4b1e9">col</a>(3) == <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a>(0, 0, 0, 1));</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a0a3ea1937d9cf1913bd9d95129206cd7"> 1323</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a0a3ea1937d9cf1913bd9d95129206cd7">hasTranslation</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">return</span> (m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6918ef84a51ab39533d827f31203c756">row</a>(3) != <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">Vec4&lt;T&gt;</a>(0, 0, 0, 1));</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;}</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a></div><div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#abdf1a11fc6c5bcf900462c7d6581c051"> 1329</a></span>&#160;<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#abdf1a11fc6c5bcf900462c7d6581c051">Abs</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m)</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a> out;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keyword">const</span> T* ip = m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    T* op = out.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 16; ++i, ++op, ++ip) *op = <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#abdf1a11fc6c5bcf900462c7d6581c051">math::Abs</a>(*ip);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">return</span> out;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Type1, <span class="keyword">typename</span> Type2&gt;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;Type1&gt;</a></div><div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a3cf25c344b7eaeaf4230764aa65f6a63"> 1340</a></span>&#160;<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a3cf25c344b7eaeaf4230764aa65f6a63">cwiseAdd</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;Type1&gt;</a>&amp; m, <span class="keyword">const</span> Type2 s)</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;{</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;Type1&gt;</a> out;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keyword">const</span> Type1* ip = m.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    Type1* op = out.<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">asPointer</a>();</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 16; ++i, ++op, ++ip) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="Platform_8h.html#a4f7375e7791cade4ae486a8ebb68056f">OPENVDB_NO_TYPE_CONVERSION_WARNING_BEGIN</a></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        *op = *ip + s;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="Platform_8h.html#ac13c11880cf8b8dd311a72e5a05b295d">OPENVDB_NO_TYPE_CONVERSION_WARNING_END</a></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">return</span> out;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span></div><div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a885fef1528b9fe3f9779b3aadd1333ec"> 1355</a></span>&#160;<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a885fef1528b9fe3f9779b3aadd1333ec">cwiseLessThan</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m1)</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;{</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">return</span> cwiseLessThan&lt;4, T&gt;(m0, m1);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span></div><div class="line"><a name="l01362"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a95c016ff5181c27e9246f0bf1174d839"> 1362</a></span>&#160;<a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#a95c016ff5181c27e9246f0bf1174d839">cwiseGreaterThan</a>(<span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m0, <span class="keyword">const</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;T&gt;</a>&amp; m1)</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;{</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">return</span> cwiseGreaterThan&lt;4, T&gt;(m0, m1);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a1e0cebbadc8b83a7e703d21de5539beb"> 1367</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4s</a> = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;float&gt;</a>;</div><div class="line"><a name="l01368"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#abaf7f913bf1752b9157259ffa32704ca"> 1368</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4d</a> = <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4&lt;double&gt;</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0_1_1math.html#a3fdbbddbd6905aded64c2986f68920e7"> 1369</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4f</a> = <a class="code" href="namespaceopenvdb_1_1v9__0_1_1math.html#abaf7f913bf1752b9157259ffa32704ca">Mat4d</a>;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="preprocessor">#if OPENVDB_ABI_VERSION_NUMBER &gt;= 8</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<a class="code" href="Math_8h.html#a76e004807bfa2a68739ea66b5f88c3ba">OPENVDB_IS_POD</a>(<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4s</a>)</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<a class="code" href="Math_8h.html#a76e004807bfa2a68739ea66b5f88c3ba">OPENVDB_IS_POD</a>(<a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">Mat4d</a>)</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;} <span class="comment">// namespace math</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0.html#a12e083fb4ade50656a20b65a76c2f6d4"> 1379</a></span>&#160;<span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">math::Mat4s</a> zeroVal&lt;math::Mat4s&gt;() { <span class="keywordflow">return</span> math::Mat4s::zero(); }</div><div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="namespaceopenvdb_1_1v9__0.html#a40aebd7a0b8d4d6583c050cf9c757e1d"> 1380</a></span>&#160;<span class="keyword">template</span>&lt;&gt; <span class="keyword">inline</span> <a class="code" href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">math::Mat4d</a> zeroVal&lt;math::Mat4d&gt;() { <span class="keywordflow">return</span> math::Mat4d::zero(); }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;} <span class="comment">// namespace OPENVDB_VERSION_NAME</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;} <span class="comment">// namespace openvdb</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="preprocessor">#endif // OPENVDB_UTIL_MAT4_H_HAS_BEEN_INCLUDED</span></div><div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_aa9be65e76ae6c34be7cfcf0920c8ab2e"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa9be65e76ae6c34be7cfcf0920c8ab2e">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Mat4&lt; typename promote&lt; S, T &gt;::type &gt; operator*(S scalar, const Mat4&lt; T &gt; &amp;m)</div><div class="ttdoc">Multiply each element of the given matrix by scalar and return the result. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1131</div></div>
<div class="ttc" id="Platform_8h_html_a4f7375e7791cade4ae486a8ebb68056f"><div class="ttname"><a href="Platform_8h.html#a4f7375e7791cade4ae486a8ebb68056f">OPENVDB_NO_TYPE_CONVERSION_WARNING_BEGIN</a></div><div class="ttdeci">#define OPENVDB_NO_TYPE_CONVERSION_WARNING_BEGIN</div><div class="ttdoc">Bracket code with OPENVDB_NO_TYPE_CONVERSION_WARNING_BEGIN/_END, to inhibit warnings about type conve...</div><div class="ttdef"><b>Definition:</b> Platform.h:206</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1ArithmeticError_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1ArithmeticError.html">openvdb::v9_0::ArithmeticError</a></div><div class="ttdef"><b>Definition:</b> Exceptions.h:56</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a6c1c733f608528224d3921d30adafb75"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6c1c733f608528224d3921d30adafb75">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Vec3&lt; typename promote&lt; T, MT &gt;::type &gt; operator*(const Vec3&lt; T &gt; &amp;_v, const Mat4&lt; MT &gt; &amp;_m)</div><div class="ttdoc">Multiply _v by _m and return the resulting vector. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1193</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a44f0c199dc47774a9e6f6ed725d6df7d"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a44f0c199dc47774a9e6f6ed725d6df7d">openvdb::v9_0::math::isAffine</a></div><div class="ttdeci">bool isAffine(const Mat4&lt; T &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1318</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_abaf7f913bf1752b9157259ffa32704ca"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#abaf7f913bf1752b9157259ffa32704ca">openvdb::v9_0::math::Mat4d</a></div><div class="ttdeci">Mat4&lt; double &gt; Mat4d</div><div class="ttdef"><b>Definition:</b> Mat4.h:1368</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a4932169c6f880b6b2c3d8f48928788ab"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a4932169c6f880b6b2c3d8f48928788ab">openvdb::v9_0::math::Mat4::getMat3</a></div><div class="ttdeci">Mat3&lt; T &gt; getMat3() const </div><div class="ttdef"><b>Definition:</b> Mat4.h:311</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a788febd9a66a36a1c19f607079e61291"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a788febd9a66a36a1c19f607079e61291">openvdb::v9_0::math::Mat4::preShear</a></div><div class="ttdeci">void preShear(Axis axis0, Axis axis1, T shear)</div><div class="ttdoc">Left multiplies a shearing transformation into the matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:982</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a8388e3e849221e57cb9601f56d84460b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8388e3e849221e57cb9601f56d84460b">openvdb::v9_0::math::Mat4::operator=</a></div><div class="ttdeci">const Mat4 &amp; operator=(const Mat4&lt; Source &gt; &amp;m)</div><div class="ttdoc">Assignment operator. </div><div class="ttdef"><b>Definition:</b> Mat4.h:337</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a47affd1a10b589811fc4828c1a2e0c6d"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a47affd1a10b589811fc4828c1a2e0c6d">openvdb::v9_0::math::Mat4::setZero</a></div><div class="ttdeci">void setZero()</div><div class="ttdef"><b>Definition:</b> Mat4.h:258</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a429da353d3b1526f14de2eab828ad344"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a429da353d3b1526f14de2eab828ad344">openvdb::v9_0::math::isExactlyEqual</a></div><div class="ttdeci">bool isExactlyEqual(const T0 &amp;a, const T1 &amp;b)</div><div class="ttdoc">Return true if a is exactly equal to b. </div><div class="ttdef"><b>Definition:</b> Math.h:444</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a33aea91c54ba93aecc1a648e464f89a8"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a33aea91c54ba93aecc1a648e464f89a8">openvdb::v9_0::math::Mat4::postRotate</a></div><div class="ttdeci">void postRotate(Axis axis, T angle)</div><div class="ttdoc">Right multiplies by a rotation clock-wiseabout the given axis into this matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:892</div></div>
<div class="ttc" id="Vec3_8h_html"><div class="ttname"><a href="Vec3_8h.html">Vec3.h</a></div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat_html_a01a2f9d41532824bed65b16ace0f6c44"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a01a2f9d41532824bed65b16ace0f6c44">openvdb::v9_0::math::Mat::mm</a></div><div class="ttdeci">T mm[SIZE *SIZE]</div><div class="ttdef"><b>Definition:</b> Mat.h:182</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_aef4da8365964b954dbf45fc89b478c3b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aef4da8365964b954dbf45fc89b478c3b">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Vec4&lt; typename promote&lt; T, MT &gt;::type &gt; operator*(const Mat4&lt; MT &gt; &amp;_m, const Vec4&lt; T &gt; &amp;_v)</div><div class="ttdoc">Multiply _m by _v and return the resulting vector. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1150</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ab0af2cb0604fcc0bec0a63f0980ce3b6"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab0af2cb0604fcc0bec0a63f0980ce3b6">openvdb::v9_0::math::Mat4::operator-</a></div><div class="ttdeci">Mat4&lt; typename promote&lt; T0, T1 &gt;::type &gt; operator-(const Mat4&lt; T0 &gt; &amp;m0, const Mat4&lt; T1 &gt; &amp;m1)</div><div class="ttdoc">Subtract corresponding elements of m0 and m1 and return the result. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1217</div></div>
<div class="ttc" id="openvdb_2Exceptions_8h_html_a3eec2ef3138c64fc5844490187c1b8d1"><div class="ttname"><a href="openvdb_2Exceptions_8h.html#a3eec2ef3138c64fc5844490187c1b8d1">OPENVDB_THROW</a></div><div class="ttdeci">#define OPENVDB_THROW(exception, message)</div><div class="ttdef"><b>Definition:</b> Exceptions.h:74</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a95c016ff5181c27e9246f0bf1174d839"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a95c016ff5181c27e9246f0bf1174d839">openvdb::v9_0::math::cwiseGreaterThan</a></div><div class="ttdeci">bool cwiseGreaterThan(const Mat4&lt; T &gt; &amp;m0, const Mat4&lt; T &gt; &amp;m1)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1362</div></div>
<div class="ttc" id="Math_8h_html"><div class="ttname"><a href="Math_8h.html">Math.h</a></div><div class="ttdoc">General-purpose arithmetic and comparison routines, most of which accept arbitrary value types (or at...</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a792bba2fb77c5beb92721efe95332585"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a792bba2fb77c5beb92721efe95332585">openvdb::v9_0::math::Mat4::setColumns</a></div><div class="ttdeci">void setColumns(const Vec4&lt; T &gt; &amp;v1, const Vec4&lt; T &gt; &amp;v2, const Vec4&lt; T &gt; &amp;v3, const Vec4&lt; T &gt; &amp;v4)</div><div class="ttdoc">Set the columns of this matrix to the vectors v1, v2, v3, v4. </div><div class="ttdef"><b>Definition:</b> Mat4.h:233</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal_html_a410ea7279cc4e32e6247fc7e42bf63bc"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math_1_1mat3__internal.html#a410ea7279cc4e32e6247fc7e42bf63bc">openvdb::v9_0::math::mat3_internal::pivot</a></div><div class="ttdeci">void pivot(int i, int j, Mat3&lt; T &gt; &amp;S, Vec3&lt; T &gt; &amp;D, Mat3&lt; T &gt; &amp;Q)</div><div class="ttdef"><b>Definition:</b> Mat3.h:682</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a67ccc6cfa482de0cf47a6ff7124a2b81"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a67ccc6cfa482de0cf47a6ff7124a2b81">openvdb::v9_0::math::Mat4::det</a></div><div class="ttdeci">T det() const </div><div class="ttdoc">Determinant of matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:651</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a5b663434a1d79dac075e03314a139136"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a5b663434a1d79dac075e03314a139136">openvdb::v9_0::math::Mat4::setToShear</a></div><div class="ttdeci">void setToShear(Axis axis0, Axis axis1, T shearby)</div><div class="ttdoc">Sets the matrix to a shear along axis0 by a fraction of axis1. </div><div class="ttdef"><b>Definition:</b> Mat4.h:974</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a553dbb93ea3eb9ccf0e075123bb48b90"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a553dbb93ea3eb9ccf0e075123bb48b90">openvdb::v9_0::math::Mat4::preRotate</a></div><div class="ttdeci">void preRotate(Axis axis, T angle)</div><div class="ttdoc">Left multiplies by a rotation clock-wiseabout the given axis into this matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:812</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a955f5393e942df350011b7e4fdb37ce4"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a955f5393e942df350011b7e4fdb37ce4">openvdb::v9_0::math::Mat4::pretransformH</a></div><div class="ttdeci">Vec3&lt; T0 &gt; pretransformH(const Vec3&lt; T0 &gt; &amp;p) const </div><div class="ttdoc">Transform a Vec3 by pre-multiplication, doing homogenous division. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1062</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_abdf1a11fc6c5bcf900462c7d6581c051"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#abdf1a11fc6c5bcf900462c7d6581c051">openvdb::v9_0::math::Abs</a></div><div class="ttdeci">Mat4&lt; T &gt; Abs(const Mat4&lt; T &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1329</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a454011d03dc14216a6b68d03e5798cf1"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a454011d03dc14216a6b68d03e5798cf1">openvdb::v9_0::math::Mat4::setRows</a></div><div class="ttdeci">void setRows(const Vec4&lt; T &gt; &amp;v1, const Vec4&lt; T &gt; &amp;v2, const Vec4&lt; T &gt; &amp;v3, const Vec4&lt; T &gt; &amp;v4)</div><div class="ttdoc">Set the rows of this matrix to the vectors v1, v2, v3, v4. </div><div class="ttdef"><b>Definition:</b> Mat4.h:208</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ac8aacd8fbff44f48de698b93a31b7913"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac8aacd8fbff44f48de698b93a31b7913">openvdb::v9_0::math::Mat4::operator*=</a></div><div class="ttdeci">const Mat4&lt; T &gt; &amp; operator*=(S scalar)</div><div class="ttdoc">Multiply each element of this matrix by scalar. </div><div class="ttdef"><b>Definition:</b> Mat4.h:369</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec3_html_ae2a77ff292fe571f83c83b3eb2561fa6"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#ae2a77ff292fe571f83c83b3eb2561fa6">openvdb::v9_0::math::Vec3::z</a></div><div class="ttdeci">T &amp; z()</div><div class="ttdef"><b>Definition:</b> Vec3.h:91</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a26a6d7acc07d370764b895b848f846e0"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a26a6d7acc07d370764b895b848f846e0">openvdb::v9_0::math::Mat4::inverse</a></div><div class="ttdeci">Mat4 inverse(T tolerance=0) const </div><div class="ttdef"><b>Definition:</b> Mat4.h:499</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a68c3859392fa67a8dbb7bda68fd7813f"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a68c3859392fa67a8dbb7bda68fd7813f">openvdb::v9_0::math::Mat4::setCol</a></div><div class="ttdeci">void setCol(int j, const Vec4&lt; T &gt; &amp;v)</div><div class="ttdoc">Set jth column to vector v. </div><div class="ttdef"><b>Definition:</b> Mat4.h:171</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec3_html_a67e4fec98374cd34f20fd6896c8760d0"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a67e4fec98374cd34f20fd6896c8760d0">openvdb::v9_0::math::Vec3::y</a></div><div class="ttdeci">T &amp; y()</div><div class="ttdef"><b>Definition:</b> Vec3.h:90</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a8c8ceabc696d63c5c1949706e5f949af"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8c8ceabc696d63c5c1949706e5f949af">openvdb::v9_0::math::Mat4::operator()</a></div><div class="ttdeci">T &amp; operator()(int i, int j)</div><div class="ttdef"><b>Definition:</b> Mat4.h:190</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a382e6ad7e6721b121e510959e1011be3"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a382e6ad7e6721b121e510959e1011be3">openvdb::v9_0::math::Mat4::setIdentity</a></div><div class="ttdeci">void setIdentity()</div><div class="ttdoc">Set this matrix to identity. </div><div class="ttdef"><b>Definition:</b> Mat4.h:279</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a0a3ea1937d9cf1913bd9d95129206cd7"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a0a3ea1937d9cf1913bd9d95129206cd7">openvdb::v9_0::math::hasTranslation</a></div><div class="ttdeci">bool hasTranslation(const Mat4&lt; T &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1323</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a40b16531473bae42fced2e2af0ed3ef8"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a40b16531473bae42fced2e2af0ed3ef8">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Vec4&lt; typename promote&lt; T, MT &gt;::type &gt; operator*(const Vec4&lt; T &gt; &amp;_v, const Mat4&lt; MT &gt; &amp;_m)</div><div class="ttdoc">Multiply _v by _m and return the resulting vector. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1165</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a88fe526682c68a40911ab19cf6deb625"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a88fe526682c68a40911ab19cf6deb625">openvdb::v9_0::math::Mat4::setTranslation</a></div><div class="ttdeci">void setTranslation(const Vec3&lt; T &gt; &amp;t)</div><div class="ttdef"><b>Definition:</b> Mat4.h:328</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ab9ccd8d858c93f78abce438c9abad1be"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab9ccd8d858c93f78abce438c9abad1be">openvdb::v9_0::math::Mat4::setRow</a></div><div class="ttdeci">void setRow(int i, const Vec4&lt; T &gt; &amp;v)</div><div class="ttdoc">Set ith row to vector v. </div><div class="ttdef"><b>Definition:</b> Mat4.h:153</div></div>
<div class="ttc" id="Mat3_8h_html"><div class="ttname"><a href="Mat3_8h.html">Mat3.h</a></div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ac144e1db0c68fd87748e27fe4d96f80a"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ac144e1db0c68fd87748e27fe4d96f80a">openvdb::v9_0::math::Mat4::postScale</a></div><div class="ttdeci">void postScale(const Vec3&lt; T0 &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> Mat4.h:772</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat_html_aecaeabaa9da616ae42bb20787878260d"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#aecaeabaa9da616ae42bb20787878260d">openvdb::v9_0::math::Mat&lt; 4, Real &gt;::ValueType</a></div><div class="ttdeci">Real ValueType</div><div class="ttdef"><b>Definition:</b> Mat.h:30</div></div>
<div class="ttc" id="Platform_8h_html_ac13c11880cf8b8dd311a72e5a05b295d"><div class="ttname"><a href="Platform_8h.html#ac13c11880cf8b8dd311a72e5a05b295d">OPENVDB_NO_TYPE_CONVERSION_WARNING_END</a></div><div class="ttdeci">#define OPENVDB_NO_TYPE_CONVERSION_WARNING_END</div><div class="ttdef"><b>Definition:</b> Platform.h:207</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1tools_1_1composite_html_af102709567b92b0c0bf370c1c3a918e4"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1tools_1_1composite.html#af102709567b92b0c0bf370c1c3a918e4">openvdb::v9_0::tools::composite::max</a></div><div class="ttdeci">const std::enable_if&lt;!VecTraits&lt; T &gt;::IsVec, T &gt;::type &amp; max(const T &amp;a, const T &amp;b)</div><div class="ttdef"><b>Definition:</b> Composite.h:107</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a1beb2d5aaa98378e767f9f0cd314a9f4"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1beb2d5aaa98378e767f9f0cd314a9f4">openvdb::v9_0::math::Mat4::operator+</a></div><div class="ttdeci">Mat4&lt; typename promote&lt; T0, T1 &gt;::type &gt; operator+(const Mat4&lt; T0 &gt; &amp;m0, const Mat4&lt; T1 &gt; &amp;m1)</div><div class="ttdoc">Add corresponding elements of m0 and m1 and return the result. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1206</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a3cf25c344b7eaeaf4230764aa65f6a63"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a3cf25c344b7eaeaf4230764aa65f6a63">openvdb::v9_0::math::cwiseAdd</a></div><div class="ttdeci">Mat4&lt; Type1 &gt; cwiseAdd(const Mat4&lt; Type1 &gt; &amp;m, const Type2 s)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1340</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_ae3996976d8ffb3e58d88f58227473f8e"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8e">openvdb::v9_0::math::Axis</a></div><div class="ttdeci">Axis</div><div class="ttdef"><b>Definition:</b> Math.h:904</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a66c7c913e921933b40c68c12c71626f9"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a66c7c913e921933b40c68c12c71626f9">openvdb::v9_0::math::Mat4::transform</a></div><div class="ttdeci">Vec3&lt; T0 &gt; transform(const Vec3&lt; T0 &gt; &amp;v) const </div><div class="ttdoc">Transform a Vec3 by post-multiplication, without homogenous division. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1019</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a54bfdafb84268d331ea8dd5abecd9579"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a54bfdafb84268d331ea8dd5abecd9579">openvdb::v9_0::math::Mat4::translation</a></div><div class="ttdeci">static Mat4 translation(const Vec3d &amp;v)</div><div class="ttdoc">Sets the matrix to a matrix that translates by v. </div><div class="ttdef"><b>Definition:</b> Mat4.h:681</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat_html_a330fa9e5b377239abe4c99688d478700"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#a330fa9e5b377239abe4c99688d478700">openvdb::v9_0::math::Mat&lt; 4, T &gt;::asPointer</a></div><div class="ttdeci">T * asPointer()</div><div class="ttdoc">Direct access to the internal data. </div><div class="ttdef"><b>Definition:</b> Mat.h:123</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a051d1c234447df316d9e611c13b526f6"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a051d1c234447df316d9e611c13b526f6">openvdb::v9_0::math::Mat4::postTranslate</a></div><div class="ttdeci">void postTranslate(const Vec3&lt; T0 &gt; &amp;tr)</div><div class="ttdoc">Right multiplies by the specified translation matrix, i.e. (*this) * Trans. </div><div class="ttdef"><b>Definition:</b> Mat4.h:728</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a860a0abbff4a4a673c9c708f6fd2b49d"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a860a0abbff4a4a673c9c708f6fd2b49d">openvdb::v9_0::math::Mat4::zero</a></div><div class="ttdeci">static const Mat4&lt; T &gt; &amp; zero()</div><div class="ttdoc">Predefined constant for zero matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:142</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html">openvdb::v9_0::math::Mat4</a></div><div class="ttdoc">4x4 -matrix class. </div><div class="ttdef"><b>Definition:</b> Mat3.h:22</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a7192ad4c0ffc0a3f632b8cf75a719f26"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7192ad4c0ffc0a3f632b8cf75a719f26">openvdb::v9_0::math::Mat4::operator+=</a></div><div class="ttdeci">const Mat4&lt; T &gt; &amp; operator+=(const Mat4&lt; S &gt; &amp;m1)</div><div class="ttdoc">Add each element of the given matrix to the corresponding element of this matrix. ...</div><div class="ttdef"><b>Definition:</b> Mat4.h:395</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec4_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec4.html">openvdb::v9_0::math::Vec4</a></div><div class="ttdef"><b>Definition:</b> Mat4.h:24</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a0a00e0cee96464deef181d12adb43c5d"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a0a00e0cee96464deef181d12adb43c5d">openvdb::v9_0::math::Mat4::transformH</a></div><div class="ttdeci">Vec3&lt; T0 &gt; transformH(const Vec3&lt; T0 &gt; &amp;p) const </div><div class="ttdoc">Transform a Vec3 by post-multiplication, doing homogenous divison. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1040</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a685d4df4285b296c70bc8dbd8a46484a"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a685d4df4285b296c70bc8dbd8a46484a">openvdb::v9_0::math::Mat4::setToRotation</a></div><div class="ttdeci">void setToRotation(Axis axis, T angle)</div><div class="ttdoc">Sets the matrix to a rotation about the given axis. </div><div class="ttdef"><b>Definition:</b> Mat4.h:797</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_abec46d0f9d9083cccab32bbe61e8ce2a"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#abec46d0f9d9083cccab32bbe61e8ce2a">openvdb::v9_0::math::Mat4::Mat4</a></div><div class="ttdeci">Mat4(Source a, Source b, Source c, Source d, Source e, Source f, Source g, Source h, Source i, Source j, Source k, Source l, Source m, Source n, Source o, Source p)</div><div class="ttdoc">Constructor given array of elements, the ordering is in row major form: </div><div class="ttdef"><b>Definition:</b> Mat4.h:80</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea4b8a53bafca6b43388660925049d734f">openvdb::v9_0::math::Z_AXIS</a></div><div class="ttdef"><b>Definition:</b> Math.h:907</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_adad43709ee54eb7b3dc9c1f283ce7a91"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#adad43709ee54eb7b3dc9c1f283ce7a91">openvdb::v9_0::math::Mat4::setMat3</a></div><div class="ttdeci">void setMat3(const Mat3&lt; T &gt; &amp;m)</div><div class="ttdoc">Set upper left to a Mat3. </div><div class="ttdef"><b>Definition:</b> Mat4.h:304</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a30b6f926de87ee5c9fa638c51535707d"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a30b6f926de87ee5c9fa638c51535707d">openvdb::v9_0::math::Mat4::pretransform</a></div><div class="ttdeci">Vec4&lt; T0 &gt; pretransform(const Vec4&lt; T0 &gt; &amp;v) const </div><div class="ttdoc">Transform a Vec4 by pre-multiplication. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1026</div></div>
<div class="ttc" id="openvdb_2Exceptions_8h_html"><div class="ttname"><a href="openvdb_2Exceptions_8h.html">Exceptions.h</a></div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec3_html_a2578e437cc5c4c0cdd1b3fa7134ea323"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#a2578e437cc5c4c0cdd1b3fa7134ea323">openvdb::v9_0::math::Vec3::dot</a></div><div class="ttdeci">T dot(const Vec3&lt; T &gt; &amp;v) const </div><div class="ttdoc">Dot product. </div><div class="ttdef"><b>Definition:</b> Vec3.h:195</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a7da2337f78a2cad8a041e6e2dadf6838"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a7da2337f78a2cad8a041e6e2dadf6838">openvdb::v9_0::math::angle</a></div><div class="ttdeci">T angle(const Vec2&lt; T &gt; &amp;v1, const Vec2&lt; T &gt; &amp;v2)</div><div class="ttdef"><b>Definition:</b> Vec2.h:450</div></div>
<div class="ttc" id="namespaceopenvdb_html"><div class="ttname"><a href="namespaceopenvdb.html">openvdb</a></div><div class="ttdef"><b>Definition:</b> Exceptions.h:13</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a6bb7dbbe6eac76c5ab56d14a44e42054"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6bb7dbbe6eac76c5ab56d14a44e42054">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Vec3&lt; typename promote&lt; T, MT &gt;::type &gt; operator*(const Mat4&lt; MT &gt; &amp;_m, const Vec3&lt; T &gt; &amp;_v)</div><div class="ttdoc">Multiply _m by _v and return the resulting vector. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1180</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a8e67c2d44a8b038838fb6e49d8a37ef3"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8e67c2d44a8b038838fb6e49d8a37ef3">openvdb::v9_0::math::Mat4::setToRotation</a></div><div class="ttdeci">void setToRotation(const Vec3&lt; T &gt; &amp;v1, const Vec3&lt; T &gt; &amp;v2)</div><div class="ttdoc">Sets the matrix to a rotation that maps v1 onto v2 about the cross product of v1 and v2...</div><div class="ttdef"><b>Definition:</b> Mat4.h:806</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a04c26f943090a3608d0f3287e1b98965"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a04c26f943090a3608d0f3287e1b98965">openvdb::v9_0::math::transformNormal</a></div><div class="ttdeci">Vec3&lt; T1 &gt; transformNormal(const Mat4&lt; T0 &gt; &amp;m, const Vec3&lt; T1 &gt; &amp;n)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1240</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a63c1c6744beeceedaa2b3bafe94aaf48"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a63c1c6744beeceedaa2b3bafe94aaf48">openvdb::v9_0::math::Mat4::postShear</a></div><div class="ttdeci">void postShear(Axis axis0, Axis axis1, T shear)</div><div class="ttdoc">Right multiplies a shearing transformation into the matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:997</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat3_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html">openvdb::v9_0::math::Mat3</a></div><div class="ttdoc">3x3 matrix class. </div><div class="ttdef"><b>Definition:</b> Mat3.h:28</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a52f400707bfe09b4abe0f2cc6dac6e74"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a52f400707bfe09b4abe0f2cc6dac6e74">openvdb::v9_0::math::Mat4::operator()</a></div><div class="ttdeci">T operator()(int i, int j) const </div><div class="ttdef"><b>Definition:</b> Mat4.h:200</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a48787960db8612ebca270560134278f4"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a48787960db8612ebca270560134278f4">openvdb::v9_0::math::Mat4::setToScale</a></div><div class="ttdeci">void setToScale(const Vec3&lt; T0 &gt; &amp;v)</div><div class="ttdoc">Sets the matrix to a matrix that scales by v. </div><div class="ttdef"><b>Definition:</b> Mat4.h:740</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec3_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html">openvdb::v9_0::math::Vec3</a></div><div class="ttdef"><b>Definition:</b> Mat.h:187</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_aaf30abe93cba053480ccaa110aa13c3b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aaf30abe93cba053480ccaa110aa13c3b">openvdb::v9_0::math::Mat4::pretransform</a></div><div class="ttdeci">Vec3&lt; T0 &gt; pretransform(const Vec3&lt; T0 &gt; &amp;v) const </div><div class="ttdoc">Transform a Vec3 by pre-multiplication, without homogenous division. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1033</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_aac4da3e67cc928274ae7134c7afb83cf"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#aac4da3e67cc928274ae7134c7afb83cf">openvdb::v9_0::math::isApproxEqual</a></div><div class="ttdeci">bool isApproxEqual(const Type &amp;a, const Type &amp;b, const Type &amp;tolerance)</div><div class="ttdoc">Return true if a is equal to b to within the given tolerance. </div><div class="ttdef"><b>Definition:</b> Math.h:407</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ad7ddb61aa28cebf719bdf59719c875bc"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad7ddb61aa28cebf719bdf59719c875bc">openvdb::v9_0::math::Mat4::transform3x3</a></div><div class="ttdeci">Vec3&lt; T0 &gt; transform3x3(const Vec3&lt; T0 &gt; &amp;v) const </div><div class="ttdoc">Transform a Vec3 by post-multiplication, without translation. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1083</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_aa98b5754979a7c680da6bbab8b8e8d85"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#aa98b5754979a7c680da6bbab8b8e8d85">openvdb::v9_0::math::Mat4::transform</a></div><div class="ttdeci">Vec4&lt; T0 &gt; transform(const Vec4&lt; T0 &gt; &amp;v) const </div><div class="ttdoc">Transform a Vec4 by post-multiplication. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1012</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat3_html_a67ccc6cfa482de0cf47a6ff7124a2b81"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat3.html#a67ccc6cfa482de0cf47a6ff7124a2b81">openvdb::v9_0::math::Mat3::det</a></div><div class="ttdeci">T det() const </div><div class="ttdoc">Determinant of matrix. </div><div class="ttdef"><b>Definition:</b> Mat3.h:493</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a2239aaff81254932a0dcf65333f276dc"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2239aaff81254932a0dcf65333f276dc">openvdb::v9_0::math::Mat4::eq</a></div><div class="ttdeci">bool eq(const Mat4 &amp;m, T eps=1.0e-8) const </div><div class="ttdoc">Return true if this matrix is equivalent to m within a tolerance of eps. </div><div class="ttdef"><b>Definition:</b> Mat4.h:347</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Vec3_html_af59136c0fb2c6ccc665bbc1c1f19a751"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Vec3.html#af59136c0fb2c6ccc665bbc1c1f19a751">openvdb::v9_0::math::Vec3::x</a></div><div class="ttdeci">T &amp; x()</div><div class="ttdoc">Reference to the component, e.g. v.x() = 4.5f;. </div><div class="ttdef"><b>Definition:</b> Vec3.h:89</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_af94576a217cee27acbd0a5da6663a7db"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#af94576a217cee27acbd0a5da6663a7db">openvdb::v9_0::math::Mat4::getTranslation</a></div><div class="ttdeci">Vec3&lt; T &gt; getTranslation() const </div><div class="ttdoc">Return the translation component. </div><div class="ttdef"><b>Definition:</b> Mat4.h:323</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ab6fc63084c691d2dab40d617ea6651ca"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab6fc63084c691d2dab40d617ea6651ca">openvdb::v9_0::math::Mat4::operator!=</a></div><div class="ttdeci">bool operator!=(const Mat4&lt; T0 &gt; &amp;m0, const Mat4&lt; T1 &gt; &amp;m1)</div><div class="ttdoc">Inequality operator, does exact floating point comparisons. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1126</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_acaedaf8e88143243abe7729a82507b65"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#acaedaf8e88143243abe7729a82507b65">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Mat4&lt; typename promote&lt; T0, T1 &gt;::type &gt; operator*(const Mat4&lt; T0 &gt; &amp;m0, const Mat4&lt; T1 &gt; &amp;m1)</div><div class="ttdoc">Multiply m0 by m1 and return the resulting matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1228</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ab225ef444ee1962bc0abfafb9b8dfb5b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ab225ef444ee1962bc0abfafb9b8dfb5b">openvdb::v9_0::math::Mat4::Mat4</a></div><div class="ttdeci">Mat4(Source *a)</div><div class="ttdoc">Constructor given array of elements, the ordering is in row major form: </div><div class="ttdef"><b>Definition:</b> Mat4.h:65</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ae5fb13158e0e81260e69dff3915b4b26"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ae5fb13158e0e81260e69dff3915b4b26">openvdb::v9_0::math::Mat4::operator-</a></div><div class="ttdeci">Mat4&lt; T &gt; operator-() const </div><div class="ttdoc">Negation operator, for e.g. m1 = -m2;. </div><div class="ttdef"><b>Definition:</b> Mat4.h:357</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a9adf02885b273ef7b0ac15e9f8c8c13f"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a9adf02885b273ef7b0ac15e9f8c8c13f">openvdb::v9_0::math::Mat4::operator*=</a></div><div class="ttdeci">const Mat4&lt; T &gt; &amp; operator*=(const Mat4&lt; S &gt; &amp;m1)</div><div class="ttdoc">Multiply this matrix by the given matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:453</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat_html"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html">openvdb::v9_0::math::Mat</a></div><div class="ttdef"><b>Definition:</b> Mat.h:26</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a28dccdc05858b244cd361cea1f57512b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a28dccdc05858b244cd361cea1f57512b">openvdb::v9_0::math::Mat4::Mat4</a></div><div class="ttdeci">Mat4(const Mat4&lt; Source &gt; &amp;m)</div><div class="ttdoc">Conversion constructor. </div><div class="ttdef"><b>Definition:</b> Mat4.h:121</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_ad647c7d2b6246e17671289edf08f45f1"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#ad647c7d2b6246e17671289edf08f45f1">openvdb::v9_0::math::Mat4::operator-=</a></div><div class="ttdeci">const Mat4&lt; T &gt; &amp; operator-=(const Mat4&lt; S &gt; &amp;m1)</div><div class="ttdoc">Subtract each element of the given matrix from the corresponding element of this matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:424</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8eaa1ec9649c0a631b27ad7280af3522dd0">openvdb::v9_0::math::Y_AXIS</a></div><div class="ttdef"><b>Definition:</b> Math.h:906</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a8f656f58c602f9bda786a57c448920d4"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8f656f58c602f9bda786a57c448920d4">openvdb::v9_0::math::Mat4::setToTranslation</a></div><div class="ttdeci">void setToTranslation(const Vec3&lt; T0 &gt; &amp;v)</div><div class="ttdoc">Sets the matrix to a matrix that translates by v. </div><div class="ttdef"><b>Definition:</b> Mat4.h:692</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a3c8dfb84ee5364be6e46ad2e957227ac"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a3c8dfb84ee5364be6e46ad2e957227ac">openvdb::v9_0::math::Mat4::operator*</a></div><div class="ttdeci">Mat4&lt; typename promote&lt; S, T &gt;::type &gt; operator*(const Mat4&lt; T &gt; &amp;m, S scalar)</div><div class="ttdoc">Multiply each element of the given matrix by scalar and return the result. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1139</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a84369eb1962b9b38120540353c4e309f"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a84369eb1962b9b38120540353c4e309f">openvdb::v9_0::math::Mat4::Mat4</a></div><div class="ttdeci">Mat4(const Vec4&lt; Source &gt; &amp;v1, const Vec4&lt; Source &gt; &amp;v2, const Vec4&lt; Source &gt; &amp;v3, const Vec4&lt; Source &gt; &amp;v4, bool rows=true)</div><div class="ttdef"><b>Definition:</b> Mat4.h:109</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a8109d997fd3a616f735ff95df91e37e1"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a8109d997fd3a616f735ff95df91e37e1">openvdb::v9_0::math::Mat4::transpose</a></div><div class="ttdeci">Mat4 transpose() const </div><div class="ttdef"><b>Definition:</b> Mat4.h:486</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a2ea9bf4884840c97e8055d7dedc127b0"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a2ea9bf4884840c97e8055d7dedc127b0">openvdb::v9_0::math::Mat4::preTranslate</a></div><div class="ttdeci">void preTranslate(const Vec3&lt; T0 &gt; &amp;tr)</div><div class="ttdoc">Left multiples by the specified translation, i.e. Trans * (*this) </div><div class="ttdef"><b>Definition:</b> Mat4.h:717</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a7f3f03ad0e44c62ba30750d445b4b1e9"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a7f3f03ad0e44c62ba30750d445b4b1e9">openvdb::v9_0::math::Mat4::col</a></div><div class="ttdeci">Vec4&lt; T &gt; col(int j) const </div><div class="ttdoc">Get jth column, e.g. Vec4f v = m.col(0);. </div><div class="ttdef"><b>Definition:</b> Mat4.h:181</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a45287dd453383615dcb732a3e54df92a"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a45287dd453383615dcb732a3e54df92a">openvdb::v9_0::math::Mat4::setToRotation</a></div><div class="ttdeci">void setToRotation(const Vec3&lt; T &gt; &amp;axis, T angle)</div><div class="ttdoc">Sets the matrix to a rotation about an arbitrary axis. </div><div class="ttdef"><b>Definition:</b> Mat4.h:802</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a71890348d53084982694f39988f4b286"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a71890348d53084982694f39988f4b286">openvdb::v9_0::math::Mat4::identity</a></div><div class="ttdeci">static const Mat4&lt; T &gt; &amp; identity()</div><div class="ttdoc">Predefined constant for identity matrix. </div><div class="ttdef"><b>Definition:</b> Mat4.h:131</div></div>
<div class="ttc" id="version_8h_8in_html_a00be3835cb8ad1ded8abd821fad20fc0"><div class="ttname"><a href="version_8h_8in.html#a00be3835cb8ad1ded8abd821fad20fc0">OPENVDB_VERSION_NAME</a></div><div class="ttdeci">#define OPENVDB_VERSION_NAME</div><div class="ttdoc">The version namespace name for this library version. </div><div class="ttdef"><b>Definition:</b> version.h.in:116</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a6918ef84a51ab39533d827f31203c756"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a6918ef84a51ab39533d827f31203c756">openvdb::v9_0::math::Mat4::row</a></div><div class="ttdeci">Vec4&lt; T &gt; row(int i) const </div><div class="ttdoc">Get ith row, e.g. Vec4f v = m.row(1);. </div><div class="ttdef"><b>Definition:</b> Mat4.h:164</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a679a33cc9a91af7a67b3a65bc61c9774"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a679a33cc9a91af7a67b3a65bc61c9774">openvdb::v9_0::math::Mat4::operator==</a></div><div class="ttdeci">bool operator==(const Mat4&lt; T0 &gt; &amp;m0, const Mat4&lt; T1 &gt; &amp;m1)</div><div class="ttdoc">Equality operator, does exact floating point comparisons. </div><div class="ttdef"><b>Definition:</b> Mat4.h:1114</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat4_html_a1442bceaea3367cd5b2d2ff89d0d1b4b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat4.html#a1442bceaea3367cd5b2d2ff89d0d1b4b">openvdb::v9_0::math::Mat4::preScale</a></div><div class="ttdeci">void preScale(const Vec3&lt; T0 &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> Mat4.h:750</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#ae3996976d8ffb3e58d88f58227473f8ea93ed1386222f87948b972889ad82cd33">openvdb::v9_0::math::X_AXIS</a></div><div class="ttdef"><b>Definition:</b> Math.h:905</div></div>
<div class="ttc" id="classopenvdb_1_1v9__0_1_1math_1_1Mat_html_afb9ded5f49336ae503bb9f2035ea902b"><div class="ttname"><a href="classopenvdb_1_1v9__0_1_1math_1_1Mat.html#afb9ded5f49336ae503bb9f2035ea902b">openvdb::v9_0::math::Mat&lt; 4, Real &gt;::value_type</a></div><div class="ttdeci">Real value_type</div><div class="ttdef"><b>Definition:</b> Mat.h:29</div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a885fef1528b9fe3f9779b3aadd1333ec"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a885fef1528b9fe3f9779b3aadd1333ec">openvdb::v9_0::math::cwiseLessThan</a></div><div class="ttdeci">bool cwiseLessThan(const Mat4&lt; T &gt; &amp;m0, const Mat4&lt; T &gt; &amp;m1)</div><div class="ttdef"><b>Definition:</b> Mat4.h:1355</div></div>
<div class="ttc" id="version_8h_8in_html_a2dde157791cd7558cdf886489256ba14"><div class="ttname"><a href="version_8h_8in.html#a2dde157791cd7558cdf886489256ba14">OPENVDB_USE_VERSION_NAMESPACE</a></div><div class="ttdeci">#define OPENVDB_USE_VERSION_NAMESPACE</div><div class="ttdef"><b>Definition:</b> version.h.in:202</div></div>
<div class="ttc" id="Platform_8h_html"><div class="ttname"><a href="Platform_8h.html">Platform.h</a></div></div>
<div class="ttc" id="namespaceopenvdb_1_1v9__0_1_1math_html_a9380353378ddeacf6f55ea83ea2fc88e"><div class="ttname"><a href="namespaceopenvdb_1_1v9__0_1_1math.html#a9380353378ddeacf6f55ea83ea2fc88e">openvdb::v9_0::math::shear</a></div><div class="ttdeci">MatType shear(Axis axis0, Axis axis1, typename MatType::value_type shear)</div><div class="ttdoc">Set the matrix to a shear along axis0 by a fraction of axis1. </div><div class="ttdef"><b>Definition:</b> Mat.h:710</div></div>
<div class="ttc" id="Vec4_8h_html"><div class="ttname"><a href="Vec4_8h.html">Vec4.h</a></div></div>
<div class="ttc" id="Math_8h_html_a76e004807bfa2a68739ea66b5f88c3ba"><div class="ttname"><a href="Math_8h.html#a76e004807bfa2a68739ea66b5f88c3ba">OPENVDB_IS_POD</a></div><div class="ttdeci">#define OPENVDB_IS_POD(Type)</div><div class="ttdef"><b>Definition:</b> Math.h:55</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
