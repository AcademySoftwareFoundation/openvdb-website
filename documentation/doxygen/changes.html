<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: Release Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">6.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">OpenVDB</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Release Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> <a name="v6_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 6.0.0</b> - <em>December 18, 2018</em></dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added support to the <a class="el" href="ParticlesToLevelSet_8h.html">ParticlesToLevelSet</a> tool for fast rasterization of particles into boolean mask grids.</li>
<li>Added convenience functions <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae29bb93f486d96bd91cad919e623dab0">particlesToSdf</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#adcddfc57ef94f93ff3806a45c26ca7d0">particleTrailsToSdf</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9feb86e4311db3ba962b9d19eb5569be">particlesToMask</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af4039b2222a88a7e4ed8e3f47490eecb">particleTrailsToMask</a> for common particle rasterization use cases.</li>
<li>Added batch copying functions <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html#a804afe3d283974f4b02806cee81bf79f">AttributeArray::copyValues()</a> <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html#a4e98d812d26d928bdb5a8951dfebce84">AttributeArray::copyValuesUnsafe()</a> that significantly out-performs the older <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html#a0555671fab4fde242f97f5eb0c7e3a9c">AttributeArray</a> method.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Improved the responsiveness of the <a class="el" href="MeshToVolume_8h.html">mesh to volume</a> converter to interrupt requests.</li>
<li>Attempts to use a partially deserialized <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">AttributeArray</a> now errors.</li>
<li>Updated point deletion to use faster batch copying for ABI=6+.</li>
<li>Methods relating to in-memory Blosc compression for <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">AttributeArray</a> now do nothing and have been marked deprecated resulting in memory savings for ABI=6+.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed various signed/unsigned casting issues when moving points in point data grids to resolve compiler warnings.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>ABI changes:<ul>
<li>Added multiple new virtual functions to <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">AttributeArray</a>.</li>
<li>Changed the order and size of member variables in <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">AttributeArray</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1TypedAttributeArray.html">TypedAttributeArray</a> classes.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Removed a number of methods that were deprecated in version&#160;5.0.0 or earlier.</li>
<li>Removed the experimental <a class="el" href="">ValueAccessor::newSetValue</a> method.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added an option to the Visualize&#160;SOP to display leaf nodes as points.</li>
<li>Renamed the Visualize&#160;SOP&rsquo;s <code>leafmode</code>, <code>internalmode</code>, <code>tilemode</code> and <code>voxelmode</code> parameters to <code>leafstyle</code>, <code>internalstyle</code>, etc. and converted them from ordinals to strings.</li>
<li>Made various improvements to viewport rendering of point data grids.</li>
<li>Updated ParmFactory to allow parameters to be marked as hidden, this is useful for multi-parms where it is not possible to mark them as obsolete.</li>
<li>Removed the option to use in-memory Blosc compression from the Points&#160;Convert&#160;SOP as this feature has now been deprecated.</li>
<li>Made various small changes for Houdini&#160;17 compatibility.</li>
</ul>
</dd></dl>
<p> <a name="v5_2_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 5.2.0</b> - <em>August 13, 2018</em></dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added <a class="el" href="points_2PointAdvect_8h.html">tools</a> to advect points stored in point data grids through velocity fields. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>For point data grids, voxel data can now be <a class="el" href="namespaceopenvdb_1_1v6__0_1_1points.html#a2205d8c5a7c5fd2e24145a9df5ad6485">prefetched</a> independently of position or other attributes. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added <a class="el" href="PointSample_8h.html">tools</a> to sample voxel values onto points stored in point data grids. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1UniformPointScatter.html">UniformPointScatter</a> tool now generates points in &ldquo;points per volume&rdquo; mode even when the product of the density and the voxel volume is less than one, and the point count now varies continuously with the density.</li>
<li>Added a minimum/maximum sphere count argument to the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af3f0e9f42ab322b7dd0f54dfb5b28556">fillWithSpheres</a> tool. (The previous version, now deprecated, supported only a maximum sphere count.)</li>
<li>Added a method to the level set tracking tool to enable and disable <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html#ac588142e0d5b33cb94e92dd65e50e927">trimming</a> of voxels outside the narrow band. Previously, trimming was always enabled, which caused dense SDFs to be converted to narrow-band level sets.</li>
<li>Added <b>state</b> methods to point data <a class="el" href="IndexFilter_8h.html">index filters</a> to improve optimization opportunities. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1points.html#a8954944cf980f1f874a6510497568338">active</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1points.html#a8273cc7bb48dded419013b35a6491bc0">inactive</a> value mask point data index filters. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Replaced include/exclude group list parameters with filter functors in various point data functions. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Refactored and simplified the <a class="el" href="PointCount_8h.html">point count</a> API. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Computing cumulative per-leaf point offsets is now parallelized. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Made various small changes for Visual Studio&#160;2017 compatibility. <em>[Contributed by Edward&#160;Lam]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed a bug that could cause an infinite loop when iterating over an empty root node.</li>
<li>Fixed namespace-related bugs in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html#aec59a91554c568eaf28cae204d961bc2">Tuple::isZero</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat.html#aec59a91554c568eaf28cae204d961bc2">Mat::isZero</a> that led to compile-time errors.</li>
<li>Fixed type conversion bugs in the vector-to-vector <a href="namespaceopenvdb_1_1v5__2_1_1math.html#rotation_v1_v2"><b>rotation</b></a> function that made it impossible for it to return a single-precision rotation matrix, and modified the function to accept <b>Vec3</b> arguments of any value type.</li>
<li>Fixed a bug in the <a class="el" href="MeshToVolume_8h.html">mesh to volume</a> converter that made it uninterruptible in certain cases even though an interrupter was provided. <em>[Reported&#160;by&#160;Doug&#160;Epps]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added an option to the From&#160;Particles&#160;SOP to output an interior mask grid.</li>
<li>Added options to the Metadata&#160;SOP to set the grid name and to propagate metadata to primitive attributes and vice-versa.</li>
<li>Modified <a href="http://www.sidefx.com/docs/hdk16.5/class_g_u___prim_v_d_b.html#af9274e93cc2d5d8d1f001aa7a286180a"><b>convertVolumesToVDBs</b></a> to set the output VDBs&rsquo; grid names to the names of the volume primitives.</li>
<li>Added an option to the Offset&#160;Level&#160;Set, Renormalize&#160;Level&#160;Set, Smooth&#160;Level&#160;Set and Resize&#160;Narrow&#160;Band&#160;SOPs to enable and disable trimming of voxels outside the narrow band. Previously, trimming was always enabled, which caused dense SDFs to be converted to narrow-band level sets.</li>
<li>Fixed a bug in the Resample&#160;SOP that prevented it from reading a reference VDB from the second input.</li>
<li>Added an option to the Scatter&#160;SOP to scatter points only on an isosurface of a signed distance field.</li>
<li>The Scatter&#160;SOP now generates points in Point&#160;Density mode even when the product of the density and the voxel volume is less than one, and the point count now varies continuously with the density.</li>
<li>Added a minimum sphere count option to the To&#160;Spheres&#160;SOP.</li>
<li>Added enable/disable toggles to the To&#160;Spheres&#160;SOP&rsquo;s minimum and maximum radius parameters and eliminated the world space radius parameters. The remaining minimum and maximum parameters, formerly the voxel space radii, are now used in both world unit and voxel unit modes.</li>
<li>Added transform and rotation order options to the Transform&#160;SOP.</li>
<li>Added support to the Advect&#160;Points&#160;SOP for advecting points stored in point data grids. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added support to the Sample&#160;Points&#160;SOP for sampling onto points stored in point data grids. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
</ul>
</dd></dl>
<p> <a name="v5_1_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 5.1.0</b> - <em>April 10, 2018</em></dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added an option to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1points.html#a6b9d921b422e929c3786e77c8d4c811f">points::deleteFromGroups</a> to delete the groups as well as the points. <em>[Contributed&#160;by&#160;Nick&#160;Avramoussis]</em></li>
<li>Added a <code>header_test</code> Makefile target that checks library header files for dependencies on missing or indirectly included headers. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added support for <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a85b140686e0a81e6b7e47e021428005e">Mat3s</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a29742c92282b86aa2885165d7464ac3a">Mat3d</a> point data <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1TypedAttributeArray.html">typed attributes</a>. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Added per-test timings to <code>vdb_test</code> to help in identifying performance regressions.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0.html#a0fc59acce5d09d50e1a645684a4d34af">zeroVal</a> now returns a zero matrix instead of an identity matrix for <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a1e0cebbadc8b83a7e703d21de5539beb">Mat4s</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#abaf7f913bf1752b9157259ffa32704ca">Mat4d</a>, and it is now also defined (and returns a zero matrix) for <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a85b140686e0a81e6b7e47e021428005e">Mat3s</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a29742c92282b86aa2885165d7464ac3a">Mat3d</a>.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Fixed a bug introduced in version&#160;3.2.0 that caused boolean and integer values added to a grid&rsquo;s metadata to be stored as floating-point values.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added options to the Clip&#160;SOP to expand or shrink the clipping region and, when clipping to a camera frustum, to set the near and far clipping planes.</li>
<li>Added output grid naming options to the Points&#160;Convert&#160;SOP.</li>
<li>Added a Keep&#160;Original&#160;Geometry toggle to the Points&#160;Convert&#160;SOP and improved the efficiency of point unpacking. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added an option to the Points&#160;Delete&#160;SOP to delete point groups. <em>[Contributed&#160;by&#160;Nick&#160;Avramoussis]</em></li>
<li>Fixed a rare crash when extracting points from a point data primitive. <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Added a <b>SOP_NodeVDB::evalStdString</b> method that facilitates string parameter evaluation in expressions, e.g., <code>matchGroup(*gdp,&#160;evalStdString("group",&#160;time))</code>.</li>
<li>Removed the deprecated <b>openvdb_houdini::validateGeometry</b> function. Use <b>convertGeometry</b> instead.</li>
<li>Added a <b>SOP_NodeVDB::matchGroup</b> overload that eliminates the need to <code>const_cast</code> the <b>GU_Detail</b>. <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Grid transforms are now more aggressively simplified, making it less likely to produce nonuniform voxels erroneously. <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Fixed a bug when copying and pasting a Create&#160;SOP that could cause the Voxel&#160;Size toggle to change state.</li>
<li>Added a <b>houdini_utils::OpFactory::setVerb</b> method to register <a href="http://www.sidefx.com/docs/houdini/model/compile">compilable</a>&#160;SOPs.</li>
<li>Made <b>SOP_NodeVDB::cookMySop</b> <code>final</code> (that is, non-overridable) to facilitate the implementation of compilable SOPs. Override <b>SOP_NodeVDB::cookVDBSop</b> instead. (In most cases, it suffices to rename <b>cookMySop</b> to <b>cookVDBSop</b>.)</li>
<li>Renamed some parameters on the following SOPs to match the equivalent native Houdini nodes: Advect, Advect&#160;Points, Analysis, Combine, Filter, Fracture, From&#160;Particles, From&#160;Polygons, Morph&#160;Level&#160;Set, Occlusion&#160;Mask, Offset&#160;Level&#160;Set, Points&#160;Group, Resample, Resize&#160;Narrow&#160;Band, Smooth&#160;Level&#160;Set, Topology&#160;To&#160;Level&#160;Set, Vector&#160;Merge, and Visualize.</li>
<li>Added <b>SOP_VDBCacheOptions</b>, a convenience base class for compilable&#160;SOPs. <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Converted most SOPs into compilable SOPs.</li>
</ul>
</dd></dl>
<p> <a name="v5_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 5.0.0</b> - <em>November 6, 2017</em></dd></dl>
<dl class="section user"><dt></dt><dd><blockquote class="doxtable">
<p>Some changes in this release (see <a class="el" href="changes.html#v5_0_0_ABI_changes">ABI changes</a> below) alter the grid&#160;ABI so that it is incompatible with earlier versions of the OpenVDB library, such as the ones built into Houdini up to and including Houdini&#160;16. To preserve ABI compatibility, when compiling OpenVDB or any dependent code define the macro <code>OPENVDB_ABI_VERSION_NUMBER=</code><em>N</em>, where, for example, <em>N</em> is 3 for Houdini&#160;15, 15.5 and&#160;16 and 4 for Houdini&#160;16.5. </p>
</blockquote>
</dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0.html#ad7ffa3454f625a935c4bbb03f4a2a241">getLibraryAbiVersionString</a> function, which returns a string such as <code>"5.0.0abi3"</code>.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0.html#a6c84f55d1bc02806bc3a87f393a3db52">weak pointer</a> type alias for ABI compatibility.</li>
<li>Metadata fields of unregistered types are no longer discarded after being read from a <code>.vdb</code> file, and although their values are not printable, they can be written back to disk.</li>
<li>Added a <code>DESTDIR_LIB_DIR</code> Makefile variable for Linux multiarch support. <em>[Contributed&#160;by&#160;Mathieu&#160;Malaterre]</em></li>
<li>Added tools to create <a class="el" href="PotentialFlow_8h.html">potential flow</a> fields, as described in the 2017&#160;SIGGRAPH OpenVDB course. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added <a class="el" href="PointMask_8h.html">tools</a> to create mask grids from point data grids and to compute <a class="el" href="namespaceopenvdb_1_1v6__0_1_1points.html#a90464075cf4382ab74a75288eebfce02">point counts</a>. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added <a class="el" href="points_2PointScatter_8h.html">tools</a> to scatter <a class="el" href="points.html#secPtOverview">OpenVDB points</a> randomly throughout a volume. <em>[Contributed&#160;by&#160;Nick&#160;Avramoussis]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Significantly improved the performance of point data grid <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1MultiGroupFilter.html">group filters</a>. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed bugs in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ClosestSurfacePoint.html">ClosestSurfacePoint</a> tool&rsquo;s distance calculations that caused searches to produce incorrect results.</li>
<li>Fixed a locking issue that affected multithreaded access to <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1PointDataLeafNode.html">PointDataLeafNode</a>&zwj;s when delayed loading was in effect. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
</ul>
</dd></dl>
<p><a class="anchor" id="v5_0_0_ABI_changes"></a></p><dl class="section user"><dt></dt><dd>ABI changes:<ul>
<li>Made <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html">InternalNode</a>&rsquo;s destructor non-virtual.</li>
<li>The <a class="el" href="changes.html#v4_0_2_delayed_load_fix">fix</a> for a delayed-loading race condition in the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafBuffer.html">LeafBuffer</a> class that was only partially rolled out in the previous release is now enabled on all platforms.</li>
<li>Replaced a bit flag with an atomic integer in <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">points::AttributeArray</a> to address a threading issue during delayed loading. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Deprecated the <code>OPENVDB_2_ABI_COMPATIBLE</code> and <code>OPENVDB_3_ABI_COMPATIBLE</code> macros in favor of a new <code>OPENVDB_ABI_VERSION_NUMBER</code> macro. The new macro defaults to the library major version number but can be set at compile time to an earlier version number to disable ABI changes since that version. (Older ABIs will not be supported indefinitely, however.) For example, compile OpenVDB and any dependent code with <code>-DOPENVDB_ABI_VERSION_NUMBER=4</code> to use the 4.x&#160;ABI.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Replaced <b>tools::ClosestSurfacePoint::initialize</b> with <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ClosestSurfacePoint.html#ab75b3060017a5ef04797a4bd29453205">tools::ClosestSurfacePoint::create</a>, which returns a newly-allocated and properly initialized object.</li>
<li>Removed methods that were deprecated in version&#160;4.0.0 or earlier, including <b>io::File::readGridPartial</b>, <b>points::initialize</b>, <b>points::uninitialize</b> and <b>util::PagedArray::pop_back</b>.</li>
<li>Deprecated <a class="el" href="classopenvdb_1_1v6__0_1_1IllegalValueException.html">IllegalValueException</a> in favor of <a class="el" href="classopenvdb_1_1v6__0_1_1ValueError.html">ValueError</a>.</li>
<li>Changed the naming scheme for the <a class="el" href="version_8h.html#a00be3835cb8ad1ded8abd821fad20fc0">library namespace</a> from <b>openvdb::v</b><em>X</em><b>_</b><em>Y</em><b>_</b><em>Z</em> to <b>openvdb::v</b><em>X</em><b>_</b><em>Y</em><b>abi</b><em>N</em>, where <em>X</em>, <em>Y</em>, <em>Z</em> and <em>N</em> are the major, minor, patch and ABI version numbers, respectively. The <b>abi</b><em>N</em> suffix is added only when the library is built using an older ABI version.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Reimplemented NumPy support for Boost&#160;1.65 compatibility.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Fixed bugs that caused the Ray&#160;SOP&rsquo;s closest surface point searches to produce incorrect results.</li>
<li>Changed the <b>VdbPrimCIterator::FilterFunc</b> type from <b>boost::function</b> to <b>std::function</b>.</li>
<li>Changed the <b>houdini_utils::OpPolicyPtr</b> type from <b>boost:shared_ptr</b> to <b>std::shared_ptr</b>.</li>
<li>Debug-level log messages generated by OpenVDB are no longer forwarded to Houdini&rsquo;s error manager.</li>
<li>Fixed a bug in the Read&#160;SOP that made it impossible to select among grids of the same name in a file.</li>
<li>Added <b>houdini_utils::ParmFactory::setAttrChoiceList</b>, a convenience method for the creation of menus of attributes.</li>
<li>Added a Potential&#160;Flow&#160;SOP. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added point data grid support to the Scatter&#160;SOP. <em>[Contributed&#160;by&#160;Nick&#160;Avramoussis]</em></li>
<li>Added mask and point count output options to the Points&#160;Convert&#160;SOP. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
</ul>
</dd></dl>
<p> <a name="v4_0_2_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 4.0.2</b> - <em>July 28, 2017</em> </dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#acd6ff153d07e009637823004129a8bfc">compActiveLeafVoxels</a>, which composites active voxel values from a source tree into a destination tree. It is threaded and faster than existing tools that merge trees, however it operates only on leaf nodes.</li>
<li>Added a <code>vdb_test&#160;-f</code> option that reads a list of tests to be run from a text file.</li>
<li>Added functions for <a class="el" href="PointDelete_8h.html">deleting points</a> from point data grids based on group membership. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Enabled display of point data grids in <code>vdb_view</code>. <em>[Contributed&#160;by&#160;Nick&#160;Avramoussis]</em></li>
<li>Added a view mode indicator to <code>vdb_view</code>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat.html#aaa962dc12423e9f7039ac52dcb386da0">isFinite</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat.html#ac30b6cb765118673cdd5a23541507c09">isNan</a>, and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat.html#aec59a91554c568eaf28cae204d961bc2">isZero</a> methods to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat.html">math::Mat</a> and added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html#aec59a91554c568eaf28cae204d961bc2">isZero</a> to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html">math::Tuple</a>.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a5d5182249f0ff2cd4584ec24b09300a0">tools::interiorMask</a>, which constructs a boolean mask grid from the active voxels of an input grid or, if the input grid is a level set, from the interior voxels of the level set.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html#a2abf1e0222517b22d3cf6570e219245e">begin</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html#a0b454fa8a6e6836193342b4184131a12">end</a> iterator methods (and related methods) to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a>, so that it can be used in range-based <code>for</code>&#160;loops.</li>
<li>The <a class="el" href="Clip_8h.html">clip</a> tool now accepts either a box, a mask grid or a camera frustum as the clipping region. The latter is new in this version.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Moved the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html#aaa962dc12423e9f7039ac52dcb386da0">isFinite</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html#ac16be5bc56c10702ee4c4c2499b3ade8">isInfinite</a>, and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html#ac30b6cb765118673cdd5a23541507c09">isNan</a> methods from <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec3.html">math::Vec3</a> et&#160;al. to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Tuple.html">math::Tuple</a>.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li><a class="anchor" id="v4_0_2_delayed_load_fix"></a> Fixed a delayed-loading race condition that could result in crashes. <em>[Reported&#160;by&#160;Dan&#160;Bailey]</em> <blockquote class="doxtable">
<p><b>Note:</b> To preserve ABI compatibility, this fix is currently enabled only on platforms for which the alignment of a <code>tbb::atomic&lt;uint32_t&gt;</code> is the same as for a <code>uint32_t</code>. On other platforms, warnings will be logged during OpenVDB initialization, and it is recommended to disable delayed loading in that case (for example, by defining the environment variable <code>OPENVDB_DISABLE_DELAYED_LOAD</code>). </p>
</blockquote>
</li>
<li>Fixed a delayed-loading memory leak in the <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1PointDataLeafNode.html">PointDataLeafNode</a>. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Changed the random number seeding mechanism for <code>.vdb</code> file UUIDs to avoid duplicate&#160;IDs. <em>[Reported&#160;by&#160;Jason&#160;Lefley]</em></li>
<li>Fixed an off-by-one bug in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridResampler.html">resampler</a> that produced grid patterns of missing interior voxels for scale factors greater than one.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>As of Houdini&#160;16.0.549, <code>houdini_utils::OpFactory</code> can generate help cards for operators automatically. New <code>OpFactory::setDocumentation</code> and <code>ParmFactory::setDocumentation</code> methods allow one to add custom help text in <a href="http://www.sidefx.com/docs/houdini/help/format">wiki markup</a> format.</li>
<li>Added help cards for all SOPs. Houdini&#160;16.0.578 or later is required. <em>[Contributed&#160;by&#160;Dan&#160;Bailey&#160;and&#160;SideFX]</em></li>
<li>The Extended Operator Info window in Houdini&#160;16 now renders correctly for OpenVDB SOPs, instead of displaying a Python stack trace. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
<li>Added a Points Delete SOP for deleting points from point data grids based on group membership. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added a Mantra VRAY procedural and a delayed load SHOP for rendering point data grids. Houdini&#160;16 is required. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Replaced the Combine SOP&rsquo;s &ldquo;A/B&#160;Pairs&rdquo; and &ldquo;Flatten&rdquo; toggles with a menu of collation options that include flattening only <em>A</em>&#160;grids and flattening groups of <em>A</em>&#160;grids independently.</li>
<li>Added a slider to the Remove Divergence SOP to set the error tolerance for the pressure solver.</li>
<li>Added value type conversion options (for VDB output) to the Convert&#160;SOP.</li>
<li>Added a Densify SOP that replaces active tiles with leaf voxels.</li>
<li>Fixed a bug in the Rasterize Points&#160;SOP that capped density values to one instead of to the particles&rsquo; densities.</li>
<li>The Convert and To&#160;Polygons SOPs now accept grids of any type as surface masks, not just level set or SDF grids.</li>
<li>Added an option to the Clip&#160;SOP to clip to a camera frustum.</li>
</ul>
</dd></dl>
<p> <a name="v4_0_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 4.0.1</b> - <em>March 8, 2017</em> </dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added functions to <a class="el" href="logging_8h.html">util/logging.h</a> to simplify configuration of the logging system (via command-line arguments, in particular).</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html#ae641a7c4bebe08b387b32d0dbd3da98e">LeafManager::activeLeafVoxelCount</a>, a faster, threaded alternative to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a489fdc4bfc99bb8d177e91dc282bb3ca">Tree::activeLeafVoxelCount</a>.</li>
<li>Added a <code>-shuffle</code> option that causes <code>vdb_test</code> to run unit tests in random order, which can help to identify unintended dependencies between tests.</li>
<li>Added <code>vdb_lod</code>, a command-line tool to generate volume mipmaps for level-of-detail effects.</li>
<li>Added methods to compute the median value of <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a432aa38617a78f527942da01bba71405">active</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a3630ce205ea1c3089cd902ece4542af6">inactive</a> or <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a400fcbcf4b0ae1cd9ced460117567208">all</a> voxels in leaf nodes.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1Metadata.html#af0ecabdaf7b411d60d131bbeda4ba55b">Metadata::str</a> specialization for <a class="el" href="namespaceopenvdb_1_1v6__0.html#aac96903b37f9acf362c8bac8729ce9a6">StringMetadata</a> that eliminates the overhead of writing to a string stream.</li>
<li>Made various minor improvements to <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1PagedArray.html">util::PagedArray</a>.</li>
<li>Added an <code>install_lib</code> build target to the Makefile. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added <a class="el" href="points.html">documentation</a> and Cookbook <a class="el" href="codeExamples.html#openvdbPointsHelloWorld">examples</a> for OpenVDB&#160;Points. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Registration of OpenVDB&#160;Points grid and attribute types is now handled in <a class="el" href="namespaceopenvdb_1_1v6__0.html#a5b3b36c3182c48fa74880b41b226dd08">openvdb::initialize</a>, and <a class="el" href="namespaceopenvdb_1_1v6__0.html#a5b3b36c3182c48fa74880b41b226dd08">points::initialize</a> and <a class="el" href="namespaceopenvdb_1_1v6__0.html#a264d2f6fcdc7a020e339b0cc40218538">points::uninitialize</a> are therefore deprecated.</li>
<li>Extended multi-pass I/O to handle a variable number of passes per leaf node. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Addressed a name conflict between macros in <a class="el" href="NodeMasks_8h.html">util/NodeMasks.h</a> and symbols in the <a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a> library. <em>[Reported&#160;by&#160;Trevor&#160;Thomson]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>The <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af3f0e9f42ab322b7dd0f54dfb5b28556">fillWithSpheres</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ClosestSurfacePoint.html">ClosestSurfacePoint</a> tools now correctly handle isosurfaces outside the input volume&rsquo;s narrow band.</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1MultiResGrid.html">MultiResGrid</a> tool now supports all standard grid types, including <a class="el" href="namespaceopenvdb_1_1v6__0.html#a44c7484144fab7fb2c436e938e2d87ce">BoolGrid</a> and <a class="el" href="namespaceopenvdb_1_1v6__0.html#ab26e09c39606fb93509615cd9120d4b0">MaskGrid</a>.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#aa5d88c3fde0d2d51d27cf6c5e995682e">LeafNode::fill</a> now correctly clips the fill region to the node&rsquo;s bounding box.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#abb399cd065108e53e7b65612e74372a5">Grid::denseFill</a> no longer densifies all existing active tiles, and it now correctly handles both active and inactive fill values.</li>
<li>Fixed a bug that caused <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#acbd41a08ed8ea7c1a7d33146b8d17ce1">tools::copyToDense</a> to only partially populate the output array when delayed loading was in effect. <em>[Reported&#160;by&#160;Stuart&#160;Levy]</em></li>
<li>Fixed an issue with duplicate registration of <a class="el" href="PointDataGrid_8h.html">PointDataGrid</a> attribute types. <em>[Reported&#160;by&#160;SideFX]</em></li>
<li>Fixed an uninitialized memory bug in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh to volume</a> converter. <em>[Reported&#160;by&#160;SideFX]</em></li>
<li>Fixed a thread race condition in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1QuantizedUnitVec.html">QuantizedUnitVec</a> that could cause it to produce incorrect results. <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Fixed a dangling pointer bug in the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1ParticleAtlas.html">particle atlas</a> tool. <em>[Contributed&#160;by&#160;SideFX]</em></li>
<li>Grid operators (<a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad9d4adc505e30de4684d20efdcb66512">divergence</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a61d4d89cd34db1794e9a615dec11dc0f">gradient</a>, etc.) now produce correct results even for grids with active tile values.</li>
<li>Fixed a bug when writing an out-of-core <a class="el" href="classopenvdb_1_1v6__0_1_1points_1_1AttributeArray.html">points::AttributeArray</a> that could cause corruption of the metadata associated with the array. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Added functions <code>getLoggingLevel</code>, <code>setLoggingLevel</code>, and <code>setProgramName</code>, to allow configuration of the logging system.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Fixed a crash in the Ray SOP when the user selected an isosurface outside the target volume&rsquo;s narrow band.</li>
<li>The LOD SOP now supports all standard grid types, including boolean grids.</li>
<li>Added <code>houdini_utils::ParmFactory::setGroupChoiceList</code>, a convenience method for the creation of menus of primitive groups.</li>
<li>Made various small changes for Houdini&#160;16 compatibility. <em>[Contributed&#160;by&#160;SideFX]</em></li>
<li>The Create SOP now supports matching the new grids&rsquo; transform, voxel size, and topology to a reference grid. If the topology is being matched, it can optionally be resampled to a different voxel size.</li>
<li>Added some support for point data grids to the Clip, Topology&#160;To&#160;Level&#160;Set and Visualize SOPs. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Compression is no longer enabled by default in the Points&#160;Convert&#160;SOP for normals and colors, because they are not guaranteed to have a [0,&#160;1] range. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added a 16-bit truncation compression option to the Points&#160;Convert&#160;SOP. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Fixed a build issue with the GR_PrimVDBPoints render hook plugin that could cause <code>hython</code> to report a DSO error. <em>[Reported&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added an <code>install_lib</code> build target to the Makefile.</li>
<li>Rewrote the Remove&#160;Divergence SOP to actually remove divergence from vector fields on collocated grids, and added support for stationary and moving obstacles and an option to output a pressure field.</li>
<li>The Analysis&#160;SOP now produces correct results for grids with active tile values.</li>
<li>Added a sparse/dense toggle to the Fill&#160;SOP.</li>
<li>Added <code>openvdb_houdini::startLogForwarding</code>, <code>openvdb_houdini::stopLogForwarding</code> and <code>openvdb_houdini::isLogForwarding</code>, which control the forwarding of log messages to Houdini&rsquo;s error manager. Forwarding of library warnings and error messages is now enabled by default for SOPs when OpenVDB is built with <a href="http://log4cplus.sourceforge.net/">log4cplus</a>.</li>
</ul>
</dd></dl>
<p> <a name="v4_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 4.0.0</b> - <em>November 15, 2016</em> </dd></dl>
<dl class="section user"><dt></dt><dd>Highlights:<ul>
<li>Incorporated Double&#160;Negative&rsquo;s <a href="https://github.com/dneg/openvdb_points_dev">OpenVDB&#160;Points</a> library.</li>
<li>Introduced some C++11 constructs. A&#160;C++11-compatible compiler is now required.</li>
<li>Blosc-compressed <code>.vdb</code> files are now as much as 20% smaller.</li>
<li>Vector-valued grids are now constructed and destroyed much faster. <blockquote class="doxtable">
<p><b>Note:</b> This change and other changes in this release (see <a class="el" href="changes.html#v4_0_0_ABI_changes">ABI changes</a> below) alter the grid&#160;ABI so that it is incompatible with earlier versions of the OpenVDB library, such as the ones built into Houdini&#160;15, 15.5 and&#160;16. To disable these changes and preserve ABI compatibility, define the macro <code>OPENVDB_3_ABI_COMPATIBLE</code> when compiling OpenVDB or any code that depends on OpenVDB. </p>
</blockquote>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added an option to the <a class="el" href="tools_2PointScatter_8h.html">point scattering</a> tools to specify how far each point may be displaced from the center of its host voxel or tile.</li>
<li>Added a toggle to the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9a2667c6fe1ab087fded41b3b3f1fa4b">clip</a> tool to invert the clipping mask.</li>
<li>Custom leaf node implementations may now optimize their file layout by inheriting from <a class="el" href="structopenvdb_1_1v6__0_1_1io_1_1MultiPass.html">io::MultiPass</a>. Voxel data for grids with such leaf nodes will be written and read in multiple passes, allowing blocks of related data to be stored contiguously. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a30f392f579e3224da5ee99fb427fa55c">Tree::unallocatedLeafCount</a>, which returns the number of leaf nodes with unallocated data buffers (typically due to delayed loading).</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Vector-valued grids are now constructed and destroyed much faster.</li>
<li>Changed <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Coord.html">Coord</a>&rsquo;s data representation to facilitate C++11 uniform initialization.</li>
<li>Delayed loading from <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html">io::Files</a> is now faster due to the use of seeks instead of reads. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Made many small changes to address type conversion and other warnings reported by newer compilers, including Clang&#160;3.8.</li>
<li>Improved Blosc compression ratios and write times by increasing the block size. <em>[Contributed&#160;by&#160;Dan&#160;Bailey]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed a bug that caused topology operations (<a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#afb09afd9d023da4b1dae7a140af6848a">union</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a19eef208eb58eeb2009d67519e1c291c">intersection</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#ac1438276e00ba2c0de099acf62e33331">difference</a>) on <a class="el" href="namespaceopenvdb_1_1v6__0.html#ab26e09c39606fb93509615cd9120d4b0">MaskGrids</a> to sometimes produce incorrect results. (MaskGrids are used internally in a number of tools.)</li>
<li>Changed <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a031be7030e91d689f8c551c07d6f3808">GridBase::copyGrid</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a2ab806deefe51f0bb00db8a432b32fc3">Grid::copy</a> to close const-correctness holes.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af3f0e9f42ab322b7dd0f54dfb5b28556">tools::fillWithSpheres</a> now returns an empty list of spheres instead of crashing when the user selects an isosurface that lies outside the bounding volume&rsquo;s narrow band.</li>
<li>Fixed a null pointer dereference when copying grids that were loaded with <code>io::File::readGridPartial</code>. <em>[Reported&#160;by&#160;Nick&#160;Avramoussis]</em></li>
</ul>
</dd></dl>
<p><a class="anchor" id="v4_0_0_ABI_changes"></a></p><dl class="section user"><dt></dt><dd>ABI changes:<ul>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1NodeUnion.html">NodeUnion</a> template specialization for non-POD value types that significantly expedites construction and destruction of vector-valued grids.</li>
<li>Changed <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Coord.html">Coord</a>&rsquo;s data representation to facilitate C++11 uniform initialization.</li>
<li>Replaced occurrences of <code>boost::shared_ptr</code> with <code>std::shared_ptr</code>.</li>
<li>Changed <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a031be7030e91d689f8c551c07d6f3808">GridBase::copyGrid</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a2ab806deefe51f0bb00db8a432b32fc3">Grid::copy</a> to close const-correctness holes.</li>
<li>Added virtual function <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a30f392f579e3224da5ee99fb427fa55c">Tree::unallocatedLeafCount</a>.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Introduced some C++11 constructs. A&#160;C++11-compatible compiler is now required.</li>
<li>Added a parameter to the <a class="el" href="tools_2PointScatter_8h.html">point scattering</a> tools to control the displacement of each point from the center of its host voxel or tile. The default behavior, as before, is to allow each point to be placed (randomly) anywhere within its voxel or tile.</li>
<li>Renamed <code>LeafManager::getPreFixSum</code> to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html#a16430caebaa4a65a8071f75394adb8f3">LeafManager::getPrefixSum</a>.</li>
<li>Made <code>LeafNode::Buffer</code> a top-level class and renamed it to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafBuffer.html">LeafBuffer</a>. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Deprecated <code>io::File::readGridPartial</code> in favor of delayed loading.</li>
<li><code>tools::ClosestSurfacePoint::initialize</code> now returns a boolean indicating whether initialization was successful.</li>
<li>Dropped the <code>CopyPolicy</code> enum and added <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#ade1db9710fca86dd3d22399871648aa6">GridBase::copyGridWithNewTree</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#afb5d5d037fd3635e337cd40556415fef">Grid::copyWithNewTree</a> in order to close const-correctness holes that allowed newly-constructed, non-<code>const</code> grids to share their trees with existing <code>const</code> grids. (Where that behavior is still required, use a <a class="el" href="namespaceopenvdb_1_1v6__0.html#a3dedec3b1f11d3ce017892e5b0d8b39a">ConstPtrCast</a>.)</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Fixed a build issue with Python&#160;3 and NumPy. <em>[Contributed&#160;by&#160;Jonathan&#160;Scruggs]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Certain changes in this release (see <a class="el" href="changes.html#v4_0_0_ABI_changes">ABI changes</a> above) alter the grid&#160;ABI so that it is incompatible with earlier versions of the OpenVDB library, such as the ones built into Houdini&#160;15, 15.5 and&#160;16. To disable these changes and preserve ABI compatibility, define the macro <code>OPENVDB_3_ABI_COMPATIBLE</code> when compiling OpenVDB or any code that depends on OpenVDB.</li>
<li>Introduced some C++11 constructs that are incompatible with versions of Houdini older than&#160;15.0.</li>
<li>Fixed a bug in the Rasterize Points SOP that caused vector-valued attributes to be transferred as scalars. <em>[Contributed&#160;by&#160;Double&#160;Negative]</em></li>
<li>Added a toggle to the Clip SOP to invert the clipping mask.</li>
<li>Added a slider to the Scatter SOP to specify how far each point may be displaced from the center of its host voxel or tile.</li>
</ul>
</dd></dl>
<p> <a name="v3_2_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 3.2.0</b> - <em>August 10, 2016</em></dd></dl>
<dl class="section user"><dt></dt><dd>Highlights:<ul>
<li>New features: tool to produce and store a sequences of progressively lower resolution grids (mipmaps), an acceleration structure for fast range and nearest-neighbor searches on particles, arbitrary volume and level set specific segmentation tools, a new binary mask grid type and an efficient point to level set conversion scheme.</li>
<li>Optimizations: Faster volume to mesh conversion and threaded grid destruction, morphological dilation, csg operations and fracture tool.</li>
<li>New Houdini nodes: Segment, LOD and Topology To Level Set.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added <a class="el" href="MultiResGrid_8h.html">tools::MultiResGrid</a> a tool to produce and store a sequences of progressively lower resolution grids (mipmaps).</li>
<li>Added <a class="el" href="ParticleAtlas_8h.html">tools::ParticleAtlas</a> an acceleration structure for fast range and nearest-neighbor searches on particles, points with radius.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a1cc2d4f60d561afd2fb248e386ca67d8">segmentActiveVoxels</a>, which operates on grids of arbitrary type and separates connected components of a grid&rsquo;s active voxels into distinct grids or trees.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ac9f4df82ed92eb746d439ce4721ea8a5">segmentSDF</a>, which separates disjoint signed-distance-field surfaces into distinct grids or trees.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a3b522dd56a467487d4b16d0f1d16c0d6">extractActiveVoxelSegmentMasks</a>, which constructs a mask for each connected component of a grid&rsquo;s active voxels.</li>
<li>Added threaded level-set CSG tools <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a99a3bda1cab85509556b73d1467a004f">csgUnionCopy</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#add41b6c432f26145649e640fa76dc25d">csgIntersectionCopy</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a7029f32f9814fd95e23d202c37b8da5b">csgDifferenceCopy</a>, which, unlike the existing CSG tools, produce new grids rather than modifying their input grids. These new tools are faster and use less memory than the existing tools (if only because the input grids never need to be deep-copied).</li>
<li>Added a threaded <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a465a5aa8e8ee17ea4b9f68bcd481a372">dilateActiveValues()</a> tool with tile value support.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PointsToMask.html">PointsToMask</a> tool, which activates voxels that intersect points from a given list.</li>
<li>Added a new <a class="el" href="openvdb_8h.html">MaskGrid</a> type that uses a single bit-field to represent both voxel values and states for the <a class="el" href="LeafNodeMask_8h.html">leafnode</a> to reduce memory usage.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aabbae85c9cdcbfc824ca7222995f16ca">topologyToLevelSet</a> tool that generates a level set from the implicit boundary between active and inactive voxels in an input grid of arbitrary type.</li>
<li>Added <a class="el" href="LevelSetPlatonic_8h.html">tools::LevelSetPlatonic</a> a new tool that produces narrow-band level sets of the five Platonic solids.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a39bfe53eeb50b4ffdc96c90af7e1de1b">extractIsosurfaceMask</a> which masks voxels that intersect the implicit surface defined by the given isovalue.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html#a16430caebaa4a65a8071f75394adb8f3">getPrefixSum</a> method to the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a>, for user-managed external buffers.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html#a5d2a16e5a5dc7bd9b77421ae9bd646a0">print</a> method to the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">Dense</a> grid class.</li>
<li>Added the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox_1_1Iterator.html">CoordBBox::Iterator</a> class to conveniently iterate over coordinates covered a CoordBBox.</li>
<li>Added bit-wise operations to the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a> class.</li>
<li>New component wise constructor for the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a> class as well as the method <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html#a34a3cafb4e7020f3ff97d671f4e64a12">CoordBBox::getCornerPoints</a>.</li>
<li>Added a new <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a> constructor to create the structure from an existing array of leafnodes.</li>
<li>Added active tile count to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a37c8c75f2918ce69ecd4458792781757">Tree::print</a>.</li>
<li>Added the templated <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1MinMax.html">MinMax</a> class to compute the extrema of arbitrary value types.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#ad87de532e553a73bd6e3b55337eff1d5">sparseFill</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#abb399cd065108e53e7b65612e74372a5">denseFill</a> methods to the Grid, Tree and RootNode classes.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Complete overhaul of the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">VolumeToMesh</a> tool brings significant performance improvements and enhanced region masking, tile support and bool volume surfacing.</li>
<li>Improved the performance, parallel scaling and memory usage, of <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFracture.html">tools::LevelSetFracture</a> and updated to use the new <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ac9f4df82ed92eb746d439ce4721ea8a5">segmentSDF</a> scheme.</li>
<li>Improved the performance of <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetAdvection.html">tools::LevelSetAdvection</a> by up to five times.</li>
<li>Improved the performance of <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a39a2211a02fb606e611d3ff5bbd6f50c">Tree::voxelizeActiveTiles</a> by means of multi-threading.</li>
<li>Improved the performance of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh-to-volume converter</a>, particularly for large narrow-band widths and for signed distance fields with dense interior regions.</li>
<li>Threaded the Tree destructor and the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#ac8bb3912a3ce86b15842e79d0b421204">Tree::clear</a> method.</li>
<li>Added a parameter to the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab8c1921d688e3c65c71aac5405f155a9">signedFloodFill</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a059130a68dd01092e7db04afa0f2580e">signedFloodFillWithValues</a> tools to constrain the flood fill to specific levels of the tree.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html#a564f198735d281f486addac56f65751d">LeafManager::reduce</a> and similar methods to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1NodeManager.html">NodeManager</a> <em>[Contributed by Brett&#160;Tully]</em></li>
<li>Improved constructors of <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat3.html">math::Mat3</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat4.html">Mat4</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat3.html#a3046a801fcc8bf2908e593b1d4f32477">Mat3::cofactor</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat3.html#a13403d9598581818322cb6a686a2370c">Mat3::setRows</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat4.html#a454011d03dc14216a6b68d03e5798cf1">Mat4::setRows</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat3.html#af08e6152df053fe8980d55e7ccf607fd">Mat3::setColumns</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat4.html#a792bba2fb77c5beb92721efe95332585">Mat4::setColumns</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1NodeMask.html#a5cb28db7e1273ec6f5c6c1f958431a4a">NodeMask::isConstant</a> method for faster bit processing.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a8057e1165c928a37703f90eb9496083c">tools::prune</a> performs an improved estimate of tile values by means of medians.</li>
<li>Added toggle to switch between cell centered and node centered transforms to <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PointPartitioner.html">tools::PointPartitioner</a></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetAdvection.html">tools::LevelSetAdvection</a> that could cause non-deterministic behavior. <em>[Reported by Jeff&#160;Lait]</em></li>
<li>Fixed a bug that allowed for unexpected implicit conversion between grids of different value types.</li>
<li>Fixed a bug whereby the origins of leaf nodes with value type <code>bool</code> were ignored during equality comparisons.</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridTransformer.html">grid transformer tool</a> now correctly handles affine transforms with shear and/or reflection.</li>
<li>Fixed a bug in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh-to-volume converter</a> that could produce incorrect distances for large bandwidths.</li>
<li>Fixed a bug in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh-to-volume converter</a> that produced different results on machines with different core counts.</li>
<li>Fixed a threading bug in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a0a7784bcd2c95e7b015e6fc2c3c9d5d9">compReplace</a> tool that could cause crashes.</li>
<li>Resolved a floating-point exception in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1QuantizedUnitVec.html#ad941c3e631b49b5726346754818f444a">math::QuantizedUnitVec::pack</a> caused by calling the method with a zero-length vector. <em>[Contributed by Rick&#160;Hankins]</em></li>
<li>Improved the API of <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">Dense</a> with non-const access methods.</li>
<li>Fixed a potential threading bug in <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Queue.html">io::Queue</a>. <em>[Contributed by Josip&#160;Šumečki]</em></li>
<li>Fixed a possible division-by-zero bug in <a class="el" href="LevelSetAdvect_8h.html" title="Hyperbolic advection of narrow-band level sets. ">openvdb/tools/LevelSetAdvect.h</a>. <em>[Contributed by Rick&#160;Hankins]</em></li>
<li>Corrected the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#abac144accb9c12cd44e5326aa1cf2b52">outer product</a> method to not return the transpose result. <em>[Contributed by Gergely&#160;Klar]</em></li>
<li>Fixed a memory overallocation issue in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeAdvection.html">VolumeAdvection</a>.</li>
<li>Fix bug in <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">tools::VolumeToMesh</a> failing to clear its state when exiting early. <em>[Contributed by Edward&#160;Lam]</em></li>
<li>Fixed bug in <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1PointIndexIterator.html#a1c06356526489c1f4b02349b6520b1e4">tools::PointIndexIterator::worldSpaceSearchAndUpdate</a> that resulted in missing point indices. <em>[Reported by Rick&#160;Hankins]</em></li>
<li>Fixed Windows build issues in unit tests. <em>[Contributed by Edward&#160;Lam and Steven&#160;Caron]</em></li>
<li>Fixed <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#ac826e94acc57947d375518dc0f106cc8">isApproxZero</a> so that it works correctly when tolerance is zero. <em>[Reported by Joshua&#160;Olson]</em></li>
<li>Fixed bugs in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1NodeUnion.html">NodeUnion</a> that could cause crashes.</li>
<li>Fixed memory leak in <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1mesh__to__volume__internal_1_1ExpandNarrowband.html">tools::mesh_to_volume_internal::ExpandNarrowband</a> <em>[Reported by K&eacute;vin&#160;Dietrich]</em></li>
<li>Fixed parameter type inconsistencies in <a class="el" href="Stencils_8h.html">math/Stencils.h</a> and <a class="el" href="RayIntersector_8h.html">tools/RayIntersector.h</a>. <em>[Contributed by K&eacute;vin&#160;Dietrich and Nick&#160;Avramoussis]</em></li>
<li>Fixed a bug in the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">VolumeToMesh</a> tool that produced artifacts for adaptive surface extraction on clipped level sets. <em>[Reported by Jeff&#160;Lait]</em></li>
<li>Corrected empty grid background value in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh-to-volume converter</a> <em>[Contributed by Jeff&#160;Lait]</em></li>
<li>Fixed a bug in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a2641c8c08ca3ed3bf4cea4d9b52434b5">volume-to-mesh converter</a> that could produce NaNs.<em>[Reported by Rick Hankins]</em></li>
<li>Fixed a bug in the "Advect Points SOP" that could cause a crash when the input grids were of incorrect type.<em>[Reported by SideFX]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Deprecated <code>math::Mat3::setBasis</code> and <code>math::Mat4::setBasis</code>.</li>
<li>Renamed <code>GudonovsNormSqrd</code> to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a1bd67a71b657bbf33842d1558a46f4d3">GodunovsNormSqrd</a> <em>[Contributed by Branislav&#160;Radjenovic]</em></li>
<li>Renamed <code>ValueType</code> to <code>PosType</code> in the <a class="el" href="interfacePointArray.html" title="Partitions points into BucketLog2Dim aligned buckets using a parallel radix-based sorting algorithm...">PointArray</a> interface.</li>
<li>Deprecated tree::Tree::addLeaf(LeafNode&amp;) and added tree::Tree::addLeaf(LeafNode*).</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Updated the Python module for Python&#160;3 compatibility.</li>
<li>Updated the Python module for Boost 1.60 compatibility, to address &ldquo;no to_python (by-value) converter found&rdquo; exceptions.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Maya:<ul>
<li>Fixed bugs related to data ownership, and improved error checking. <em>[Contributed by Crawford&#160;Doran]</em></li>
<li>Updated the Read and Write DAG nodes to support file sequences and subframe evaluation.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added a Segment SOP that separates a grid&rsquo;s connected components into distinct grids.</li>
<li>Added a LOD SOP that produces a sequences of progressively lower resolution grids.</li>
<li>Added a Topology To Level Set SOP that generates a narrow-band signed distance field / level set from the interface between active and inactive voxels in an arbitrary grid.</li>
<li>Revamped the From Particles SOP UI and added a more efficient level set conversion method that supports Houdini 15 packed points.</li>
<li>Updated the Rasterize Points SOP with support for frustum transforms, sub region masking and orientation logic that matches the native Copy SOP&rsquo;s orientation.</li>
<li>Updated the Platonic SOP with support for all five Platonic solids.</li>
<li>Added hooks for registering SOP_NodeVDB text callbacks for different grid types. <em>[Contributed by Nick&#160;Avramoussis]</em></li>
<li>The Resample and Combine SOPs now correctly handle affine transforms with shear and/or reflection.</li>
<li>Removed the StaggeredBoxSampler code path in SOP_OpenVDB_Advect because it introduces bias. <em>[Contributed by Fredrik&#160;Salomonsson]</em></li>
<li>Fixed a bug in the Ray SOP whereby the distance attribute was created with the wrong data type. <em>[Contributed by Nick&#160;Avramoussis]</em></li>
<li>The From Polygon SOP now allows the user to either specify the voxel count along an axis or the voxel size in world units (the only option in the past).</li>
</ul>
</dd></dl>
<p> <a name="v3_1_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 3.1.0</b> - <em>October 1, 2015</em></dd></dl>
<dl class="section user"><dt></dt><dd>Highlights:<ul>
<li>New features: advection of arbitrary volumes, general-purpose preconditioned linear solver and Poisson solver, segmentation of topologically-enclosed regions of a volume, new and faster bitmask operators, concurrent paged array, volume diagnostics</li>
<li>Optimizations: threaded grid constructors and topology operations; faster mesh to volume conversion, SDF to fog volume conversion and grid pruning; faster, unbounded particle partitioning</li>
<li>New Houdini nodes: Advect, Diagnostics, Rasterize Points, Remap, Remove Divergence, Sort Points</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>New features:<ul>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeAdvection.html">volume advection</a> tool for sparse advection of non-level-set volumes.</li>
<li>Added a preconditioned <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math_1_1pcg.html#abbf96ede759d64b2980bf2c9937fca8c">conjugate gradient solver</a>.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools_1_1poisson.html#ae79d948d2102c9bb9a687c8652b6086d">Poisson solver</a> for functions sampled on grids.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a1a3ef894d7a7eaf47a03d2508d2d95d3">extractEnclosedRegion</a>, which detects topologically-enclosed (watertight) exterior regions (cavities) that can result from CSG union operations between level sets with concavities that are capped. (See the unit test <code>TestPoissonSolver::testSolveWithSegmentDomain</code> for an example in which this tool is used to identify regions of trapped fluid when solving for pressure in a volume of incompressible fluid.)</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1PagedArray.html">PagedArray</a>, a concurrent, dynamic linear array data structure with fast <em>O</em>(1) value access (both random and sequential).</li>
<li>Added <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1Sampler.html">Sampler</a>, which provides a unified API for both staggered and non-staggered interpolation of various orders.</li>
<li>Added equality and inequality operators to <a class="el" href="classopenvdb_1_1v6__0_1_1Metadata.html">Metadata</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1MetaMap.html">MetaMap</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1CheckLevelSet.html">CheckLevelSet</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1CheckFogVolume.html">CheckFogVolume</a> tools that perform various tests on symmetric, narrow-band level sets and fog volumes, respectively, to diagnose potential issues.</li>
<li>Added support for value accessors that are not registered with their trees. (Bypassing accessor registration can improve performance in rare cases but should be used with caution, since the accessor will be left in an invalid state if the tree topology is modified.)</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#ae9865f5a8eabf75fc2ad06581e22edcd">stealNodes</a> method that transfers ownership of all nodes in a tree of a certain type and inserts them into a linear array.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9a314c42b9d506bd60c1acdd6f41aac7">tools::createLevelSetBox</a> factory function for level-set grids.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html#a5657262321ae0bc8da1ef47ecc16e63e">Dense::offsetToCoord</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafBuffer.html#acf96d55d2729746b08fe7755387b467a">LeafNode::Buffer::data</a>, which provides direct access to a leaf node&rsquo;s voxel value array, avoiding out-of-core overhead. Use with caution.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1NodeMask.html#acb08bd8aa449398a7172efcd98e1128c">NodeMask::foreach</a> method for efficient evaluation of complex bitwise operations.</li>
<li>Added a bitwise difference method to <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1NodeMask.html#ac1f6685961e34847c92688f580e04ecb">NodeMask</a>.</li>
<li>Added a <code>-version</code> option to <code>vdb_print</code>, <code>vdb_render</code> and <code>vdb_view</code>.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Improvements:<ul>
<li>Deep, conversion and topology copy <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html">Grid</a> constructors are now threaded and up to five times faster.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#afb09afd9d023da4b1dae7a140af6848a">Grid::topologyUnion</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a19eef208eb58eeb2009d67519e1c291c">Grid::topologyIntersection</a>, and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#ac1438276e00ba2c0de099acf62e33331">Grid::topologyDifference</a> are now much faster due to threading.</li>
<li>Significantly improved the performance, parallel scaling and memory usage of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh to volume</a> converter, and implemented a more robust inside/outside sign classification scheme.</li>
<li>Reimplemented the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PointPartitioner.html">point partitioning</a> tool for improved performance, concurrency and memory usage. The tool is now unbounded in the sense that points may be distributed anywhere in index space.</li>
<li>Significantly improved the performance of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aad82d1b0039598209bc21cd9aa4511a0">SDF to fog volume</a> converter.</li>
<li>Significantly improved the performance of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a59b83096927350f3324cba935be37717">sdfInteriorMask</a> tool and added support for both grid and tree inputs.</li>
<li>Made various optimizations and improvements to the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMorphing.html">level set morphing</a> tool.</li>
<li>Aggregated <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1DiscreteField.html">DiscreteField</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1EnrightField.html">EnrightField</a> (formerly in <a class="el" href="LevelSetAdvect_8h.html" title="Hyperbolic advection of narrow-band level sets. ">tools/LevelSetAdvect.h</a>) and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VelocitySampler.html">VelocitySampler</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VelocityIntegrator.html">VelocityIntegrator</a> (formerly in <a class="el" href="tools_2PointAdvect_8h.html" title="Class PointAdvect advects points (with position) in a static velocity field. ">tools/PointAdvect.h</a>) into a single header, <a class="el" href="VelocityFields_8h.html" title="Defines two simple wrapper classes for advection velocity fields as well as VelocitySampler and Veloc...">tools/VelocityFields.h</a>.</li>
<li>Modified the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab8c1921d688e3c65c71aac5405f155a9">signed flood fill</a> tool to accept grids of any signed scalar value type, not just floating-point grids.</li>
<li>The <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a8057e1165c928a37703f90eb9496083c">prune</a> tool is now faster, and it employs an improved compression technique on trees with floating-point values.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Bug fixes:<ul>
<li>Fixed a build issue that could result in spurious &ldquo;Blosc encoding is not supported&rdquo; errors unless <code>OPENVDB_USE_BLOSC</code> was <code>#define</code>d when compiling client code.</li>
<li>Added NaN and inf checks to the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PointPartitioner.html">point partitioning</a> tool.</li>
<li>Fixed a <code>vdb_view</code> issue whereby the frame buffer size did not necessarily match the window size. <em>[Contributed by Rafael&#160;Campos]</em></li>
<li>Fixed a roundoff issue in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html">LevelSetTracker</a> that could result in NaNs.</li>
<li>Changed <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1CheckNormGrad.html">CheckNormGrad</a> to check the magnitude of the gradient rather than the square of the magnitude.</li>
<li>Fixed parameter type inconsistencies in <a class="el" href="Ray_8h.html" title="A Ray class. ">math/Ray.h</a> and <a class="el" href="RayIntersector_8h.html" title="Accelerated intersection of a ray with a narrow-band level set or a generic (e.g. density) volume...">tools/RayIntersector.h</a>. <em>[Contributed by K&eacute;vin&#160;Dietrich]</em></li>
<li>Fixed incorrect handling of signed values in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9a2667c6fe1ab087fded41b3b3f1fa4b">clip</a> tool (and the Clip SOP).</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Removed the <code>math::Hermite</code> class since it was no longer used and caused build issues for some.</li>
<li>Refactored the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetAdvection.html">level set advection</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">level set filtering</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMeasure.html">level set measuring</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html">level set tracking</a> tools.</li>
<li>Extended the API of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Diagnose.html">Diagnose</a> tool and disabled copy construction.</li>
<li>Extended and unified the API of various Samplers.</li>
<li>Added an optional template argument to the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html">ValueAccessor</a> class to allow for unregistered accessors.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added a Rasterize Points SOP that produces density volumes and transfers arbitrary point attributes using a weighted-average scheme. The node incorporates a VOP subnetwork for procedural modeling, and its accompanying creation script defines a default network with VEX procedures for cloud and velocity field modeling. (See the creation script file header for installation details.)</li>
<li>Merged the Advect Level Set SOP into a new Advect SOP that supports advection of arbitrary volumes, not just level sets.</li>
<li>Added a Remove Divergence SOP that eliminates divergence from a velocity field.</li>
<li>Added a Diagnostics SOP that can identify various problems with level sets, fog volumes and other grids.</li>
<li>Added a Sort Points SOP that spatially reorders a list of points so that points that are close together in space are also close together in the list. This can improve CPU cache coherency and performance for random-access operations.</li>
<li>Added a Remap SOP that maps voxel values in an input range to values in an output range through a user-defined transfer function.</li>
<li>Added an option to the Convert SOP to activate interior voxels. <em>[Contributed by SESI]</em></li>
<li>The To Spheres SOP can now optionally output a <code>pscale</code> attribute.</li>
<li>Added <code>openvdb_houdini::SOP_NodeVDB::duplicateSourceStealable()</code>, which in conjunction with the Unload flag can help to minimize deep copying of grids between nodes. The Advect, Convert, Fill, Filter, Fracture, Noise, Offset Level Set, Prune, Remap, Remove Divergence, Renormalize Level Set, Resize Narrow Band, Smooth Level Set and Transform SOPs all have this optimization enabled, meaning that they can potentially steal, rather than copy, data from upstream nodes that have the Unload flag enabled. <em>[Contributed by Double&#160;Negative]</em></li>
<li>Redesigned the UI of the Visualize SOP and added toggles to draw with or without color, to use the grid name as the attribute name for points with values, and to attach grid index coordinates to points.</li>
<li>Added toggles to the Filter, Rebuild Level Set, Resize Narrow Band, Smooth Level Set and To Spheres SOPs to specify units in either world space or index space.</li>
<li>Fixed an issue whereby grids generated by the Rebuild Level Set SOP did not always display as surfaces in the viewport.</li>
<li>The Metadata SOP now sets appropriate viewport visualization options when the grid class is changed.</li>
</ul>
</dd></dl>
<p> <a name="v3_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 3.0.0</b> - <em>January 14, 2015</em><ul>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html">File</a> class now supports delayed loading of <code>.vdb</code> files, meaning that memory is not allocated for voxel values until the values are actually accessed. (This feature is enabled by default.) Until a grid has been fully loaded, its source <code>.vdb</code> file must not be modified or deleted, so for safety, <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html#ab9e653cf43c03bbfe0decd34494892ca">File::open</a> automatically makes private copies of source files that are smaller than a user-specified limit (see <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html#a149180fbea28c88ffbb77739a21354cb">File::setCopyMaxBytes</a>). The limit can be set to zero to disable copying, but if it cannot be guaranteed that a file will not be modified, then it is best not to enable delayed loading for that file.</li>
<li><code>.vdb</code> files can now optionally be compressed with the Blosc&#160;LZ4 codec. <a href="http://www.blosc.org/">Blosc</a> compresses almost as well as ZLIB, but it is much faster.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PointPartitioner.html">PointPartitioner</a>, a tool for fast spatial sorting of points stored in an external array, and <a class="el" href="PointIndexGrid_8h.html">PointIndexGrid</a>, an acceleration structure for fast range and nearest-neighbor searches.</li>
<li>Added <a class="el" href="NodeManager_8h.html">tree::NodeManager</a>, which linearizes a tree to facilitate efficient multithreading across all tree levels.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a8057e1165c928a37703f90eb9496083c">tools::prune</a> (and other variants), which replaces and outperforms <code>Tree::prune</code>.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab8c1921d688e3c65c71aac5405f155a9">tools::signedFloodFill</a>, which replaces and outperforms <code>Tree::signedFloodFill</code>.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad795f2f3910144753a5e03d12f4703de">tools::changeBackground</a> (and other variants), which replaces and outperforms <code>Tree::setBackground()</code>.</li>
<li>Added a fast but approximate narrow-band level set <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html#ad27daf87efe47196bc6d2f4df72b8f09">dilation</a> method, a fast narrow-band level set <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html#a45b809eb78e72aae53bbddcc9c2f308a">erosion</a> method, and a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html#a6e084d9731121c25a00947bd847b3f37">masked normalization</a> method to <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html">LevelSetTracker</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Diagnose.html">Diagnose</a>, which performs multithreaded diagnostics on grids to identify issues like values that are NaNs or out-of-range. It optionally generates a boolean grid of all values that fail user-defined tests.</li>
<li>Added optional alpha masks to <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMorphing.html">LevelSetMorphing</a>.</li>
<li>Fixed an intermittent crash in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMorphing.html">LevelSetMorphing</a>.</li>
<li>Added <code><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aabbae85c9cdcbfc824ca7222995f16ca" title="Compute the narrow-band signed distance to the interface between active and inactive voxels in the in...">tools::topologyToLevelSet()</a></code>, which generates a level set from the implicit boundary between active and inactive voxels in an arbitrary input grid. <em>[DWA internal]</em></li>
<li>Improved the performance of point scattering (by orders of magnitude) and added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1DenseUniformPointScatter.html">DenseUniformPointScatter</a> class as well as support for fractional numbers of particles per voxel.</li>
<li>Improved the performance and memory footprint of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ParticlesToLevelSet.html">ParticlesToLevelSet</a> tool for large numbers (tens to hundreds of millions) of particles.</li>
<li>Added edge-adjacent (6+12=18 neighbors) and vertex-adjacent (6+12+8=26 neighbors) dilation algorithms to <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Morphology.html#a8381628238e0c71371cba47c63d30451">Morphology::dilateVoxels</a>. The default dilation pattern is still face-adjacent (6&#160;neighbors).</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a33a3cd99c0b9c78e1f6da3d9a36fdaff">Tree::getNodes</a>, which allows for fast construction of linear arrays of tree nodes for use in multithreaded code such as the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a> or <a class="el" href="NodeManager_8h.html">tree::NodeManager</a>.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Extrema.html">math::Extrema</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ac6aea86a2df380225a3b3c8553efe4e3">tools::extrema</a> to efficiently compute minimum and maximum values in a grid.</li>
<li>Added support for material color grids to all level set <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1BaseShader.html">shaders</a>, and added an option to <code>vdb_render</code> that allows one to specify a reference grid to be used for material color lookups.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0.html#a6277cb21367ab53dd877749aac53dd16">getLibraryVersionString</a> and <a class="el" href="version_8h.html#a473ea1fceaac55f6e7766789543e2259">OPENVDB_LIBRARY_VERSION_STRING</a>.</li>
<li>Modified the mesh to volume converter to always set the grid background value to the exterior narrow-band width, and added finite value checks to narrow band parameters.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a2641c8c08ca3ed3bf4cea4d9b52434b5">tools::volumeToMesh</a> now compiles for all grid types but throws an exception if the input grid does not have a scalar value type.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html#a4849f1481df698ce43518cb1924b0792">File::readGrid</a> overload and <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#acbd2ddfaf3713feab2393a4e213a1ed6">readBuffers</a> overloads to the grid, tree and node classes that allow one to specify a bounding box against which to clip a grid while reading it. For large grids, clipping while reading can result in significantly lower memory usage than clipping after reading.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a7d9768f753c671503d2ee5e2320117d7">GridBase::clipGrid</a>, which clips a grid against a world-space bounding box, and <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#ac7e311a9da3fe887bc96ec532efce480">GridBase::clip</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a409633b422404c1c7df4e0ffdd02eac1">Tree::clip</a>, which clip against an index-space bounding box.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9a2667c6fe1ab087fded41b3b3f1fa4b">tools::clip</a>, which clips a grid either against a bounding box or against the active voxels of a mask grid.</li>
<li><code>io::File::readGridPartial</code> allocates the nodes of a grid&rsquo;s tree as before, but it now allocates leaf nodes without data buffers. (This feature is mainly for internal use. Partially-read grids should be used with care if at all, and they should be treated as read-only.)</li>
<li>Grid names retrieved using a <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File_1_1NameIterator.html">File::NameIterator</a> now always uniquely identify grids; they no longer generate &lsquo;more than one grid named&#160;&ldquo;<em>x</em>&rdquo;&rsquo; warnings when there are multiple grids of the same name in a file (for files written starting with this version of the OpenVDB library).</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a15dad3a20f9ca8647f21cb8394fc1847">Tree::ValueOffIter</a> that could cause <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1TreeValueIteratorBase.html#abb35acc58a2730ea34826a8f1f9d3f7a">depth-bounded</a> iterators to return incorrect values.</li>
<li>Eliminated a recursive call in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1TreeValueIteratorBase.html#a80870c233d0237e3588a2d6f8d176916">TreeValueIteratorBase::next</a> that could cause crashes on systems with a limited stack size.</li>
<li>Fixed memory leaks in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a4bfa9bd46c8206d75f01c69c05425b5d">RootNode::topologyDifference</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#ac29f98775a4d88dc3163abc979db6060">RootNode::topologyIntersection</a>.</li>
<li>Fixed a memory leak in <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Queue.html">io::Queue</a> when the queue was full and a write task could not be added within the timeout interval.</li>
<li>Fixed a potential division by zero crash in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a001d3e901a369bb50ed1b4e78e57b303">tools::compDiv</a> with integer-valued grids.</li>
<li>Fixed kernel normalization in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Filter.html">filter tool</a> so that it is correct for integer-valued grids.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafBuffer.html#a8ae956e9d4ceab35d332d85a2536eee3">LeafNode::Buffer::getValue</a> whereby Visual C++ would return a reference to a temporary. <em>[Contributed by SESI]</em></li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ParticlesToLevelSet.html">tools::ParticlesToLevelSet</a> related to attribute transfer when leaf nodes are produced without active values.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1CpuTimer.html">util::CpuTimer</a> and removed the more simplistic <code>unittest_util::CpuTimer</code> from <code>unittest/util.h</code>.</li>
<li>Eliminated the use of <code>getopt</code> for command-line argument parsing in <code>vdb_test</code>.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0.html#a5b3b36c3182c48fa74880b41b226dd08">openvdb::initialize</a> now properly initializes <a href="http://log4cplus.sourceforge.net/">log4cplus</a> if it is enabled, eliminating &ldquo;No appenders could be found&rdquo; errors.</li>
<li>Fixed a bug in the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1QuantizedUnitVec.html#ad941c3e631b49b5726346754818f444a">QuantizedUnitVec::pack</a> method that caused quantization artifacts.</li>
<li>Added convenience class <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1AlphaMask.html">AlphaMask</a></li>
<li>Added constructors and methods to both <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1RandInt.html">RandInt</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Rand01.html">Rand01</a> to set and reset the random seed value.</li>
<li>Added convenience methods for <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#ac6a391c9680282be6c16ef5c2487a676">transforming</a> <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#a47df44101e2ffa381199e1cfe34b0512">bounding</a> <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#a1c9811c714720a6f49e5ba8ed2935c0c">boxes</a> to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html">math::Transform</a>.</li>
<li><code>vdb_view</code> is now compatible with both GLFW&#160;2 and GLFW&#160;3.</li>
<li>Made many small changes to address type conversion and other warnings reported by newer compilers like GCC&#160;4.8 and ICC&#160;14.</li>
<li>Replaced the <code>HALF_INCL_DIR</code> and <code>HALF_LIB_DIR</code> Makefile variables with <code>ILMBASE_INCL_DIR</code> and <code>ILMBASE_LIB_DIR</code> and added <code>ILMBASE_LIB</code>, to match <a href="https://github.com/openexr/openexr">OpenEXR</a>&rsquo;s library organization. <em>[Contributed by Double&#160;Negative]</em></li>
<li>Eliminated most local (function-scope) static variables, because Visual&#160;C++ doesn&rsquo;t guarantee thread-safe initialization of local statics. <em>[Contributed by&#160;SESI]</em></li>
<li>Fixed a bug in <a class="el" href="namespaceopenvdb_1_1v6__0.html#a96f17bb3ca94b97140963d044220956b">readString</a> related to empty strings. <em>[Contributed by Fabio&#160;Piparo]</em></li>
<li>Fixed a bug in the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">VolumeToMesh</a> simplification scheme that was creating visual artifacts.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>The addition of a <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#acbd2ddfaf3713feab2393a4e213a1ed6">GridBase::readBuffers</a> virtual function overload and the <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#ac7e311a9da3fe887bc96ec532efce480">GridBase::clip</a> <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#aa50685064dcaaf89fa9eb46b24d23b18">GridBase::readNonresidentBuffers</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#ae68f15390dfa328e07ae1a372deb1139">Tree::clipUnallocatedNodes</a> virtual functions changes the grid ABI so that it is incompatible with earlier versions of the OpenVDB library (such as the ones in Houdini 12.5 and&#160;13). Define the macro <code>OPENVDB_2_ABI_COMPATIBLE</code> when compiling OpenVDB to disable these changes and preserve ABI compatibility.</li>
<li>All <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1BaseShader.html">shaders</a> now have a template argument to specify the type of an optional material color grid, but the default type mimics the old, uniform color behavior.</li>
<li>Removed a deprecated <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Stream.html#a3f92305001c2ce9ef5ba0ace3644872c">io::Stream::write</a> overload.</li>
<li>The point counts in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1UniformPointScatter.html">UniformPointScatter</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1NonUniformPointScatter.html">NonUniformPointScatter</a> are now specified and returned as <a class="el" href="namespaceopenvdb_1_1v6__0.html#ac69cfd22ec6d99378ea1e829dc42781e">Index64</a>.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1RandInt.html">RandInt</a> has an extra template argument to specify the integer type. The <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#aa7c934bc507f54a073f4816f42cda172">RandomInt</a> typedef is unchanged.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1io.html#a800ccc64a54a59c6ca626382336cdbf4">io::readData</a>, <a class="el" href="structopenvdb_1_1v6__0_1_1io_1_1HalfReader_3_01false_00_01T_01_4.html#aae92eae700f11f358af61334586184e5">io::HalfReader::read</a> and <a class="el" href="structopenvdb_1_1v6__0_1_1io_1_1HalfWriter_3_01false_00_01T_01_4.html#a42264d1aef975ac32de3b8385f7e2871">io::HalfWriter::write</a> now take a <code>uint32_t</code> argument indicating the type of compression instead of a <code>bool</code> indicating whether compression is enabled.</li>
<li>Removed <code>io::Archive::isCompressionEnabled()</code> and <code>io::Archive::setCompressionEnabled()</code> and renamed <code>io::Archive::compressionFlags()</code> and <code>io::Archive::setCompressionFlags()</code> to <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Archive.html#ac7b909b151a02c8cd69cbe56e5eea689">io::Archive::compression</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Archive.html#aaac46d62e6470ece11e3c97d4c93dd6e">io::Archive::setCompression</a>.</li>
<li>Internal and leaf node classes are now required to provide "PartialCreate" constructors that optionally bypass the allocation of voxel buffers. Leaf node classes must now also provide <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#add23d9f5bbc918076d240287a9b3664f">allocate</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a0bcdab3616db481dd211594529479f94">isAllocated</a> methods to manage the allocation of their buffers.</li>
<li>Removed <code>pruneInactive</code> and <code>pruneLevelSet</code> methods from the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html">Tree</a> and various node classes. These methods have been replaced by the much faster pruning functions found in <a class="el" href="Prune_8h.html" title="Defined various multi-threaded utility functions for trees. ">tools/Prune.h</a>.</li>
<li>Removed <code>signedFloodFill</code> methods from the <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html">Grid</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html">Tree</a> and various node classes. These methods have been replaced by the much faster functions found in <a class="el" href="SignedFloodFill_8h.html" title="Propagate the signs of distance values from the active voxels in the narrow band to the inactive valu...">tools/SignedFloodFill.h</a>.</li>
<li>Removed <code>Grid::setBackground()</code> and <code>Tree::setBackground()</code> (use the faster <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad795f2f3910144753a5e03d12f4703de">changeBackground</a> tool instead), and removed the default argument from <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#ab9a9be183fae028c2479dd20163a52ee">RootNode::setBackground</a>.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Python:<ul>
<li>Added grid methods <code>convertToPolygons()</code> and <code>convertToQuads()</code>, which convert volumes to meshes, and <code>createLevelSetFromPolygons()</code>, which converts meshes to volumes. <a href="http://docs.scipy.org/doc/">NumPy</a> is required.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Maya:<ul>
<li>Added an adaptive polygonal surface extraction node.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added a new Resize Narrow Band SOP that can efficiently adjust the width of a level set&rsquo;s narrow band. This allows, for example, for a level set to be created quickly from points or polygons with a very narrow band that is then quickly resized to a desired width.</li>
<li>Fixed bugs in the Smooth Level Set and Reshape Level Set SOPs that caused them to ignore the selected discretization scheme.</li>
<li>Added a Morph Level Set SOP.</li>
<li>Added a From Points SOP to very quickly generate a level set from a point cloud, ignoring any radius attribute. <em>[DWA internal]</em></li>
<li>Added a Voxel Scale mode to the Resample SOP.</li>
<li>Improved the performance and memory footprint of the From Particles SOP for large numbers (tens to hundreds of millions) of particles.</li>
<li>The Scatter SOP now accepts fractional numbers of particles per voxel.</li>
<li>Improved the performance of the Scatter SOP by more than an order of magnitude.</li>
<li>The Clip SOP now has a toggle to choose explicitly between a mask grid or a bounding box as the clipping region. As a consequence, the mask grid can now be unnamed.</li>
<li>Added the OpenVDB library version number to the Extended Operator Information for all SOPs.</li>
<li>SOPs are now linked with an rpath to the directory containing the OpenVDB library.</li>
<li>Like the native Houdini file SOP, the Read SOP now allows missing frames to be reported either as errors or as warnings.</li>
<li>The Read SOP now has an optional input for geometry, the bounding box of which can be used to clip grids as they are read. For large grids, clipping while reading can result in significantly lower memory usage than clipping after reading.</li>
<li>The From Polygons and Convert SOPs now default to using the polygon soup mesh representation, which uses less memory.</li>
</ul>
</dd></dl>
<p> <a name="v2_3_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 2.3.0</b> - <em>April 23, 2014</em><ul>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a586a786ed67c81b31e7bcc11c70df047">extractSparseTree</a>, which selectively extracts and transforms data from a dense grid to produce a sparse tree, and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae1e62f3b18a1d40b3195c83b4d76c1e5">extractSparseTreeWithMask</a>, which copies data from the index-space intersection of a sparse tree and a dense input grid.</li>
<li>Added copy constructors to the <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#aff94355411f5d40e863ac37ace513d65">Grid</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a213c0ce777bcd4328500431d3231a446">Tree</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#ad4048d463e26625beb9e08adbd50528e">RootNode</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html#a210d885537e470d3c48b4471ee3c0f50">InternalNode</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#afe89df18cceff54e3bd31e0c4003b96e">LeafNode</a> classes, and an assignment operator overload to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a0447467224f7c21ad0e3926279ab7eb9">RootNode</a>, that allow the source and destination to have different value types.</li>
<li>Modified <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#af1cbd79b5ac7b0898386849c5d93e4cc">Tree::combine2</a> to permit combination of trees with different value types.</li>
<li>Added <a class="el" href="structopenvdb_1_1v6__0_1_1CanConvertType.html">CanConvertType</a> and <a class="el" href="structopenvdb_1_1v6__0_1_1tree_1_1RootNode_1_1SameConfiguration.html">RootNode::SameConfiguration</a> metafunctions, which perform compile-time tests for value type and tree type compatibility, and a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a44152640d1b71b1a5eaf192b9018bd53">RootNode::hasCompatibleValueType</a> method, which does runtime checking.</li>
<li>Added optional support for logging using <a href="http://log4cplus.sourceforge.net/">log4cplus</a>. See <a class="el" href="logging_8h.html">logging.h</a> and the <code>INSTALL</code> file for details.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html#a8db424ca83bc0f7a3a424bf077311ed5">VolumeRayIntersector::hits</a>, which returns all the hit segments along a ray. This is generally more efficient than repeated calls to <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html#af4173fb25fc272ff5b3bad7bc8fe4f99">VolumeRayIntersector::march</a>.</li>
<li>Added member class <a class="el" href="structopenvdb_1_1v6__0_1_1math_1_1Ray_1_1TimeSpan.html">Ray::TimeSpan</a> and method <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Ray.html#a163e52144c2d51801e3b2999d4f13296">Ray::valid</a>, and deprecated method <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Ray.html#aaf71dafe5885504c1c55158c65e8ddb8">Ray::test</a>.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1VolumeHDDA.html">VolumeHDDA</a> that could cause rendering artifacts when a ray&rsquo;s start time was zero. <em>[Contributed&#160;by&#160;Mike&#160;Farnsworth]</em></li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ac53b377981f3baf29cef347335e3588b">compositeToDense</a> tool, which composites data from a sparse tree into a dense array, using a sparse alpha mask. Over, Add, Sub, Min, Max, Mult, and Set are supported operations.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad334e154d8c33d43c6db806d714d4ed0">transformDense</a> tool, which applies a functor to the value of each voxel of a dense grid within a given bounding box.</li>
<li>Improved the performance of node iterators.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>Collected the digital differential analyzer code from <a class="el" href="Ray_8h.html" title="A Ray class. ">math/Ray.h</a> and <a class="el" href="RayIntersector_8h.html" title="Accelerated intersection of a ray with a narrow-band level set or a generic (e.g. density) volume...">tools/RayIntersector.h</a> into a new header file, <a class="el" href="DDA_8h.html" title="Digital Differential Analyzers specialized for VDB. ">math/DDA.h</a>.</li>
<li>Rewrote <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1VolumeHDDA.html">VolumeHDDA</a> and made several changes to its API. (<a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1VolumeHDDA.html">VolumeHDDA</a> is used internally by <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html">VolumeRayIntersector</a>, whose API is unchanged.)</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#af1cbd79b5ac7b0898386849c5d93e4cc">Tree::combine2</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a59d05166d77d6604823a6e669f3b53f7">RootNode::combine2</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html#a5d4331edaf20f7ae003e5cbf79349bd1">InternalNode::combine2</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#aa4357e9061a929862d8624e16d6a53bd">LeafNode::combine2</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1CombineArgs.html">CombineArgs</a> all now require an additional template argument, which determines the type of the other tree.</li>
<li>Assignment operators for <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager_1_1LeafRange_1_1Iterator.html#a51a82dcfafd33ad27988480b67cbbc12">LeafManager::LeafRange::Iterator</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1BaseMaskIterator.html#a9ad59d0fd8c0ed1f370885f24bcf6f21">BaseMaskIterator</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1NodeMask.html#a336b756005c07d48de0a6a8d1056a2c0">NodeMask</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1util_1_1RootNodeMask.html#aca1a391bb41461cafd64c1f0250bcdb5">RootNodeMask</a> now return references to the respective objects.</li>
<li>Removed a number of methods that were deprecated in version&#160;2.0.0 or earlier.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added a Clip SOP, which does volumetric clipping.</li>
<li>Added an Occlusion Mask SOP, which generates a mask of the voxels inside a camera frustum that are occluded by objects in an input grid.</li>
<li>The Combine SOP now applies the optional signed flood fill only to level set grids, since that operation isn&rsquo;t meaningful for other grids.</li>
<li>The Filter SOP now processes all grid types, not just scalar grids.</li>
</ul>
</dd></dl>
<p> <a name="v2_2_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 2.2.0</b> - <em>February 20, 2014</em><ul>
<li>Added a simple, multithreaded <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRender.html">volume renderer</a>, and added volume rendering support to the <code>vdb_render</code> command-line renderer.</li>
<li>Added an option to the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetRayIntersector.html">LevelSetRayIntersector</a> and to <code>vdb_render</code> to specify the isovalue of the level set.</li>
<li>Added methods to the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetRayIntersector.html">LevelSetRayIntersector</a> to return the time of intersection along a world or index ray and to return the level set isovalue.</li>
<li>Improved the performance of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html">VolumeRayIntersector</a> and added support for voxel dilation to account for interpolation kernels.</li>
<li>Added a <a class="el" href="codeExamples.html#sInterpolation">section</a> to the Cookbook on interpolation using <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1BoxSampler.html">BoxSampler</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridSampler.html">GridSampler</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1DualGridSampler.html">DualGridSampler</a>, et al.</li>
<li>Added a <a class="el" href="overview.html#secGrid">section</a> to the Overview on grids and grid metadata.</li>
<li>Modified <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1DualGridSampler.html">DualGridSampler</a> so it is more consistent with <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridSampler.html">GridSampler</a>.</li>
<li>The <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aea23457a3376d6fb611bd3f46fdffd61">cpt</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a1d7270767850c4f3241bce09b730d84a">curl</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af55f3361b55d27809c1da5bf33db393a">laplacian</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a5ad8501c4e8a1e0f613d880f3431d6ca">meanCurvature</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af5c0227e6c84797a06542df58c2b564d">normalize</a> tools now output grids with appropriate <a class="el" href="namespaceopenvdb_1_1v6__0.html#ae93f92d10730a52ed3b207d5811f6a6e">vector types</a> (covariant, contravariant, etc.).</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a642190ccc3febe94d8b07ac37f892349">transformVectors</a> tool, which applies an affine transformation to the voxel values of a vector-valued grid in accordance with the grid&rsquo;s <a class="el" href="namespaceopenvdb_1_1v6__0.html#ae93f92d10730a52ed3b207d5811f6a6e">vector type</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a29e160275061736e411c8a5892fcff95">world space/local space</a> setting.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a001d3e901a369bb50ed1b4e78e57b303">compDiv</a> tool, which combines grids by dividing the values of corresponding voxels.</li>
<li>Fixed a bug in the mean curvature computation that could produce NaNs in regions with constant values.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#ac1438276e00ba2c0de099acf62e33331">Grid::topologyDifference</a> method.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec3.html#ae28cd3d83a911b1fe1d6a57cdd3c70a4">exp</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec3.html#a6099c71b51b35c00ac10686eb4557566">sum</a> methods to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec2.html">Vec2</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec3.html">Vec3</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Vec4.html">Vec4</a>.</li>
<li>Improved the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af3f0e9f42ab322b7dd0f54dfb5b28556">fillWithSpheres</a> tool for small volumes that are just a few voxels across.</li>
<li>Improved the accuracy of the mesh to volume converter.</li>
<li>Fixed a bug in the mesh to volume converter that caused incorrect sign classifications for narrow-band level sets.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1NonlinearFrustumMap.html#a36ac951a39338f6da89f7ea4b67eb59b">NonlinearFrustumMap::applyIJT</a> that resulted in incorrect values when computing the gradient of a grid with a frustum transform.</li>
<li>Fixed a file I/O bug whereby some <code>.vdb</code> files could not be read correctly if they contained grids with more than two distinct inactive values.</li>
<li>Fixed an off-by-one bug in the numbering of unnamed grids in <code>.vdb</code> files. The first unnamed grid in a file is now retrieved using the name &ldquo;<code>[0]</code>&rdquo;, instead of &ldquo;<code>[1]</code>&rdquo;.</li>
<li>Fixed a build issue reported by Clang&#160;3.2 in <a class="el" href="GridOperators_8h.html" title="Apply an operator to an input grid to produce an output grid with the same active voxel topology but ...">tools/GridOperators.h</a>.</li>
<li>Fixed a memory leak in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Film.html">Film</a>.</li>
<li>Added library and file format version number constants to the Python module.</li>
<li>Improved convergence in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRender.html">volume renderer</a>. <em>[Contributed by Jerry Tessendorf and Mark Matthews]</em></li>
<li>Made various changes for compatibility with Houdini&#160;13 and with C++11 compilers. <em>[Contributed&#160;by&#160;SESI]</em></li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html#af4173fb25fc272ff5b3bad7bc8fe4f99">VolumeRayIntersector::march</a> no longer returns an <code>int</code> to distinguish tile vs. voxel hits. Instead, it now returns <code>false</code> if no intersection is detected and <code>true</code> otherwise. Also, <em>t0</em> and <em>t1</em> might now correspond to the first and last hits of multiple adjacent leaf nodes and/or active tiles.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1DualGridSampler.html">DualGridSampler</a> is no longer templated on the target grid type, and the value accessor is now passed as an argument.</li>
<li>The <code>.vdb</code> file format has changed slightly. Tools built with older versions of OpenVDB should be recompiled to ensure that they can read files in the new format.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>Houdini:<ul>
<li>Added topology union, intersection and difference operations to the Combine SOP. These operations combine the active voxel topologies of grids that may have different value types.</li>
<li>Added a Divide operation to the Combine SOP.</li>
<li>Added support for boolean grids to the Combine, Resample, Scatter, Prune and Visualize SOPs.</li>
<li>The Fill SOP now accepts a vector as the fill value, and it allows the fill region bounds to be specified either in index space (as before), in world space, or using the bounds of geometry connected to an optional new reference input.</li>
<li>Added a toggle to the Offset Level Set SOP to specify the offset in either world or voxel units.</li>
<li>Added a toggle to the Transform and Resample SOPs to apply the transform to the voxel values of vector-valued grids, in accordance with those grids&rsquo; <a class="el" href="namespaceopenvdb_1_1v6__0.html#ae93f92d10730a52ed3b207d5811f6a6e">vector types</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a29e160275061736e411c8a5892fcff95">world space/local space</a> settings.</li>
<li>Added a Vector Type menu to the Vector Merge SOP.</li>
<li>Removed masking options from the Renormalize SOP (since masking is not supported yet).</li>
<li>Reimplemented the Vector Merge SOP for better performance and interruptibility and to fix a bug in the handling of tile values.</li>
</ul>
</dd></dl>
<p> <a name="v2_1_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 2.1.0</b> - <em>December 12, 2013</em><ul>
<li>Added a small number of Maya nodes, primarily for conversion of geometry to and from OpenVDB volumes and for visualization of volumes.</li>
<li>Added an initial implementation of <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMorphing.html">level set morphing</a> (with improvements to follow soon).</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetMeasure.html">tools::LevelSetMeasure</a>, which efficiently computes the surface area, volume and average mean-curvature of narrow-band level sets, in both world and voxel units. Those quantities are now exposed as intrinsic attributes on the Houdini VDB primitive and can be queried using the native Measure SOP.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">tools::Dense</a> now supports the XYZ memory layout used by Houdini and Maya in addition to the ZYX layout used in OpenVDB trees.</li>
<li>Improved the performance of masking in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">level set filter</a> tool and added inversion and scaling of the mask input, so that any scalar-valued volume can be used as a mask, not just volumes with a [0,&#160;1] range.</li>
<li>Added optional masking to the non-level-set filters, to the grid operators (CPT, curl, divergence, gradient, Laplacian, mean curvature, magnitude, and normalize) and to the Analysis and Filter SOPs.</li>
<li>Added more narrow band controls to the Rebuild Level Set SOP.</li>
<li>Improved the accuracy of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af574939742ed86a148731292520c8e30">level set rebuild</a> tool.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9fa99ba23890494cdfe09a6d6abdd380">tools::activate</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#abc78330c21bf8fc7b0840d7ab6f0675d">tools::deactivate</a>, which set the active states of tiles and voxels whose values are equal to or approximately equal to a given value, and added a Deactivate Background Voxels toggle to the Combine SOP.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BBox.html#a82bf71bb2a279fbf778c0927bba67ea2">BBox::applyMap</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BBox.html#ad5cea98d8cd7acf355acc91b76f906c0">BBox::applyInverseMap</a>, which allow for transformation of axis-aligned bounding boxes.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PositionShader.html">position shader</a> to the level set ray-tracer (primarily for debugging purposes).</li>
<li>Added an <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Queue.html">io::Queue</a> class that manages a concurrent queue for asynchronous serialization of grids to files or streams.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Archive.html">io::Archive</a> whereby writing unnamed, instanced grids (i.e., grids sharing a tree) to a file rendered the file unreadable.</li>
<li>Fixed a bug in the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">volume to mesh</a> converter that caused it to generate invalid polygons when the zero crossing lay between active and inactive regions.</li>
<li>Fixed a bug in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1UniformPointScatter.html">point scatter</a> tool (and the Scatter SOP) whereby the last voxel always remained empty.</li>
<li>Fixed a bug in the Read SOP that caused grids with the same name to be renamed with a numeric suffix (e.g., &ldquo;grid[1]&rdquo; &ldquo;grid[2]&rdquo;, etc.).</li>
<li>Fixed some unit test failures on 64-bit Itanium machines.</li>
</ul>
</dd></dl>
<dl class="section user"><dt></dt><dd>API changes:<ul>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Filter.html">Filter</a> tool is now templated on a mask grid, and threading is controlled using a grain size, for consistency with most of the other level set tools.</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">LevelSetFilter</a> tool is now templated on a mask grid.</li>
<li>All shaders now take a ray direction instead of a ray.</li>
</ul>
</dd></dl>
<p> <a name="v2_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 2.0.0</b> - <em>October 31, 2013</em><ul>
<li>Added a <a class="el" href="python.html">Python module</a> with functions for basic manipulation of grids (but no tools, yet).</li>
<li>Added ray intersector tools for efficient, hierarchical intersection of rays with <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetRayIntersector.html">level-set</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1VolumeRayIntersector.html">generic</a> volumes.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Ray.html">Ray</a> class and a hierarchical <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1DDA.html">Digital Differential Analyzer</a> for fast ray traversal.</li>
<li>Added a fully multi-threaded <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetRayTracer.html">level set ray tracer</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1PerspectiveCamera.html">camera</a> <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1OrthographicCamera.html">classes</a> that mimic Houdini&rsquo;s cameras.</li>
<li>Added a simple, command-line renderer (currently for level sets only).</li>
<li>Implemented a new meshing scheme that produces topologically robust two-manifold meshes and is twice as fast as the previous scheme.</li>
<li>Implemented a new, topologically robust (producing two-manifold meshes) level-set-based seamless fracture scheme. The new scheme eliminates visible scarring seen in the previous implementation by subdividing internal, nonplanar quads near fracture seams. In addition, fracture seam points are now tagged, allowing them to be used to drive pre-fracture dynamics such as local surface buckling.</li>
<li>Improved the performance of <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a62f4dee5746b8584d0e5f36607741f64">Tree::evalActiveVoxelBoundingBox</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a520c048155f7e980738fae2e20b94de1">Tree::activeVoxelCount</a>, and significantly improved the performance of <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a7ee4943745aae6581276c5bdd00b9bb0">Tree::evalLeafBoundingBox</a> (by about&#160;30x).</li>
<li>Added a tool (and a Houdini SOP) that fills a volume with adaptively-sized overlapping or non-overlapping spheres.</li>
<li>Added a Ray SOP that can be used to perform geometry projections using level-set ray intersections or closest-point queries.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ClosestSurfacePoint.html">tool</a> that performs accelerated closest surface point queries from arbitrary points in world space to narrow-band level sets.</li>
<li>Increased the speed of masked level set filtering by 20% for the most common cases.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BoxStencil.html">math::BoxStencil</a>, with support for trilinear interpolation and gradient computation.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a4a4089e30211443f0d6431cff8bef3cc">Tree::topologyIntersection</a>, which intersects a tree&rsquo;s active values with those of another tree, and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a7c6ad1abf61c3b13d7ad7408f4634226">Tree::topologyDifference</a>, which performs topological subtraction of one tree&rsquo;s active values from another&rsquo;s. In both cases, the <code>ValueType</code>s of the two trees need not be the same.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a520e0be909633190122627e7588b4e11">Tree::activeTileCount</a>, which returns the number of active tiles in a tree.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#af19ecd53e11e700b6f0aca11f0ab95e5">math::MinIndex</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#aa6c66def61b5724ec82af232e120d5df">math::MaxIndex</a>, which find the minimum and maximum components of a vector without any branching.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BBox.html#af0a30e92d1d69b59583830eb3c5173cc">BBox::minExtent</a>, which returns a bounding box&rsquo;s shortest axis.</li>
<li>The default <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BBox.html">BBox</a> constructor now generates an invalid bounding box rather than an empty bounding box positioned at the origin. The new behavior is consistent with <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a>. <em>[Thanks to Rick Hankins for suggesting this fix.]</em></li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html#ad20897c5c8bd47f5d4005989bead0e55">CoordBBox::reset</a>, which resets a bounding box to its initial, invalid state.</li>
<li>Fixed a bug in the default <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1ScaleMap.html">ScaleMap</a> constructor that left some data used in the inverse uninitialized.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1MapBase.html#ab19f98d166aa7852aa92b4967f972376">MapBase::applyJT</a>, which applies the Jacobian transpose to a vector (the Jacobian transpose takes a range-space vector to a domain-space vector, e.g., world to index), and added <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1MapBase.html#a9608de4e5928f1e614be8d9c468ad3c4">MapBase::inverseMap</a>, which returns a new map representing the inverse of the original map (except for <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1NonlinearFrustumMap.html">NonlinearFrustumMap</a>, which does not currently have a defined inverse map). <br />
<b>Note:</b> Houdini 12.5 uses an earlier version of OpenVDB, and maps created with that version lack virtual table entries for these new methods, so do not call these methods from Houdini&#160;12.5.</li>
<li>Reimplemented <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#aa7c934bc507f54a073f4816f42cda172">math::RandomInt</a> using Boost.Random instead of <code>rand()</code> (which is not thread-safe), and deprecated <code>math::randUniform()</code> and added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#aff7821261741b71a95194bfb7c36e76d">math::Random01</a> to replace it.</li>
<li>Modified <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a718fc3e33310680728f4fbf04db240c0">tools::copyFromDense</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#acbd41a08ed8ea7c1a7d33146b8d17ce1">tools::copyToDense</a> to allow for implicit type conversion (e.g., between a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">Dense&lt;Int32&gt;</a> and a <a class="el" href="namespaceopenvdb_1_1v6__0.html#a79a0127ad333d2a6201f025a0d9944f4">FloatTree</a>) and fixed several bugs in <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1CopyFromDense.html">tools::CopyFromDense</a>.</li>
<li>Fixed bugs in <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Stats.html">math::Stats</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Histogram.html">math::Histogram</a> that could produce <code>NaN</code>s or other incorrect behavior if certain methods were called on populations of size zero.</li>
<li>Renamed <code>struct tolerance</code> to <a class="el" href="structopenvdb_1_1v6__0_1_1math_1_1Tolerance.html">math::Tolerance</a> and <code>negative</code> to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a1c8fb9c2ff7958326cd4ed92c0935f90">math::negative</a> and removed <code>math::toleranceValue()</code>.</li>
<li>Implemented a closest point on line segment algorithm, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a02fbd6a331f458a41a8349c2abef23a4">math::closestPointOnSegmentToPoint</a>.</li>
<li>Fixed meshing issues relating to masking and automatic partitioning.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#adf11d9e6e826c6ce03707c950c5c4930">Grid::merge</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a2ba5f332b68e4a1ebba9dbf4b95ec807">Tree::merge</a> now accept an optional <a class="el" href="namespaceopenvdb_1_1v6__0.html#ade9c95ac55c647839e6f3e9b462c0575">MergePolicy</a> argument that specifies one of three new merging schemes. (The old merging scheme, which is no longer available, used logic for each tree level that was inconsistent with the other levels and that could result in active tiles being replaced with nodes having only inactive values.)</li>
<li>Renamed <code>LeafNode::coord2offset()</code>, <code>LeafNode::offset2coord()</code> and <code>LeafNode::offset2globalCoord()</code> to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a87e51328d0a2a73ad0bea8ba1a8c4b55">coordToOffset</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a0780d59f892d82bf5fab713b6991a9ce">offsetToLocalCoord</a>, and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a79eb1621afd1bcf8ca45386b04a839bb">offsetToGlobalCoord</a>, respectively, and likewise for <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html#a79eb1621afd1bcf8ca45386b04a839bb">InternalNode</a>. <em>[Thanks to Rick Hankins for suggesting this change.]</em></li>
<li>Replaced <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html">Tree</a> methods <code>setValueOnMin</code>, <code>setValueOnMax</code> and <code>setValueOnSum</code> with <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#adbdcf782cb40fcb514524737e2f8e070">tools::setValueOnMin</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a7c76dc587d3f1735c0113f04ace2f257">tools::setValueOnMax</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a92d1e43e1896e1a7fa9548c4fd4a2988">tools::setValueOnSum</a> (and a new <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a2fa019501d9dddd1891421935c31efba">tools::setValueOnMult</a>) and added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#aa6954a428c0ef18a03431f251f4e7d24">Tree::modifyValue</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a5cb69af7e17c3a9a6d6dc360c878448c">Tree::modifyValueAndActiveState</a>, which modify voxel values in-place via user-supplied functors. Similarly, replaced <code><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a92d1e43e1896e1a7fa9548c4fd4a2988" title="Set the value of the voxel at the given coordinates in tree to the sum of its current value and value...">ValueAccessor::setValueOnSum()</a></code> with <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#aa6954a428c0ef18a03431f251f4e7d24">ValueAccessor::modifyValue</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#a5cb69af7e17c3a9a6d6dc360c878448c">ValueAccessor::modifyValueAndActiveState</a>, and added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1TreeValueIteratorBase.html#a3cc3619337daed341d5243d870987bad">modifyValue</a> method to all value iterators.</li>
<li>Removed <code>LeafNode::addValue</code> and <code>LeafNode::scaleValue</code>.</li>
<li>Added convenience classes <a class="el" href="structopenvdb_1_1v6__0_1_1tree_1_1Tree3.html">tree::Tree3</a> and <a class="el" href="structopenvdb_1_1v6__0_1_1tree_1_1Tree5.html">tree::Tree5</a> for custom tree configurations.</li>
<li>Added an option to the From Particles SOP to generate an alpha mask, which can be used to constrain level set filtering so as to preserve surface details.</li>
<li>The mesh to volume converter now handles point-degenerate polygons.</li>
<li>Fixed a bug in the Level Set Smooth, Level Set Renormalize and Level Set Offset SOPs that caused the group name to be ignored.</li>
<li>Fixed various OS X and Windows build issues. <em>[Contributions from SESI and DD]</em></li>
</ul>
</dd></dl>
<p> <a name="v1_2_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 1.2.0</b> - <em>June 28 2013</em><ul>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">Level set filters</a> now accept an optional alpha mask grid.</li>
<li>Implemented sharp feature extraction for level set surfacing. This enhances the quality of the output mesh and reduces aliasing artifacts.</li>
<li>Added masking options to the meshing tools, as well as a spatial multiplier for the adaptivity threshold, automatic partitioning, and the ability to preserve edges and corners when mesh adaptivity is applied.</li>
<li>The mesh to volume attribute transfer scheme now takes surface orientation into account, which improves accuracy in proximity to edges and corners.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html#a449355fc31ee41387283def6d663f807">foreach</a> method to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">tree::LeafManager</a> that, like <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ada1c7e219f36d148510ce22d7599171b">tools::foreach</a>, applies a user-supplied functor to each leaf node in parallel.</li>
<li>Rewrote the particle to level set converter, simplifying the API, improving performance (especially when particles have a fixed radius), adding the capability to transfer arbitrary point attributes, and fixing a velocity trail bug.</li>
<li>Added utility methods <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a26cda3bb3a8c22cba850111b53500ae8">Sign</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a2fb1e42c790c71152be119f89ba41b5b">SignChange</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#ac826e94acc57947d375518dc0f106cc8">isApproxZero</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#aadeca47249bb8648a0dc4af7bf4ef010">Cbrt</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a5467144a171c4ae04ce4c10b2f41ed94">ZeroCrossing</a> to <a class="el" href="Math_8h.html" title="General-purpose arithmetic and comparison routines, most of which accept arbitrary value types (or at...">math/Math.h</a>.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor3.html#ab1f0b235067a11fd0a6a03f48573723c">probeNode</a> method to the value accessor and to tree nodes that returns a pointer to the node that contains a given voxel.</li>
<li>Deprecated <code>LeafNode::addValue</code> and <code>LeafNode::scaleValue</code>.</li>
<li>Doubled the speed of the mesh to volume converter (which also improves the performance of the fracture and level set rebuild tools) and improved its inside/outside voxel classification near edges and corners.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridSampler.html">GridSampler</a> now accepts either a grid, a tree or a value accessor, and it offers faster index-based access methods and much better performance in cases where many instances are allocated.</li>
<li>Extended <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">tools::Dense</a> to make it more compatible with existing tools.</li>
<li>Fixed a crash in <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Archive.html">io::Archive</a> whenever the library was unloaded from memory and then reloaded. <em>[Contributed by Ollie Harding]</em></li>
<li>Fixed a bug in <code>GU_PrimVDB::buildFromPrimVolume()</code>, seen during the conversion from Houdini volumes to OpenVDB grids, that could cause signed flood fill to be applied to non-level set grids, resulting in active tiles with incorrect values.</li>
<li>Added a Prune SOP with several pruning schemes.</li>
</ul>
</dd></dl>
<p> <a name="v1_1_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 1.1.1</b> - <em>May 10 2013</em><ul>
<li>Added a simple <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Dense.html">dense grid class</a> and tools to copy data from dense voxel arrays into OpenVDB grids and vice-versa.</li>
<li>Starting with Houdini 12.5.396, plugins built with this version of OpenVDB can coexist with native Houdini OpenVDB nodes.</li>
<li>The level set fracture tool now smooths seam line edges during mesh extraction, eliminating staircase artifacts.</li>
<li>Significantly improved the performance of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1util.html#ab4d8be7464843058c5f7933bc8f6329f">leafTopologyIntersection</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1util.html#abcbacf9547634369b8523dc4dc953013">leafTopologyDifference</a> utilities and added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a360f3f39eb6d02f55b36697c5b5c2d14">LeafNode::topologyDifference</a> method.</li>
<li>Added convenience functions that provide simplified interfaces to the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a49d6517666da8e1ec1175651ebf12f32">mesh to volume</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a2641c8c08ca3ed3bf4cea4d9b52434b5">volume to mesh</a> converters.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a8e31fdabdae973490731a7be4f31d9ad">tools::accumulate</a> function that is similar to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ada1c7e219f36d148510ce22d7599171b">tools::foreach</a> but can be used to accumulate the results of computations over the values of a grid.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a0298e9e5b5b3a443d321bd24825f1d5a">tools::statistics</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a35876c2d474f3ed28fc6a6aa4b4f5678">tools::opStatistics</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a705b035d27c69d566009424697c36a65">tools::histogram</a>, which efficiently compute statistics (mean, variance, etc.) and histograms of grid values (using <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Stats.html">math::Stats</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Histogram.html">math::Histogram</a>).</li>
<li>Modified <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a> to adhere to TBB&rsquo;s splittable type requirements, so that, for example, a <code>CoordBBox</code> can be used as a blocked iteration range.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a75454b135a1e19473aa702a90fd00802">Tree::addTile</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a6c20c22e9a994a30c9640cbe1ec982bc">Tree::addLeaf</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a0f336548f0b7d3e0debadf68d43602b6">Tree::stealNode</a>, for fine control over tree construction.</li>
<li>Addressed a numerical stability issue when performing Gaussian filtering of level set grids.</li>
<li>Changed the return type of <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html#a5226e1e3ee32005e374d1e8f31a659f4">CoordBBox::volume</a> to reduce the risk of overflow.</li>
<li>When the input mesh is self-intersecting, the mesh to volume converter now produces a level set with a monotonic gradient field.</li>
<li>Fixed a threading bug in the mesh to volume converter that caused it to produce different results for the same input.</li>
<li>Fixed a bug in the particle to level set converter that prevented particles with zero velocity from being rasterized in Trail mode.</li>
<li>Added an optional input to the Create SOP into which to merge newly-created grids.</li>
<li>Fixed a bug in the Resample SOP that caused it to produce incorrect narrow-band widths when resampling level set grids.</li>
<li>Fixed a bug in the To Polygons SOP that caused intermittent crashes when the optional reference input was connected.</li>
<li>Fixed a bug in the Advect Level Set SOP that caused a crash when the velocity input was connected but empty.</li>
<li>The Scatter and Sample Point SOPs now warn instead of erroring when given empty grids.</li>
<li>Fixed a crash in <code>vdb_view</code> when stepping through multiple grids after changing render modes.</li>
<li><code>vdb_view</code> can now render fog volumes and vector fields, and it now features interactively adjustable clipping planes that enable one to view the interior of a volume.</li>
</ul>
</dd></dl>
<p> <a name="v1_1_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 1.1.0</b> - <em>April 4 2013</em><ul>
<li>The <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae190c2befe2b252b8d930bd632964ab7">resampleToMatch</a> tool, the Resample SOP and the Combine SOP now use level set rebuild to correctly and safely resample level sets. Previously, scaling a level set would invalidate the signed distance field, leading to holes and other artifacts.</li>
<li>Added a mask-based topological <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aec7b415f8b2e1ef32d6d832e87ac2e8e">erosion tool</a>, and rewrote and simplified the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aa7e34b5d2c9f6d491cada2461ce9413a">dilation tool</a>.</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetAdvection.html">LevelSetAdvection</a> tool can now advect forward or backward in time.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a467d50f8a53357977d5720498a88d72c" title="Reduce the memory footprint of a tree by replacing nodes whose values are all inactive with inactive ...">Tree::pruneLevelSet()</a> now replaces each pruned node with a tile having the inside or outside background value, instead of arbitrarily selecting one of the node&rsquo;s tile or voxel values.</li>
<li>When a grid is saved to a file with <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#ac838a0e531771a0328984635524dcaf6">saveFloatAsHalf</a> set to <code>true</code>, the grid&rsquo;s background value is now also quantized to 16 bits. (Not quantizing the background value caused a mismatch with the values of background tiles.)</li>
<li>As with <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ada1c7e219f36d148510ce22d7599171b">tools::foreach</a>, it is now possible to specify whether functors passed to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae870e81ce652b9c057d92dbe4b4b9811">tools::transformValues</a> should be shared across threads.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">tree::LeafManager</a> can now be instantiated with a <code>const</code> tree, although buffer swapping with <code>const</code> trees is disabled.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab8c1921d688e3c65c71aac5405f155a9">Grid::signedFloodFill</a> overload that allows one to specify inside and outside values.</li>
<li>Fixed a bug in Grid::setBackground() so that now only the values of inactive voxels change.</li>
<li>Fixed <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#afb09afd9d023da4b1dae7a140af6848a">Grid::topologyUnion</a> so that it actually unions tree topology, instead of just the active states of tiles and voxels. The previous behavior broke multithreaded code that relied on input and output grids having compatible tree topology.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html">math::Transform</a> now includes an <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#a800851025d068929cc2d3f895cd6d630">isIdentity</a> predicate and methods to <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#adfb2cf25ab2e2d86da604c83fac6ff13">pre-</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html#a548d9f1c7b9af3790c9b8658222f33a5">postmultiply</a> by a matrix.</li>
<li>Modified the <a class="el" href="NodeMasks_8h.html">node mask</a> classes to permit octree-like tree configurations (i.e., with a branching factor of two) and to use 64-bit operations instead of 32-bit operations.</li>
<li>Implemented a new, more efficient <a class="el" href="namespaceopenvdb_1_1v6__0_1_1math.html#a67e9c79fea14b69c77a1f53473f9284d">closest point on triangle</a> algorithm.</li>
<li>Implemented a new vertex normal scheme in the volume to mesh converter, and resolved some overlapping polygon issues.</li>
<li>The volume to mesh converter now meshes not just active voxels but also active tiles.</li>
<li>Fixed a bug in the mesh to volume converter that caused unsigned distance field conversion to produce empty grids.</li>
<li>Fixed a bug in the level set fracture tool whereby the cutter overlap toggle was ignored.</li>
<li>Fixed an infinite loop bug in <code>vdb_view</code>.</li>
<li>Updated <code>vdb_view</code> to use the faster and less memory-intensive OpenVDB volume to mesh converter instead of marching cubes, and rewrote the shader to be OpenGL 3.2 and GLSL 1.2 compatible.</li>
<li>Given multiple input files or a file containing multiple grids, <code>vdb_view</code> now displays one grid at a time. The left and right arrow keys cycle between grids.</li>
<li>The To Polygons SOP now has an option to associate the input grid&rsquo;s name with each output polygon.</li>
</ul>
</dd></dl>
<p> <a name="v1_0_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 1.0.0</b> - <em>March 14 2013</em><ul>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af574939742ed86a148731292520c8e30">tools::levelSetRebuild</a> now throws an exception when given a non-scalar or non-floating-point grid.</li>
<li>The tools in <a class="el" href="GridOperators_8h.html" title="Apply an operator to an input grid to produce an output grid with the same active voxel topology but ...">tools/GridOperators.h</a> are now interruptible, as is the Analysis SOP.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager_1_1LeafRange_1_1Iterator.html">leaf node iterator</a> and a TBB-compatible <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager_1_1LeafRange.html">range class</a> to the LeafManager.</li>
<li>Modified the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">VolumeToMesh</a> tool to handle surface topology issues around fracture seam lines.</li>
<li>Modified the Makefile to allow <code>vdb_view</code> to compile on OS X systems (provided that GLFW is available).</li>
<li>Fixed a bug in the Create SOP that resulted in "invalid parameter name" warnings.</li>
<li>The Combine SOP now optionally resamples the A grid into the B grid&rsquo;s index space (or vice-versa) if the A and B transforms differ.</li>
<li>The Vector Split and Vector Merge SOPs now skip inactive voxels by default, but they can optionally be made to include inactive voxels, as they did before.</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFracture.html">LevelSetFracture</a> tool now supports custom rotations for each cutter instance, and the Fracture SOP now uses quaternions to generate uniformly-distributed random rotations.</li>
</ul>
</dd></dl>
<p> <a name="v0_104_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.104.0</b> - <em>February 15 2013</em><ul>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af574939742ed86a148731292520c8e30">tool</a> and a SOP to rebuild a level set from any scalar volume.</li>
<li><code></code>.vdb files are now saved using a mask-based compression scheme that is an order of magnitude faster than ZLIB and produces comparable file sizes for level set and fog volume grids. (ZLIB compression is still enabled by default for other classes of grids).</li>
<li>The <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Filter.html">Filter</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">LevelSetFilter</a> tools now include a Gaussian filter, and mean (box) filtering is now 10-50x faster.</li>
<li>The isosurface <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">meshing tool</a> is now more robust (to level sets with one voxel wide narrow bands, for example).</li>
<li>Mesh to volume conversion is on average 1.5x faster and up to 5.5x faster for high-resolution meshes where the polygon/voxel size ratio is small.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0.html#ab5fa070ff38ad858c9b4b61fca2a4a76">createLevelSet</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af58255d2aecc83f56338a7344c6cb30e">createLevelSetSphere</a> factory functions for level set grids.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html">tree::ValueAccessor</a> is now faster for trees of height 2, 3 and 4 (the latter is the default), and it now allows one to specify, via a template argument, the number of node levels to be cached, which can also improve performance in special cases.</li>
<li>Added a toggle to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ada1c7e219f36d148510ce22d7599171b">tools::foreach</a> to specify whether or not the functor should be shared across threads.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0.html#ae3df02d240c0ee97f9be0bec983ec446">Mat4s</a> and <a class="el" href="namespaceopenvdb_1_1v6__0.html#a60941cfbfde284759f9bb90261a50595">Mat4d</a> metadata types.</li>
<li>Added explicit pre- and postmultiplication methods to the <code>Transform</code>, <code>Map</code> and <code>Mat4</code> classes and deprecated the old accumulation methods.</li>
<li>Modified <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1NonlinearFrustumMap.html">NonlinearFrustumMap</a> to be more compatible with Houdini&rsquo;s frustum transform.</li>
<li>Fixed a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridTransformer.html">GridTransformer</a> bug that caused it to translate the output grid incorrectly in some cases.</li>
<li>Fixed a bug in the tree-level <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafIteratorBase.html">LeafIterator</a> that resulted in intermittent crashes in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aa7e34b5d2c9f6d491cada2461ce9413a">tools::dilateVoxels</a>.</li>
<li>The <code>Hermite</code> data type and Hermite grids are no longer supported.</li>
<li>Added <a class="el" href="GridOperators_8h.html" title="Apply an operator to an input grid to produce an output grid with the same active voxel topology but ...">tools/GridOperators.h</a>, which includes new, cleaner implementations of the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aea23457a3376d6fb611bd3f46fdffd61">closest point transform</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a1d7270767850c4f3241bce09b730d84a">curl</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad9d4adc505e30de4684d20efdcb66512">divergence</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a61d4d89cd34db1794e9a615dec11dc0f">gradient</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af55f3361b55d27809c1da5bf33db393a">Laplacian</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a9370eee6dbb6de354a68a54b9cdd1dba">magnitude</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a5ad8501c4e8a1e0f613d880f3431d6ca">mean curvature</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af5c0227e6c84797a06542df58c2b564d">normalize</a> tools.</li>
<li>Interrupt support has been improved in several tools, including <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ParticlesToLevelSet.html">tools::ParticlesToLevelSet</a>.</li>
<li>Simplified the API of the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BaseStencil.html">Stencil</a> class and added an <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BaseStencil.html#a4b2c9891717a31845694db27546f0d5a">intersects</a> method to test for intersection with a specified isovalue.</li>
<li>Renamed <code>voxelDimensions</code> to <code>voxelSize</code> in transform classes and elsewhere.</li>
<li>Deprecated <code>houdini_utils::ParmFactory::setChoiceList</code> in favor of <code>houdini_utils::ParmFactory::setChoiceListItems</code>, which requires a list of <em>token, label</em> string pairs.</li>
<li>Made various changes for Visual C++ compatibility. <em>[Contributed by SESI]</em></li>
<li>Fixed a bug in <code>houdini_utils::getNodeChain()</code> that caused the Offset Level Set, Smooth Level Set and Renormalize Level Set SOPs to ignore frame changes. <em>[Contributed by SESI]</em></li>
<li>The From Particles SOP now provides the option to write into an existing grid.</li>
<li>Added a SOP to edit grid metadata.</li>
<li>The Fracture SOP now supports multiple cutter objects.</li>
<li>Added a To Polygons SOP that complements the Fracture SOP and allows for elimination of seam lines, generation of correct vertex normals and grouping of polygons when surfacing fracture fragments, using the original level set or mesh as a reference.</li>
</ul>
</dd></dl>
<p> <a name="v0_103_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.103.1</b> - <em>January 15 2013</em><ul>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html">tree::ValueAccessor</a> read operations are now faster for four-level trees. (Preliminary benchmark tests suggest a 30-40% improvement.)</li>
<li>For vector-valued grids, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ad0f06ce463a63898a09fea378ac6912e">tools::compMin</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab89a5ef4e61074f401e72aef834afda1">tools::compMax</a> now compare vector magnitudes instead of individual components.</li>
<li>Migrated grid sampling code to a new file, <a class="el" href="Interpolation_8h.html">Interpolation.h</a>, and deprecated old files and classes.</li>
<li>Added a level-set <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFracture.html">fracture tool</a> and a Fracture SOP.</li>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a59b83096927350f3324cba935be37717">tools::sdfInteriorMask</a>, which creates a mask of the interior region of a level set grid.</li>
<li>Fixed a bug in the mesh to volume converter that produced unexpected nonzero values for voxels at the intersection of two polygons, and another bug that produced narrow-band widths that didn&rsquo;t respect the background value when the half-band width was less than three voxels.</li>
<li><code>houdini_utils::ParmFactory</code> can now correctly generate ramp multi-parms.</li>
<li>Made various changes for Visual C++ compatibility. <em>[Contributed by SESI]</em></li>
<li>The Convert SOP can now convert between signed distance fields and fog volumes and from volumes to meshes. <em>[Contributed by SESI]</em></li>
<li>For level sets, the From Mesh and From Particles SOPs now match the reference grid&rsquo;s narrow-band width.</li>
<li>The Scatter SOP can now optionally scatter points in the interior of a level set.</li>
</ul>
</dd></dl>
<p> <a name="v0_103_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.103.0</b> - <em>December 21 2012</em><ul>
<li>The mesh to volume converter is now 60% faster at generating level sets with wide bands, and the From Mesh SOP is now interruptible.</li>
<li>Fixed a threading bug in the recently-added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a0a7784bcd2c95e7b015e6fc2c3c9d5d9">compReplace</a> tool that caused it to produce incorrect output.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a5730e3a8bc07b016c9c4f95f62651e32">probeConstLeaf</a> method to the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a5730e3a8bc07b016c9c4f95f62651e32">Tree</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#a4a86e7d65de16a43a7b1eef5c5da1033">ValueAccessor</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#ab0e736a8c396807bd2643176d6e7beee">node</a> classes.</li>
<li>The Houdini VDB primitive doesn&rsquo;t create a <code>name</code> attribute unnecessarily (i.e., if its grid&rsquo;s name is empty), but it now correctly allows the name to be changed to the empty string.</li>
<li>Fixed a crash in the Vector Merge SOP when fewer than three grids were merged.</li>
<li>The From Particles SOP now features a "maximum half-width" parameter to help avoid runaway computations.</li>
</ul>
</dd></dl>
<p> <a name="v0_102_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.102.0</b> - <em>December 13 2012</em><ul>
<li>Added <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a0a7784bcd2c95e7b015e6fc2c3c9d5d9">tools::compReplace</a>, which copies the active values of one grid into another, and added a "Replace A With Active B" mode to the Combine SOP.</li>
<li><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ab8c1921d688e3c65c71aac5405f155a9">Grid::signedFloodFill</a> no longer enters an infinite loop when filling an empty grid.</li>
<li>Fixed a bug in the particle to level set converter that sometimes produced level sets with holes, and fixed a bug in the SOP that could result in random output.</li>
<li>Fixed an issue in the frustum preview feature of the Create SOP whereby rendering very large frustums could cause high CPU usage.</li>
<li>Added streamline support to the constrained advection scheme in the Advect Points SOP.</li>
<li>Added an Advect Level Set SOP.</li>
</ul>
</dd></dl>
<p> <a name="v0_101_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.101.1</b> - <em>December 11 2012</em> (DWA internal release)<ul>
<li>Partially reverted the Houdini VDB primitive&rsquo;s grid accessor methods to their pre-0.98.0 behavior. A primitive&rsquo;s grid can once again be accessed by shared pointer, but now also by reference. Accessor methods for grid metadata have also been added, and the primitive now ensures that metadata and transforms are never shared.</li>
<li>Fixed an intermittent crash in the From Particles SOP.</li>
</ul>
</dd></dl>
<p> <a name="v0_101_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.101.0</b> - <em>December 6 2012</em> (DWA internal release)<ul>
<li>Partially reverted the <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html">Grid</a>&rsquo;s <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a9041f381eeb1287165c1287603de9663">tree</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a29489066f0a6b234e780dad3322f4040">transform</a> accessor methods to their pre-0.98.0 behavior, eliminating copy-on-write but preserving their return-by-reference semantics. These methods are now supplemented with a suite of <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#adc47070164ba764f5afe561998f88f17">shared</a> <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#ade901fd5fd57d7fd89e6f5e5e2625105">pointer</a> <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#aaeef9292b7aa4fd419dcdf4c83ede12c">accessors</a>.</li>
<li>Restructured the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh to volume converter</a> for a 40% speedup and to be more robust to non-manifold geometry, to better preserve sharp features, to support arbitrary tree configurations and to respect narrow-band limits.</li>
<li>Added a <code>getNodeBoundingBox</code> method to <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a00265a6f2e4bb7edf268ce430744f410">RootNode</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html#a6051e4ba75b59a01e4d0e91ba9786070">InternalNode</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a6051e4ba75b59a01e4d0e91ba9786070">LeafNode</a> that returns the index space spanned by a node.</li>
<li>Made various changes for Visual C++ compatibility. <em>[Contributed by SESI]</em></li>
<li>Renamed the Reshape Level Set SOP to Offset Level Set.</li>
<li>Fixed a crash in the Convert SOP and added support for conversion of empty grids.</li>
</ul>
</dd></dl>
<p> <a name="v0_100_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.100.0</b> - <em>November 30 2012</em> (DWA internal release)<ul>
<li>Greatly improved the performance of the level set to fog volume <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aad82d1b0039598209bc21cd9aa4511a0">converter</a>.</li>
<li>Improved the performance of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1Filter.html#a7957478e6709bf06e16fda5b50e76fdb">median filter</a> and of level set <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a003db10da0696d7e120eff0477bc782c">CSG</a> operations.</li>
<li>Reintroduced <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a467d50f8a53357977d5720498a88d72c" title="Reduce the memory footprint of a tree by replacing nodes whose values are all inactive with inactive ...">Tree::pruneLevelSet()</a>, a specialized <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae81e76930df0c635a4e175887352257e" title="Reduce the memory footprint of a tree by replacing with background tiles any nodes whose values are a...">Tree::pruneInactive()</a> for level-set grids.</li>
<li>Added utilities to the <code>houdini_utils</code> library to facilitate the collection of a chain of adjacent nodes of a particular type so that they can be cooked in a single step. (For example, adjacent <code>xform</code> SOPs could be collapsed by composing their transformation matrices into a single matrix.)</li>
<li>Added pruning and flood-filling options to the Convert SOP.</li>
<li>Reimplemented the Filter SOP, omitting level-set-specific filters and adding node chaining (to reduce memory usage when applying several filters in sequence).</li>
<li>Added a toggle to the Read SOP to read grid metadata and transforms only.</li>
<li>Changed the attribute transfer scheme on the From Mesh and From Particles SOPs to allow for custom grid names and vector type metadata.</li>
</ul>
</dd></dl>
<p> <a name="v0_99_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.99.0</b> - <em>November 21 2012</em><ul>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html">Grid</a> methods that return non-<code>const</code> tree and transform references without triggering deep copies, as well as <code>const</code> methods that return <code>const</code> shared pointers.</li>
<li>Added <code>Grid</code> methods to <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a6f6011abaee35f0718424ba281220706">populate</a> a grid&rsquo;s metadata with statistics like the active voxel count, and to <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#aa5dcf695fe75a1b3049d264b06f1bd0a">retrieve</a> that metadata. By default, statistics are now computed and added to grids whenever they are written to <code>.vdb</code> files.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html#ab12472377bbdbcab1d0bc3258c76f289">io::File::readGridMetadata</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File.html#abf37aaa82022716eede54e8d58b94c20">io::File::readAllGridMetadata</a> methods to read just the grid metadata and transforms from a <code>.vdb</code> file.</li>
<li>Fixed numerical precision issues in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a003db10da0696d7e120eff0477bc782c">csgUnion</a>, <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a7de3e11a37615c24f9c5e50bdc2a06e7">csgIntersection</a> and <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a1e2d62ce38b1969798cdc45baf2c9df3">csgDifference</a> tools, and added toggles to optionally disable postprocess pruning.</li>
<li>Fixed an issue in <code>vdb_view</code> with the ordering of GL vertex buffer calls. <em>[Contributed by Bill Katz]</em></li>
<li>Fixed an intermittent crash in the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1ParticlesToLevelSet.html">ParticlesToLevelSet</a> tool, as well as a race condition that could cause data corruption.</li>
<li>The <code>ParticlesToLevelSet</code> tool and From Particles SOP can now transfer arbitrary point attribute values from the input particles to output voxels.</li>
<li>Fixed a bug in the Convert SOP whereby the names of primitives were lost during conversion, and another bug that resulted in arithmetic errors when converting empty grids.</li>
<li>Fixed a bug in the Combine SOP that caused the Operation selection to be lost.</li>
</ul>
</dd></dl>
<p> <a name="v0_98_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.98.0</b> - <em>November 16 2012</em><ul>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html">Tree</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Transform.html">Transform</a> objects (and <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html">Grid</a> objects in the context of Houdini SOPs) are now passed and accessed primarily by reference rather than by shared pointer. See <a class="el" href="api_0_98_0.html">Porting to OpenVDB 0.98.0</a> for details about this important API change. <em>[Contributed by SESI]</em></li>
<li>Reimplemented <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1CoordBBox.html">CoordBBox</a> to address several off-by-one bugs related to bounding box dimensions.</li>
<li>Fixed an off-by-one bug in <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a98c649aac370a43aaffa55d0e78ed405">evalActiveVoxelBoundingBox</a>.</li>
<li>Introduced the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a> class, which will eventually replace the <code>LeafArray</code> class. <code>LeafManager</code> supports dynamic buffers stored as a structure of arrays (SOA), unlike <code>LeafArray</code>, which supports only static buffers stored as an array of structures (AOS).</li>
<li>Improved the performance of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">LevelSetFilter</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html">LevelSetTracker</a> tools by rewriting them to use the new <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a> class.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a63ff695beda11ed9ef625a28ce8a5faf">Tree::setValueOnly</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#a63ff695beda11ed9ef625a28ce8a5faf">ValueAccessor::setValueOnly</a> methods, which change the value of a voxel without changing its active state, and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a48bab17c2781af76eacbc64ba399e1d7">Tree::probeLeaf</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#a0b1a8557f5239a416f76dbc2e99dbd82">ValueAccessor::probeLeaf</a> methods that return the leaf node that contains a given voxel (unless the voxel is represented by a tile).</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetAdvection.html">LevelSetAdvection</a> tool that propagates and tracks narrow-band level sets.</li>
<li>Introduced a new <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridSampler.html">GridSampler</a> class that supports world-space (or index-space) sampling of grid values.</li>
<li>Changed the interpretation of the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1NonlinearFrustumMap.html">NonlinearFrustumMap</a>&rsquo;s <em>taper</em> parameter to be the ratio of the near and far plane depths.</li>
<li>Added a <code>ParmFactory::setChoiceList()</code> overload that accepts (<em>token</em>, <em>label</em>) string pairs, and a <code>setDefault()</code> overload that accepts an STL string.</li>
<li>Fixed a crash in the Combine SOP in Copy B mode.</li>
<li>Split the Level Set Filter SOP into three separate SOPs, Level Set Smooth, Level Set Reshape and Level Set Renormalize. When two or more of these nodes are connected in sequence, they interact to reduce memory usage: the last node in the sequence performs all of the operations in one step.</li>
<li>The Advect Points SOP can now output polyline streamlines that trace the paths of the points.</li>
<li>Added an option to the Analysis SOP to specify names for output grids.</li>
<li>Added camera-derived frustum transform support to the Create SOP.</li>
</ul>
</dd></dl>
<p> <a name="v0_97_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.97.0</b> - <em>October 18 2012</em><ul>
<li>Added a narrow-band <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetTracker.html">level set interface tracking tool</a> (up to fifth-order in space but currently only first-order in time, with higher temporal orders to be added soon).</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1LevelSetFilter.html">level set filter tool</a> to perform unrestricted surface smoothing (e.g., Laplacian flow), filtering (e.g., mean value) and morphological operations (e.g., morphological opening).</li>
<li>Added adaptivity to the <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">level set meshing tool</a> for faster mesh extraction with fewer polygons, without postprocessing.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#a0d19cd16b0f5919fd95ce5ab20984a2b">ValueAccessor::touchLeaf</a> method that creates (if necessary) and returns the leaf node containing a given voxel. It can be used to preallocate leaf nodes over which to run parallel algorithms.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#adf11d9e6e826c6ce03707c950c5c4930">Grid::merge</a> whereby active tiles were sometimes lost.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafManager.html">LeafManager</a>, which is similar to <code>LeafArray</code> but supports a dynamic buffer count and allocates buffers more efficiently. Useful for temporal integration (e.g., for level set propagation and interface tracking), <code>LeafManager</code> is meant to replace <code>LeafArray</code>, which will be deprecated in the next release.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#aa5d88c3fde0d2d51d27cf6c5e995682e">LeafNode::fill</a> method to efficiently populate leaf nodes with constant values.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#afd30b68bce6aa6ec6de2441d995a5f56">Tree::visitActiveBBox</a> method that applies a functor to the bounding boxes of all active tiles and leaf nodes and that can be used to improve the performance of ray intersection tests, rendering of bounding boxes, etc.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a39a2211a02fb606e611d3ff5bbd6f50c">Tree::voxelizeActiveTiles</a> method to densify active tiles. While convenient and fast, this can produce large dense grids, so use it with caution.</li>
<li>Repackaged <code><a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a467d50f8a53357977d5720498a88d72c" title="Reduce the memory footprint of a tree by replacing nodes whose values are all inactive with inactive ...">Tree::pruneLevelSet()</a></code> as a Tree::pruneOp()-compatible functor. Tree::LevelSetPrune is a specialized Tree::pruneInactive for level-set grids and is used in interface tracking.</li>
<li>Added a GridBase::pruneGrid() method.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#acabf3f247f64b7dcef84c32c8372fc04">Grid:hasUniformVoxels</a> method.</li>
<li>Renamed <code>tools::dilate</code> to <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#aa7e34b5d2c9f6d491cada2461ce9413a">dilateVoxels</a> and improved its performance. The new name reflects the fact that the current implementation ignores active tiles.</li>
<li>Added a <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae190c2befe2b252b8d930bd632964ab7">tools::resampleToMatch</a> function that resamples an input grid into an output grid with a different transform such that, after resampling, the input and output grids coincide, but the output grid&rsquo;s transform is preserved.</li>
<li>Significantly improved the performance of depth-bounded value iterators (<a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#afe548862b5e057f0cea00b94e00809bf">ValueOnIter</a>, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a6ccc5d0e86ce5b20fe01cb1ab2c897fe">ValueAllIter</a>, etc.) when the depth bound excludes leaf nodes.</li>
<li>Exposed the value buffers inside leaf nodes with <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a6e4d32cef58578c6471ad6c3dd0db7d3">LeafNode::buffer</a>. This allows for very fast access (const and non-const) to voxel values using linear array offsets instead of (<em>i</em>,&#160;<em>j</em>,&#160;<em>k</em>) coordinates.</li>
<li>In openvdb_houdini/UT_VDBTools.h, added operators for use with <code>processTypedGrid</code> that resample grids in several different ways.</li>
<li>Added a policy mechanism to <code>houdini_utils::OpFactory</code> that allows for customization of operator names, icons, and Help URLs.</li>
<li>Renamed many of the Houdini SOPs to make the names more consistent.</li>
<li>Added an Advect Points SOP.</li>
<li>Added a Level Set Filter SOP that allows for unrestricted surface deformations, unlike the older Filter SOP, which restricts surface motion to the initial narrow band.</li>
<li>Added staggered vector sampling to the Sample Points SOP.</li>
<li>Added a minimum radius threshold to the particle voxelization tool and SOP.</li>
<li>Merged the Composite and CSG SOPs into a single Combine SOP.</li>
<li>Added a tool and a SOP to efficiently generate narrow-band level set representations of spheres.</li>
<li>In the Visualize SOP, improved the performance of tree topology generation, which is now enabled by default.</li>
</ul>
</dd></dl>
<p> <a name="v0_96_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.96.0</b> - <em>September 24 2012</em><ul>
<li>Fixed a memory corruption bug in the mesh voxelizer tool.</li>
<li>Temporarily removed the optional clipping feature from the level set mesher.</li>
<li>Added "Staggered Vector Field" to the list of grid classes in the Create SOP.</li>
</ul>
</dd></dl>
<p> <a name="v0_95_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.95.0</b> - <em>September 20 2012</em><ul>
<li>Added a quad <a class="el" href="structopenvdb_1_1v6__0_1_1tools_1_1VolumeToMesh.html">meshing</a> tool for higher-quality level set meshing and updated the Visualizer SOP to use it.</li>
<li>Fixed a precision error in the <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a12727083ecf3b9561ff954517144d7a8">mesh voxelizer</a> and improved the quality of inside/outside voxel classification. Output grids are now also <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a60f870194239aba95a3a0a01597d391a">classified</a> as either level sets or fog volumes.</li>
<li>Modified the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridResampler.html">GridResampler</a> to use the signed flood fill optimization only on grids that are tagged as level sets.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Quat.html">quaternion</a> class to the math library and a method to return the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1Mat3.html#a1d9030d1459f91027741424a262d31fd">trace</a> of a <code>Mat3</code>.</li>
<li>Fixed a bug in the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html#aebc7997cdda9421399e1075894bb5d38">ValueAccessor</a> copy constructor that caused the copy to reference the original.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html#a7b3e82eb582914ac6f31f32fea77292f">RootNode::setActiveState</a> that caused a crash when marking a (virtual) background voxel as inactive.</li>
<li>Added a <code>Tree::pruneLevelSet</code> method that is similar to but faster than <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#ae81e76930df0c635a4e175887352257e" title="Reduce the memory footprint of a tree by replacing with background tiles any nodes whose values are a...">Tree::pruneInactive()</a> for level set grids.</li>
<li>Added fast leaf node voxel access <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1LeafNode.html#a525333c1fa4eb845ef57df546aaf24af">methods</a> that index by linear offset (as returned by <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1IteratorBase.html#aa7079339b0d8f4039d67a7e8a25c190e">ValueIter::pos</a>) instead of by (<em>i</em>,&#160;<em>j</em>,&#160;<em>k</em>) coordinates.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a4b094186577cde9b7ad1f326389c815f">Tree::touchLeaf</a> method that can be used to preallocate a static tree topology over which to safely perform multithreaded processing.</li>
<li>Added a grain size argument to <code>LeafArray</code> for finer control of parallelism.</li>
<li>Modified the Makefile to make it easier to omit the <code>doc</code>, <code>vdb_test</code> and <code>vdb_view</code> targets.</li>
<li>Added utility functions (in <code>houdini/UT_VDBUtils.h</code>) to convert between Houdini and OpenVDB matrix and vector types. <em>[Contributed by SESI]</em></li>
<li>Added accessors to <code>GEO_PrimVDB</code> that make it easier to directly access voxel data and that are used by the HScript volume expression functions in Houdini 12.5. <em>[Contributed by SESI]</em></li>
<li>As of Houdini 12.1.77, the native transform SOP operates on OpenVDB primitives. <em>[Contributed by SESI]</em></li>
<li>Added a Convert SOP that converts OpenVDB grids to Houdini volumes and vice-versa.</li>
</ul>
</dd></dl>
<p> <a name="v0_94_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.94.1</b> - <em>September 7 2012</em><ul>
<li>Fixed bugs in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1RootNode.html">RootNode</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1InternalNode.html">InternalNode</a> <code>setValue*</code>() and <code>fill()</code> methods that could cause neighboring voxels to become inactive.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#ae4fd665aa748fe753c256bbbb6ff31d0">Tree::hasSameTopology</a> that caused false positives when only active states and not values differed.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a1e1a133192d9d344c482d4aa83f6da33">Tree::hasActiveTiles</a> method.</li>
<li>For better cross-platform consistency, substituted bitwise AND operations for right shifts in the <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1ValueAccessor.html">ValueAccessor</a> hash key computation.</li>
<li><code>vdb_view</code> no longer aborts when asked to surface a vector-valued grid&mdash;but it still doesn&rsquo;t render the surface.</li>
<li>Made various changes for Visual C++ compatibility. <em>[Contributed by SESI]</em></li>
<li>Added an option to the MeshVoxelizer SOP to convert both open and closed surfaces to unsigned distance fields.</li>
<li>The Filter SOP now allows multiple filters to be applied in user-specified order.</li>
</ul>
</dd></dl>
<p> <a name="v0_94_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.94.0</b> - <em>August 30 2012</em><ul>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#afb09afd9d023da4b1dae7a140af6848a">method</a> to union just the active states of voxels from one grid with those of another grid of a possibly different type.</li>
<li>Fixed an incorrect scale factor in the Laplacian diffusion <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af55f3361b55d27809c1da5bf33db393a">filter</a>.</li>
<li>Fixed a bug in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a2ba5f332b68e4a1ebba9dbf4b95ec807">Tree::merge</a> that could leave a tree with invalid value accessors.</li>
<li>Added <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1TreeValueIteratorBase.html#a10c9560d1832cadc5ec67c49be2c6380">TreeValueIteratorBase::setActiveState</a> and deprecated <code>setValueOn</code>.</li>
<li>Removed <code>tools/FastSweeping.h</code>. It will be replaced with a much more efficient implementation in the near future.</li>
<li>ZLIB compression of <code>.vdb</code> files is now optional, but enabled by default. <em>[Contributed by SESI]</em></li>
<li>Made various changes for Clang and Visual C++ compatibility. <em>[Contributed by SESI]</em></li>
<li>The MeshVoxelizer SOP can now transfer arbitrary point and primitive attribute values from the input mesh to output voxels.</li>
</ul>
</dd></dl>
<p> <a name="v0_93_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.93.0</b> - <em>August 24 2012</em><ul>
<li>Renamed symbols in <a class="el" href="Operators_8h.html">math/Operators.h</a> to avoid ambiguities that GCC&#160;4.4 reports as errors.</li>
<li>Simplified the API for the stencil version of the closest-point transform <a class="el" href="structopenvdb_1_1v6__0_1_1math_1_1CPT.html">operator</a>.</li>
<li>Added logic to <a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1Archive.html#a1feee91a690bf00206d9e3aeebc7b5e2">io::Archive::readGrid</a> to set the grid name metadata from the descriptor if the metadata doesn&rsquo;t already exist.</li>
<li>Added guards to prevent nesting of <code>openvdb_houdini::Interrupter::start()</code> and <code>end()</code> calls.</li>
</ul>
</dd></dl>
<p> <a name="v0_92_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.92.0</b> - <em>August 23 2012</em><ul>
<li>Added a Laplacian diffusion <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#af55f3361b55d27809c1da5bf33db393a">filter</a>.</li>
<li>Fixed a bug in the initialization of the sparse contour tracer that caused mesh-to-volume conversion to fail in certain cases.</li>
<li>Fixed a bug in the curvature stencil that caused mean curvature filtering to produce wrong results.</li>
<li>Increased the speed of the <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridTransformer.html">GridTransformer</a> by as much as 20% for fog volumes.</li>
<li>Added optional pruning to the Resample SOP.</li>
<li>Modified the PointSample SOP to allow it to work with ungrouped, anonymous grids.</li>
<li>Fixed a crash in the LevelSetNoise SOP.</li>
</ul>
</dd></dl>
<p> <a name="v0_91_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.91.0</b> - <em>August 16 2012</em><ul>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridTransformer.html">tools::GridTransformer</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tools_1_1GridResampler.html">tools::GridResampler</a> now correctly (but not yet efficiently) process tiles in sparse grids.</li>
<li>Added an optional <code>CopyPolicy</code> argument to <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a031be7030e91d689f8c551c07d6f3808">GridBase::copyGrid</a> and to <a class="el" href="classopenvdb_1_1v6__0_1_1Grid.html#a2ab806deefe51f0bb00db8a432b32fc3">Grid::copy</a> that specifies whether and how the grid&rsquo;s tree should be copied.</li>
<li>Added a <a class="el" href="classopenvdb_1_1v6__0_1_1GridBase.html#a742dad1af803e5c35040cc24868f2d40">GridBase::newTree</a> method that replaces a grid&rsquo;s tree with a new, empty tree of the correct type.</li>
<li>Fixed a crash in <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a73a6e7c85d37e7d677eddc3cce8aa11b">Tree::setValueOff</a> when the new value was equal to the background value.</li>
<li>Fixed bugs in <a class="el" href="namespaceopenvdb_1_1v6__0_1_1tools.html#a8057e1165c928a37703f90eb9496083c" title="Reduce the memory footprint of a tree by replacing with tiles any nodes whose values are all the same...">Tree::prune()</a> that could result in output tiles with incorrect active states.</li>
<li>Added <code>librt</code> to the link dependencies to address build failures on Ubuntu systems.</li>
<li>Made various small changes to the Makefile and the source code that should help with Mac OS&#160;X compatibility.</li>
<li>The Composite and Resample SOPs now correctly copy the input grid&rsquo;s metadata to the output grid.</li>
</ul>
</dd></dl>
<p> <a name="v0_90_1_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.90.1</b> - <em>August 7 2012</em><ul>
<li>Fixed a bug in the <a class="el" href="classopenvdb_1_1v6__0_1_1math_1_1BBox.html#acc39d59e67a9bf472082b89e394051b8">BBox::getCenter()</a> method.</li>
<li>Added missing header files to various files.</li>
<li><a class="el" href="classopenvdb_1_1v6__0_1_1io_1_1File_1_1NameIterator.html#a2f95bb0c721fad8fc2ebf49bf290048b">io::File::NameIterator::gridName()</a> now returns a unique name of the form <code>"name[1]"</code>, <code>"name[2]"</code>, etc. if a file contains multiple grids with the same name.</li>
<li>Fixed a bug in the Writer SOP that caused grid names to be discarded.</li>
<li>The Resample SOP now correctly sets the background value of the output grid.</li>
</ul>
</dd></dl>
<p> <a name="v0_90_0_changes"></a> </p><dl class="section user"><dt></dt><dd><b>Version 0.90.0</b> - <em>August 3 2012</em> (initial public release)<ul>
<li>Added a basic GL viewer for OpenVDB files.</li>
<li>Greatly improved the performance of two commonly-used <code>Tree</code> methods, <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a62f4dee5746b8584d0e5f36607741f64">evalActiveVoxelBoundingBox()</a> and <a class="el" href="classopenvdb_1_1v6__0_1_1tree_1_1Tree.html#a5f5d5dcea1d8bee1f7752c5b99d4acbc">memUsage()</a>.</li>
<li>Eliminated the <code>GridMap</code> class. File I/O now uses STL containers of grid pointers instead.</li>
<li>Refactored stencil-based tools (Gradient, Laplacian, etc.) and rewrote some of them for generality and better performance. Most now behave correctly for grids with nonlinear index-to-world transforms.</li>
<li>Added a <a class="el" href="FiniteDifference_8h.html">library</a> of index-space finite difference operators.</li>
<li>Added a Hermite grid type that compactly stores each voxel&rsquo;s upwind normals and can be used to convert volumes to and from polygonal meshes.</li>
<li>Added a <a class="el" href="tools_2PointScatter_8h.html">tool</a> (and a Houdini SOP) to scatter points randomly throughout a volume. </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
