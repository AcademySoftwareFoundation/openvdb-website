<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: PcaSettings Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">12.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceopenvdb.html">openvdb</a></li><li class="navelem"><a class="el" href="namespaceopenvdb_1_1v12__1.html">v12_1</a></li><li class="navelem"><a class="el" href="namespaceopenvdb_1_1v12__1_1_1points.html">points</a></li><li class="navelem"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html">PcaSettings</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PcaSettings Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Various settings for the neighborhood analysis of point distributions.  
 <a href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PrincipalComponentAnalysis_8h_source.html">openvdb/points/PrincipalComponentAnalysis.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae2dbc46f9ac93524ffa0362c66883080"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#ae2dbc46f9ac93524ffa0362c66883080">searchRadius</a> = 1.0f</td></tr>
<tr class="separator:ae2dbc46f9ac93524ffa0362c66883080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a367d6d42a69e5b5a743c0e37eb258041"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#a367d6d42a69e5b5a743c0e37eb258041">allowedAnisotropyRatio</a> = 0.25f</td></tr>
<tr class="separator:a367d6d42a69e5b5a743c0e37eb258041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad600459e92dde7f0856f77c19d8c5af0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#ad600459e92dde7f0856f77c19d8c5af0">nonAnisotropicStretch</a> = 1.0</td></tr>
<tr class="separator:ad600459e92dde7f0856f77c19d8c5af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e64365fb1aab12918ca0555a16591a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#a29e64365fb1aab12918ca0555a16591a">neighbourThreshold</a> = 20</td></tr>
<tr class="separator:a29e64365fb1aab12918ca0555a16591a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe8ffe6789491d447e15b21a55b5afe"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#acfe8ffe6789491d447e15b21a55b5afe">maxSourcePointsPerVoxel</a> = 8</td></tr>
<tr class="separator:acfe8ffe6789491d447e15b21a55b5afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2fee986c44c94f1abd71e64d9d418f7"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#ac2fee986c44c94f1abd71e64d9d418f7">maxTargetPointsPerVoxel</a> = std::numeric_limits&lt;size_t&gt;::max()</td></tr>
<tr class="separator:ac2fee986c44c94f1abd71e64d9d418f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c2f538c5058cce1a54962ac4bd03c5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#a72c2f538c5058cce1a54962ac4bd03c5">averagePositions</a> = 1.0f</td></tr>
<tr class="separator:a72c2f538c5058cce1a54962ac4bd03c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6e12ee62c3d8342922237cb08a8a6ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopenvdb_1_1v12__1_1_1util_1_1NullInterrupter.html">util::NullInterrupter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#aa6e12ee62c3d8342922237cb08a8a6ae">interrupter</a> = nullptr</td></tr>
<tr class="separator:aa6e12ee62c3d8342922237cb08a8a6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Various settings for the neighborhood analysis of point distributions. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a367d6d42a69e5b5a743c0e37eb258041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float allowedAnisotropyRatio = 0.25f</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allowedAnisotropyRatio</td><td>the maximum allowed ratio between the components in each ellipse' stretch coefficients such that: <div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> s = stretch.sorted();</div><div class="line">assert(s[0]/s[2] &gt;= <a class="code" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#a367d6d42a69e5b5a743c0e37eb258041">allowedAnisotropyRatio</a>);</div></div><!-- fragment --> This parameter effectively clamps the allowed anisotropy, with a value of 1.0f resulting in uniform stretch values (representing a sphere). Values tending towards zero will allow for greater anisotropy i.e. much more exaggerated stretches along the computed principal axis and corresponding squashes along the others to compensate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Very small values may cause very thing ellipses to be produced, so a reasonable minimum should be set. Valid range is (0, 1]. Behaviour is undefined when outside this range. </dd></dl>

</div>
</div>
<a class="anchor" id="a72c2f538c5058cce1a54962ac4bd03c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float averagePositions = 1.0f</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">averagePositions</td><td>the amount (between 0 and 1) to average out positions. All points, whether they end up as ellipses or not, can have their positions smoothed to account for their neighbourhood distribution. This will have no effect for points with no neighbours. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This options does NOT modify the P attribute - instead, a world space position attribute "pws" (default) is created and stores the smoothed position. </dd>
<dd>
Valid range is [0, 1]. Behaviour is undefined when outside this range. </dd></dl>

</div>
</div>
<a class="anchor" id="aa6e12ee62c3d8342922237cb08a8a6ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenvdb_1_1v12__1_1_1util_1_1NullInterrupter.html">util::NullInterrupter</a>* interrupter = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interrupter</td><td>optional interrupter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acfe8ffe6789491d447e15b21a55b5afe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t maxSourcePointsPerVoxel = 8</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>maximum number of source points to gather for contributions to each target point, per voxel. When a voxel contains more points than this value, source point are trivially stepped over, with the step size calculated as max(1, ppv / neighbourThreshold). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>There is no prioritisation of nearest points; for example, voxels which partially overlap the search radius may end up selecting point ids which all lie outside. This is rarely an issue in practice and choosing an appropriate value for this setting can significantly increase performance without a large impact to the results. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Valid range is [1, inf). Behaviour is undefined if this value is set to zero. </dd></dl>

</div>
</div>
<a class="anchor" id="ac2fee986c44c94f1abd71e64d9d418f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t maxTargetPointsPerVoxel = std::numeric_limits&lt;size_t&gt;::max()</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>maximum number of target points to write anisotropy values to. When a voxel contains more points than this value, target point are trivially stepped over, with the step size calculated as: max(1, ppv / maxTargetPointsPerVoxel). default behaviour is to compute for all points. Any points skipped will be treated as being isolated and receive an identity rotation and nonAnisotropicStretch. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>When using in conjuction with rasterizeSdf for ellipsoids, consider choosing a lower value (e.g. same value as maxSourcePointsPerVoxel) to speed up iterations and only increase if necessary. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Valid range is [1, inf). Behaviour is undefined if this value is set to zero. </dd></dl>

</div>
</div>
<a class="anchor" id="a29e64365fb1aab12918ca0555a16591a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t neighbourThreshold = 20</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">neighbourThreshold</td><td>number of points in a given neighbourhood that target points must have to be classified as having an elliptical distribution. Points with less neighbours than this will end up with uniform stretch values of nonAnisotropicStretch and an identity rotation matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This number can include the target point itself. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Changing this value does not change the size or number of point neighborhood lookups. As such, increasing this value only speeds up the number of calculated covariance matrices. Valid range is [0, inf], where 0 effectively disables all covariance calculations and 1 enables them for every point. </dd></dl>

</div>
</div>
<a class="anchor" id="ad600459e92dde7f0856f77c19d8c5af0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float nonAnisotropicStretch = 1.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nonAnisotropicStretch</td><td>The stretch coefficient that should be used for points which have no anisotropic neighbourhood (due to being isolated or not having enough neighbours to reach the specified </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structopenvdb_1_1v12__1_1_1points_1_1PcaSettings.html#a29e64365fb1aab12918ca0555a16591a">neighbourThreshold</a>). </dd></dl>

</div>
</div>
<a class="anchor" id="ae2dbc46f9ac93524ffa0362c66883080"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float searchRadius = 1.0f</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">searchRadius</td><td>the world space search radius of the neighborhood around each point. Increasing this value will result in points including more of their neighbors into their ellipsoidal calculations. This may or may not be desirable depending on the point set's distribution and can be tweaked as necessary. Note however that large values will cause the PCA calculation to become exponentially more expensive and should be used in conjunction with the max point per voxel settings below. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Valid range is [0, inf). Behaviour is undefined when outside this range. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
