<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenVDB: Build instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="openvdb.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="openvdb_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">OpenVDB<span id="projectnumber">&#160;13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('NanoVDB_HowToBuild.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Build instructions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_2nanovdb_2HowToBuild"></a></p>
<p>Note that NanoVDB can be built in many different ways, in the sense that its many external dependencies are optional. This includes OpenVDB, TBB, graphics APIs like CUDA, OpenGL, and OpenCL, as well as compression like ZLIB and BLOSC. However, since the core data structure in <a href="https://github.com/AcademySoftwareFoundation/openvdb/blob/master/nanovdb/nanovdb/NanoVDB.h">NanoVDB.h</a> is self-contained, client code may only depend on this single header file.</p>
<p>Also, note that if the environment variable <span class="tt">VDB_DATA_PATH</span> is set to a directory containing the OpenVDB files from <a href="http://www.openvdb.org/download">the OpenVDB web site</a>, they will be used for the unit and the benchmark tests. Else a simple narrow-band level set sphere is used. Set the environment variable <span class="tt">VDB_SCRATCH_PATH</span> to define the path to where images generated in the benchmark tests are stored (defaults to the build directory).</p>
<p>To explicitly remove a dependency, <span class="tt">X</span>, add the argument <span class="tt">-DNANOVDB_USE_X=OFF</span> where <span class="tt">X = {OPENVDB, TBB, BLOSC, ZLIB, CUDA}</span>. These options are set in the <a href="https://github.com/AcademySoftwareFoundation/openvdb/blob/master/nanovdb/nanovdb/CMakeLists.txt">NanoVDB root CMakeLists.txt</a>. The same file also defines options to build NanoVDB examples, benchmarks, unit-tests, and command-line tools. The default values for these options are <span class="tt">OFF</span>. A user can override each of these options by passing, for example, <span class="tt">-DNANOVDB_BUILD_UNITTESTS=ON</span> flag while running cmake from the command line.</p>
<p>To see the compiler arguments add <span class="tt">-DCMAKE_VERBOSE_MAKEFILE=ON</span>.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
First example: building NanoVDB and OpenVDB core</h1>
<p>NanoVDB is now a module of the larger OpenVDB project. A user can build both libraries together. This will build the OpenVDB core library, install the NanoVDB header files, and build the NanoVDB command-line tools in the <span class="tt">build/nanovdb/cmd</span> directory. From the 'root' OpenVDB project directory (change the dependency paths to match your environment): </p><div class="fragment"><div class="line">foo@bar:~$ mkdir build</div>
<div class="line">foo@bar:~$ cd build</div>
<div class="line">foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DTBB_ROOT=/path/to/tbb -DBOOST_ROOT=/path/to/boost -DBLOSC_ROOT=/path/to/blosc -DCMAKE_INSTALL_PREFIX=/install/path</div>
<div class="line">foo@bar:~$ make -j 4 &amp;&amp; make install</div>
</div><!-- fragment --><p> Note that the default value of <span class="tt">NANOVDB_USE_OPENVDB</span> is linked to <span class="tt">OPENVDB_BUILD_CORE</span> option and can be overriden by passing on <span class="tt">-DNANOVDB_USE_OPENVDB=OFF</span>. The <span class="tt">Boost</span> library is included because it is a requirement for building OpenVDB.</p>
<p>In general, CMake will try to find every optional dependency when a user opts to add an additional dependency. Be sure to check the CMake log to see what dependencies were <b>not</b> found.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Second example: NanoVDB with no dependencies</h1>
<p>From the 'root' OpenVDB project directory: </p><div class="fragment"><div class="line">foo@bar:~$ mkdir build</div>
<div class="line">foo@bar:~$ cd build</div>
<div class="line">foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DOPENVDB_BUILD_CORE=OFF -DOPENVDB_BUILD_BINARIES=OFF -DNANOVDB_USE_TBB=OFF -DNANOVDB_USE_BLOSC=OFF -DNANOVDB_USE_ZLIB=OFF -DCMAKE_INSTALL_PREFIX=/install/path</div>
<div class="line">foo@bar:~$ make -j 4 &amp;&amp; make install</div>
</div><!-- fragment --><p>Another option is to build it from the NanoVDB directory itself, which is much simpler: </p><div class="fragment"><div class="line">foo@bar:~$ cd nanovdb/nanovdb</div>
<div class="line">foo@bar:~$ mkdir build</div>
<div class="line">foo@bar:~$ cd build</div>
<div class="line">foo@bar:~$ cmake .. -DCMAKE_INSTALL_PREFIX=/install/path</div>
<div class="line">foo@bar:~$ make -j 4 &amp;&amp; make install</div>
</div><!-- fragment --><p> Both options will install the NanoVDB header files to the <span class="tt">/install/path</span> as well as building <span class="tt">nanovdb_print</span> and <span class="tt">nanovdb_validate</span> executable. The path where these executables are installed will be different: in the first option they will be under <span class="tt">build/nanovdb/cmd</span> directory; whilst in the second option they will be under the <span class="tt">build/cmd/</span> directory.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Third example: build 'everything' in NanoVDB along with OpenVDB core</h1>
<p>From the root OpenVDB directory: </p><div class="fragment"><div class="line">foo@bar:~$ mkdir build</div>
<div class="line">foo@bar:~$ cd build</div>
<div class="line">foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DNANOVDB_BUILD_UNITTESTS=ON -DNANOVDB_BUILD_EXAMPLES=ON -DNANOVDB_BUILD_BENCHMARK=ON -DNANOVDB_USE_INTRINSICS=ON -DNANOVDB_USE_CUDA=ON -DNANOVDB_CUDA_KEEP_PTX=ON -DTBB_ROOT=/path/to/tbb -DBOOST_ROOT=/path/to/boost -DBLOSC_ROOT=/path/to/blosc -DGTEST_ROOT=/path/to/gtest -DCMAKE_INSTALL_PREFIX=/install/path</div>
<div class="line">foo@bar:~$ make -j 4 &amp;&amp; make install</div>
</div><!-- fragment --><p> Note that if you already have the correct version of OpenVDB pre-installed, you can configure CMake to link against that library by passing the arguments <span class="tt">-DOPENVDB_BUILD_CORE=OFF -DOPENVDB_BUILD_BINARIES=OFF -DOPENVDB_ROOT=/path/to/openvdb</span> when invoking <span class="tt">cmake</span>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="index.html">OpenVDB</a></li><li class="navelem"><a href="NanoVDB_MainPage.html">NanoVDB</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
