<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenVDB: Build instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenVDB
   &#160;<span id="projectnumber">12.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">OpenVDB</a></li><li class="navelem"><a class="el" href="NanoVDB_MainPage.html">NanoVDB</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Build instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Note that NanoVDB can be built in many different ways, in the sense that its many external dependencies are optional. This includes OpenVDB, TBB, graphics APIs like CUDA, OpenGL, and OpenCL, as well as compression like ZLIB and BLOSC. However, since the core data structure in <a href="https://github.com/AcademySoftwareFoundation/openvdb/blob/master/nanovdb/nanovdb/NanoVDB.h">NanoVDB.h</a> is self-contained, client code may only depend on this single header file.</p>
<p>Also, note that if the environment variable <code>VDB_DATA_PATH</code> is set to a directory containing the OpenVDB files from <a href="http://www.openvdb.org/download">the OpenVDB web site</a>, they will be used for the unit and the benchmark tests. Else a simple narrow-band level set sphere is used. Set the environment variable <code>VDB_SCRATCH_PATH</code> to define the path to where images generated in the benchmark tests are stored (defaults to the build directory).</p>
<p>To explicitly remove a dependency, <code>X</code>, add the argument <code>-DNANOVDB_USE_X=OFF</code> where <code>X = {OPENVDB, TBB, BLOSC, ZLIB, CUDA}</code>. These options are set in the <a href="https://github.com/AcademySoftwareFoundation/openvdb/blob/master/nanovdb/nanovdb/CMakeLists.txt">NanoVDB root CMakeLists.txt</a>. The same file also defines options to build NanoVDB examples, benchmarks, unit-tests, and command-line tools. The default values for these options are <code>OFF</code>. A user can override each of these options by passing, for example, <code>-DNANOVDB_BUILD_UNITTESTS=ON</code> flag while running cmake from the command line.</p>
<p>To see the compiler arguments add <code>-DCMAKE_VERBOSE_MAKEFILE=ON</code>.</p>
<h2>First example: building NanoVDB and OpenVDB core</h2>
<p>NanoVDB is now a module of the larger OpenVDB project. A user can build both libraries together. This will build the OpenVDB core library, install the NanoVDB header files, and build the NanoVDB command-line tools in the <code>build/nanovdb/cmd</code> directory. From the 'root' OpenVDB project directory (change the dependency paths to match your environment): </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;foo@bar:~$ mkdir build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;foo@bar:~$ cd build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DTBB_ROOT=/path/to/tbb -DBOOST_ROOT=/path/to/boost -DBLOSC_ROOT=/path/to/blosc -DCMAKE_INSTALL_PREFIX=/install/path</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;foo@bar:~$ make -j 4 &amp;&amp; make install</div></div><!-- fragment --><p> Note that the default value of <code>NANOVDB_USE_OPENVDB</code> is linked to <code>OPENVDB_BUILD_CORE</code> option and can be overriden by passing on <code>-DNANOVDB_USE_OPENVDB=OFF</code>. The <code>Boost</code> library is included because it is a requirement for building OpenVDB.</p>
<p>In general, CMake will try to find every optional dependency when a user opts to add an additional dependency. Be sure to check the CMake log to see what dependencies were <b>not</b> found.</p>
<h2>Second example: NanoVDB with no dependencies</h2>
<p>From the 'root' OpenVDB project directory: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;foo@bar:~$ mkdir build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;foo@bar:~$ cd build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DOPENVDB_BUILD_CORE=OFF -DOPENVDB_BUILD_BINARIES=OFF -DNANOVDB_USE_TBB=OFF -DNANOVDB_USE_BLOSC=OFF -DNANOVDB_USE_ZLIB=OFF -DCMAKE_INSTALL_PREFIX=/install/path</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;foo@bar:~$ make -j 4 &amp;&amp; make install</div></div><!-- fragment --><p>Another option is to build it from the NanoVDB directory itself, which is much simpler: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;foo@bar:~$ cd nanovdb/nanovdb</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;foo@bar:~$ mkdir build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;foo@bar:~$ cd build</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;foo@bar:~$ cmake .. -DCMAKE_INSTALL_PREFIX=/install/path</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;foo@bar:~$ make -j 4 &amp;&amp; make install</div></div><!-- fragment --><p> Both options will install the NanoVDB header files to the <code>/install/path</code> as well as building <code>nanovdb_print</code> and <code>nanovdb_validate</code> executable. The path where these executables are installed will be different: in the first option they will be under <code>build/nanovdb/cmd</code> directory; whilst in the second option they will be under the <code>build/cmd/</code> directory.</p>
<h2>Third example: build 'everything' in NanoVDB along with OpenVDB core</h2>
<p>From the root OpenVDB directory: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;foo@bar:~$ mkdir build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;foo@bar:~$ cd build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;foo@bar:~$ cmake .. -DUSE_NANOVDB=ON -DNANOVDB_BUILD_UNITTESTS=ON -DNANOVDB_BUILD_EXAMPLES=ON -DNANOVDB_BUILD_BENCHMARK=ON -DNANOVDB_USE_INTRINSICS=ON -DNANOVDB_USE_CUDA=ON -DNANOVDB_CUDA_KEEP_PTX=ON -DTBB_ROOT=/path/to/tbb -DBOOST_ROOT=/path/to/boost -DBLOSC_ROOT=/path/to/blosc -DGTEST_ROOT=/path/to/gtest -DCMAKE_INSTALL_PREFIX=/install/path</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;foo@bar:~$ make -j 4 &amp;&amp; make install</div></div><!-- fragment --><p> Note that if you already have the correct version of OpenVDB pre-installed, you can configure CMake to link against that library by passing the arguments <code>-DOPENVDB_BUILD_CORE=OFF -DOPENVDB_BUILD_BINARIES=OFF -DOPENVDB_ROOT=/path/to/openvdb</code> when invoking <code>cmake</code>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
