<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenVDB: TransformTransfer Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="openvdb.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="openvdb_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">OpenVDB<span id="projectnumber">&#160;13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html','','structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">TransformTransfer Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html" title="The TransformTransfer module should be used if the source transform of the input points and the targe...">TransformTransfer</a> module should be used if the source transform of the input points and the target transforms of the destination volumes differ. The default rasterizer will skip index to world (and vice versa) transformations unless a transfer scheme derives from a <a class="el" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html" title="The TransformTransfer module should be used if the source transform of the input points and the targe...">TransformTransfer</a>.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PointTransfer_8h_source.html">openvdb/points/PointTransfer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0adf292877ed1cd7955bd4c752dc12e" id="r_af0adf292877ed1cd7955bd4c752dc12e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0adf292877ed1cd7955bd4c752dc12e">TransformTransfer</a> (const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;st, const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;tt)</td></tr>
<tr class="memitem:aba4675d91ec246a3e7caf71d8474bbb6" id="r_aba4675d91ec246a3e7caf71d8474bbb6"><td class="memTemplParams" colspan="2">template&lt;typename T&gt; </td></tr>
<tr class="memitem:aba4675d91ec246a3e7caf71d8474bbb6 template"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba4675d91ec246a3e7caf71d8474bbb6">transformSourceToTarget</a> (const T &amp;value) const</td></tr>
<tr class="memitem:a2ff8c68d2ded92b64092f380f09b5e99" id="r_a2ff8c68d2ded92b64092f380f09b5e99"><td class="memTemplParams" colspan="2">template&lt;typename T&gt; </td></tr>
<tr class="memitem:a2ff8c68d2ded92b64092f380f09b5e99 template"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ff8c68d2ded92b64092f380f09b5e99">transformTargetToSource</a> (const T &amp;value) const</td></tr>
<tr class="memitem:a38c93c93ec35397933cfc680837b329f" id="r_a38c93c93ec35397933cfc680837b329f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38c93c93ec35397933cfc680837b329f">sourceTransform</a> () const</td></tr>
<tr class="memitem:a932e0e057527f168144493598d09e9fc" id="r_a932e0e057527f168144493598d09e9fc"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a932e0e057527f168144493598d09e9fc">targetTransform</a> () const</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html" title="The TransformTransfer module should be used if the source transform of the input points and the targe...">TransformTransfer</a> module should be used if the source transform of the input points and the target transforms of the destination volumes differ. The default rasterizer will skip index to world (and vice versa) transformations unless a transfer scheme derives from a <a class="el" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html" title="The TransformTransfer module should be used if the source transform of the input points and the targe...">TransformTransfer</a>. </p>
<dl class="section user"><dt>A transfer scheme must be configured to call the provided rasterize</dt><dd>methods. See below for an example, or the various native VDB files which implement schemes e.g.:<ul>
<li><a class="el" href="PointRasterizeSDF_8h.html" title="Various transfer schemes for rasterizing point positions and radius data to signed distance fields wi...">PointRasterizeSDF.h</a></li>
<li><a class="el" href="PointRasterizeTrilinear_8h.html" title="Transfer schemes for rasterizing point data.">PointRasterizeTrilinear.h</a></li>
<li>PrincipalComponentAnalysisImpl.h <div class="fragment"><div class="line"><span class="keyword">struct </span>Transfer</div>
<div class="line">{<span class="comment"></span></div>
<div class="line"><span class="comment">    /// @return Returns the tree topology to loop over. This can be different</span></div>
<div class="line"><span class="comment">    ///   from the destination tree i.e. This can act as a mask.</span></div>
<div class="line">    <span class="keyword">inline</span> <span class="keyword">auto</span>&amp; topology();</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  The maximum lookup range of this transfer scheme in index</span></div>
<div class="line"><span class="comment">    ///   space of the source points.</span></div>
<div class="line"><span class="comment">    /// @details The return value represent how far away from the destination</span></div>
<div class="line"><span class="comment">    ///   leaf node points should be accessed.</span></div>
<div class="line"><span class="comment">    /// @param origin  The leaf origin of the topology being accessed</span></div>
<div class="line"><span class="comment">    /// @param idx     The leaf index of the topology being accessed</span></div>
<div class="line">    <span class="keyword">inline</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0.html#ac524bdfeb5d781872485d9321c881920">Int32</a> range(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp; origin, <span class="keywordtype">size_t</span> idx) <span class="keyword">const</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  The initialize function, called on each leaf which has valid</span></div>
<div class="line"><span class="comment">    ///   topology to write to.</span></div>
<div class="line"><span class="comment">    /// @param origin  The leaf origin of the topology being accessed</span></div>
<div class="line"><span class="comment">    /// @param idx     The leaf index of the topology being accessed</span></div>
<div class="line"><span class="comment">    /// @param bounds  The active voxel bounds of the leaf</span></div>
<div class="line">    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespaceopenvdb_1_1v13__0.html#a5fb8281b837e5b8a3883fa2c097018c1">initialize</a>(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp; origin, <span class="keywordtype">size_t</span> idx, <span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1CoordBBox.html">CoordBBox</a>&amp; bounds);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  Run each time a point leaf is accessed. Typically this is</span></div>
<div class="line"><span class="comment">    ///  where attribute handles can be constructed</span></div>
<div class="line"><span class="comment">    /// @param leaf  The PointDataLeafNode which is being accessed.</span></div>
<div class="line"><span class="comment">    /// @return  Return true to continue rasterization, false to early exit</span></div>
<div class="line"><span class="comment">    ///   and skip the current leaf&#39;s contribution to the destination volume.</span></div>
<div class="line">    <span class="keyword">inline</span> <span class="keywordtype">bool</span> startPointLeaf(<span class="keyword">const</span> <a class="code hl_typedef" href="classopenvdb_1_1v13__0_1_1tree_1_1Tree.html#ad69afaa4f94a67ce2f7d0b18b339291e">PointDataTree::LeafNodeType</a>&amp; leaf);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    ///////////////////////////////////////////////////////////////////////</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Transfer scheme must implement either:</span></div>
<div class="line">    <span class="comment">//   - rasterizePoint(Coord, Index, CoordBBox) OR</span></div>
<div class="line">    <span class="comment">//   - rasterizePoints(Coord, Index, Index, CoordBBox)</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  The point stamp function. Each point which contributes to</span></div>
<div class="line"><span class="comment">    ///  the current leaf will call this function exactly once.</span></div>
<div class="line"><span class="comment">    /// @param ijk  The current voxel containing the point being rasterized.</span></div>
<div class="line"><span class="comment">    ///   May be outside the destination leaf node depending on the range()</span></div>
<div class="line"><span class="comment">    /// @param id   The point index being rasterized</span></div>
<div class="line"><span class="comment">    /// @param bounds  The active bounds of the leaf node.</span></div>
<div class="line">    <span class="keywordtype">void</span> rasterizePoint(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp; ijk,</div>
<div class="line">        <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0.html#a1a68fb76e3d6897fa878760b6bcbda7a">Index</a> <span class="keywordtype">id</span>,</div>
<div class="line">        <span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1CoordBBox.html">CoordBBox</a>&amp; bounds);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  Same as above, except this is passed a range of points</span></div>
<div class="line"><span class="comment">    ///   that all belong to the same voxel</span></div>
<div class="line"><span class="comment">    /// @param ijk  The current voxel containing the point being rasterized.</span></div>
<div class="line"><span class="comment">    ///   May be outside the destination leaf node depending on the range()</span></div>
<div class="line"><span class="comment">    /// @param start   The start point index being rasterized</span></div>
<div class="line"><span class="comment">    /// @param end     The end point index being rasterized</span></div>
<div class="line"><span class="comment">    /// @param bounds  The active bounds of the leaf node.</span></div>
<div class="line">    <span class="keywordtype">void</span> rasterizePoints(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp; ijk,</div>
<div class="line">         <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0.html#a1a68fb76e3d6897fa878760b6bcbda7a">Index</a> start,</div>
<div class="line">         <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0.html#a1a68fb76e3d6897fa878760b6bcbda7a">Index</a> end,</div>
<div class="line">         <span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1CoordBBox.html">CoordBBox</a>&amp; bounds);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    ///////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  Run each time a point leaf is finished with.</span></div>
<div class="line"><span class="comment">    /// @param leaf  The PointDataLeafNode which was being accessed.</span></div>
<div class="line"><span class="comment">    /// @return  Return true to continue rasterization, false to early exit</span></div>
<div class="line"><span class="comment">    ///   and stop rasterization to the destination leaf node.</span></div>
<div class="line">    <span class="keyword">inline</span> <span class="keywordtype">bool</span> endPointLeaf(<span class="keyword">const</span> <a class="code hl_typedef" href="classopenvdb_1_1v13__0_1_1tree_1_1Tree.html#ad69afaa4f94a67ce2f7d0b18b339291e">PointDataTree::LeafNodeType</a>&amp; leaf);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  The finalization function for the given destination tree(s).</span></div>
<div class="line"><span class="comment">    /// @param origin  The leaf origin of the topology being accessed</span></div>
<div class="line"><span class="comment">    /// @param idx     The leaf index of the topology being accessed</span></div>
<div class="line"><span class="comment">    /// @return  Return true to stop, false to recursively rasterize</span></div>
<div class="line">    <span class="keyword">inline</span> <span class="keywordtype">bool</span> finalize(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp; origin, <span class="keywordtype">size_t</span> idx);</div>
<div class="line">};</div>
<div class="ttc" id="aclassopenvdb_1_1v13__0_1_1math_1_1CoordBBox_html"><div class="ttname"><a href="classopenvdb_1_1v13__0_1_1math_1_1CoordBBox.html">openvdb::v13_0::math::CoordBBox</a></div><div class="ttdoc">Axis-aligned bounding box of signed integer coordinates.</div><div class="ttdef"><b>Definition</b> Coord.h:252</div></div>
<div class="ttc" id="aclassopenvdb_1_1v13__0_1_1math_1_1Coord_html"><div class="ttname"><a href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">openvdb::v13_0::math::Coord</a></div><div class="ttdoc">Signed (x, y, z) 32-bit integer coordinates.</div><div class="ttdef"><b>Definition</b> Coord.h:26</div></div>
<div class="ttc" id="aclassopenvdb_1_1v13__0_1_1tree_1_1Tree_html_ad69afaa4f94a67ce2f7d0b18b339291e"><div class="ttname"><a href="classopenvdb_1_1v13__0_1_1tree_1_1Tree.html#ad69afaa4f94a67ce2f7d0b18b339291e">openvdb::v13_0::tree::Tree&lt; tree::RootNode&lt; tree::InternalNode&lt; tree::InternalNode&lt; PointDataLeafNode&lt; PointDataIndex32, 3 &gt;, 4 &gt;, 5 &gt; &gt; &gt;::LeafNodeType</a></div><div class="ttdeci">typename RootNodeType::LeafNodeType LeafNodeType</div><div class="ttdef"><b>Definition</b> Tree.h:203</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_html_a1a68fb76e3d6897fa878760b6bcbda7a"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0.html#a1a68fb76e3d6897fa878760b6bcbda7a">openvdb::v13_0::Index</a></div><div class="ttdeci">Index32 Index</div><div class="ttdef"><b>Definition</b> Types.h:34</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_html_a5fb8281b837e5b8a3883fa2c097018c1"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0.html#a5fb8281b837e5b8a3883fa2c097018c1">openvdb::v13_0::initialize</a></div><div class="ttdeci">OPENVDB_IMPORT void initialize()</div><div class="ttdoc">Global registration of native Grid, Transform, Metadata and Point attribute types....</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_html_ac524bdfeb5d781872485d9321c881920"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0.html#ac524bdfeb5d781872485d9321c881920">openvdb::v13_0::Int32</a></div><div class="ttdeci">int32_t Int32</div><div class="ttdef"><b>Definition</b> Types.h:36</div></div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<p>Below is a full example using the native components.</p>
<div class="fragment"><div class="line"><span class="comment">/// @brief Sum point distances into a target float tree</span><span class="comment"></span></div>
<div class="line"><span class="comment">///   Note: Using TransformTransfer to handle different index spaces, and</span></div>
<div class="line"><span class="comment">///   VolumeTransfer for automatic buffer setup</span></div>
<div class="line"><span class="keyword">struct </span>MyTransfer :</div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_function" href="#af0adf292877ed1cd7955bd4c752dc12e">TransformTransfer</a>,</div>
<div class="line">    <span class="keyword">public</span> <a class="code hl_struct" href="structopenvdb_1_1v13__0_1_1points_1_1VolumeTransfer.html">VolumeTransfer</a>&lt;FloatTree&gt;</div>
<div class="line">{</div>
<div class="line">    MyTransfer(<a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0.html#a2ae45d4df056c7d0d936a496fec925ee">FloatGrid</a>&amp; dest, <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0_1_1points.html#acf438a63a8a41ec38b6d7ceae6467678">PointDataGrid</a>&amp; source)</div>
<div class="line">        : <a class="code hl_function" href="#af0adf292877ed1cd7955bd4c752dc12e">TransformTransfer</a>(source.transform(), dest.transform())</div>
<div class="line">        , <a class="code hl_struct" href="structopenvdb_1_1v13__0_1_1points_1_1VolumeTransfer.html">VolumeTransfer</a>(dest.<a class="code hl_namespace" href="namespaceopenvdb_1_1v13__0_1_1tree.html">tree</a>()) {}</div>
<div class="line"> </div>
<div class="line">    MyTransfer(<span class="keyword">const</span> MyTransfer&amp; other)</div>
<div class="line">        : <a class="code hl_struct" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html">TransformTransfer</a>(other)</div>
<div class="line">        , <a class="code hl_struct" href="structopenvdb_1_1v13__0_1_1points_1_1VolumeTransfer.html">VolumeTransfer</a>(other) {}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief Range in index space of the source points</span></div>
<div class="line">    <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0_1_1math.html#adf6e1d7d066bb09da957cc89f2b3ceb2">Vec3i</a> range(<span class="keyword">const</span> <a class="code hl_class" href="classopenvdb_1_1v13__0_1_1math_1_1Coord.html">Coord</a>&amp;, <span class="keywordtype">size_t</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_typedef" href="namespaceopenvdb_1_1v13__0_1_1math.html#adf6e1d7d066bb09da957cc89f2b3ceb2">Vec3i</a>(1); }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief Every time we start a new point leaf, init the position array.</span></div>
<div class="line"><span class="comment">    ///   Always return true as we don&#39;t skip any leaf nodes.</span></div>
<div class="line">    <span class="keywordtype">bool</span> startPointLeaf(<span class="keyword">const</span> PointDataTree::LeafNodeType&amp; leaf)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// @note consider caching the indices to &quot;P&quot; and &quot;mygroup&quot; for faster lookups</span></div>
<div class="line">        mHandle = std::make_unique&lt;AttributeHandle&lt;Vec3f&gt;&gt;(leaf.constAttributeArray(<span class="stringliteral">&quot;P&quot;</span>));</div>
<div class="line">        mFilter = std::make_unique&lt;GroupFilter&gt;(<span class="stringliteral">&quot;mygroup&quot;</span>, leaf.attributeSet());</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief  For each point, compute its relative index space position in</span></div>
<div class="line"><span class="comment">    ///   the destination tree and sum the length of its distance</span></div>
<div class="line">    <span class="keywordtype">void</span> rasterizePoint(<span class="keyword">const</span> Coord&amp; ijk, <span class="keyword">const</span> Index <span class="keywordtype">id</span>, <span class="keyword">const</span> CoordBBox&amp; bounds)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// skip points not in &quot;mygroup&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> (!mFilter-&gt;valid(&amp;<span class="keywordtype">id</span>)) <span class="keywordflow">return</span>;</div>
<div class="line">        Vec3d P = ijk.asVec3d() + Vec3d(this-&gt;mHandle-&gt;get(<span class="keywordtype">id</span>));</div>
<div class="line">        P = this-&gt;transformSourceToTarget(P); <span class="comment">// TransformTransfer::transformSourceToTarget</span></div>
<div class="line">        <span class="comment">// for each active voxel, accumulate distance</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>* mask = this-&gt;mask(); <span class="comment">// VolumeTransfer::mask</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; coord : bounds) {</div>
<div class="line">            <span class="keyword">const</span> Index voxel = FloatTree::LeafNodeType::coordToOffset(coord);</div>
<div class="line">            <span class="keywordflow">if</span> (!mask-&gt;isOn(voxel)) <span class="keywordflow">continue</span>;</div>
<div class="line">            Vec3d dist = coord.asVec3d() - P;</div>
<div class="line">            this-&gt;buffer()[voxel] += dist.<a class="code hl_function" href="classopenvdb_1_1v13__0_1_1math_1_1Vec3.html#a319b1046f6f739132918623ea8aa25d8">length</a>(); <span class="comment">// VolumeTransfer::buffer</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// @brief Return true for endPointLeaf() to continue, false for finalize() so</span></div>
<div class="line"><span class="comment">    ///   we don&#39;t recurse.</span></div>
<div class="line">    <span class="keywordtype">bool</span> endPointLeaf(<span class="keyword">const</span> PointDataTree::LeafNodeType&amp;) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line">    <span class="keywordtype">bool</span> finalize(<span class="keyword">const</span> Coord&amp;, <span class="keywordtype">size_t</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::unique_ptr&lt;AttributeHandle&lt;Vec3f&gt;&gt; mHandle {<span class="keyword">nullptr</span>};</div>
<div class="line">    std::unique_ptr&lt;GroupFilter&gt; mFilter {<span class="keyword">nullptr</span>};</div>
<div class="line">};</div>
<div class="ttc" id="aclassopenvdb_1_1v13__0_1_1math_1_1Vec3_html_a319b1046f6f739132918623ea8aa25d8"><div class="ttname"><a href="classopenvdb_1_1v13__0_1_1math_1_1Vec3.html#a319b1046f6f739132918623ea8aa25d8">openvdb::v13_0::math::Vec3::length</a></div><div class="ttdeci">T length() const</div><div class="ttdoc">Length of the vector.</div><div class="ttdef"><b>Definition</b> Vec3.h:201</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_1_1math_html_adf6e1d7d066bb09da957cc89f2b3ceb2"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0_1_1math.html#adf6e1d7d066bb09da957cc89f2b3ceb2">openvdb::v13_0::math::Vec3i</a></div><div class="ttdeci">Vec3&lt; int32_t &gt; Vec3i</div><div class="ttdef"><b>Definition</b> Vec3.h:662</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_1_1points_html_acf438a63a8a41ec38b6d7ceae6467678"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0_1_1points.html#acf438a63a8a41ec38b6d7ceae6467678">openvdb::v13_0::points::PointDataGrid</a></div><div class="ttdeci">Grid&lt; PointDataTree &gt; PointDataGrid</div><div class="ttdoc">Point data grid.</div><div class="ttdef"><b>Definition</b> PointDataGrid.h:195</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_1_1tree_html"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0_1_1tree.html">openvdb::v13_0::tree</a></div><div class="ttdef"><b>Definition</b> PointDataGrid.h:170</div></div>
<div class="ttc" id="anamespaceopenvdb_1_1v13__0_html_a2ae45d4df056c7d0d936a496fec925ee"><div class="ttname"><a href="namespaceopenvdb_1_1v13__0.html#a2ae45d4df056c7d0d936a496fec925ee">openvdb::v13_0::FloatGrid</a></div><div class="ttdeci">Grid&lt; FloatTree &gt; FloatGrid</div><div class="ttdef"><b>Definition</b> openvdb.h:76</div></div>
<div class="ttc" id="astructopenvdb_1_1v13__0_1_1points_1_1TransformTransfer_html"><div class="ttname"><a href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html">openvdb::v13_0::points::TransformTransfer</a></div><div class="ttdoc">The TransformTransfer module should be used if the source transform of the input points and the targe...</div><div class="ttdef"><b>Definition</b> PointTransfer.h:200</div></div>
<div class="ttc" id="astructopenvdb_1_1v13__0_1_1points_1_1TransformTransfer_html_af0adf292877ed1cd7955bd4c752dc12e"><div class="ttname"><a href="#af0adf292877ed1cd7955bd4c752dc12e">openvdb::v13_0::points::TransformTransfer::TransformTransfer</a></div><div class="ttdeci">TransformTransfer(const math::Transform &amp;st, const math::Transform &amp;tt)</div><div class="ttdef"><b>Definition</b> PointTransfer.h:201</div></div>
<div class="ttc" id="astructopenvdb_1_1v13__0_1_1points_1_1VolumeTransfer_html"><div class="ttname"><a href="structopenvdb_1_1v13__0_1_1points_1_1VolumeTransfer.html">openvdb::v13_0::points::VolumeTransfer</a></div><div class="ttdoc">The VolumeTransfer module provides methods to automatically setup and access destination buffers for ...</div><div class="ttdef"><b>Definition</b> PointTransfer.h:297</div></div>
</div><!-- fragment --> </div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af0adf292877ed1cd7955bd4c752dc12e" name="af0adf292877ed1cd7955bd4c752dc12e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0adf292877ed1cd7955bd4c752dc12e">&#9670;&#160;</a></span>TransformTransfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html">TransformTransfer</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>st</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>tt</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a38c93c93ec35397933cfc680837b329f" name="a38c93c93ec35397933cfc680837b329f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38c93c93ec35397933cfc680837b329f">&#9670;&#160;</a></span>sourceTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp; sourceTransform </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a932e0e057527f168144493598d09e9fc" name="a932e0e057527f168144493598d09e9fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932e0e057527f168144493598d09e9fc">&#9670;&#160;</a></span>targetTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classopenvdb_1_1v13__0_1_1math_1_1Transform.html">math::Transform</a> &amp; targetTransform </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aba4675d91ec246a3e7caf71d8474bbb6" name="aba4675d91ec246a3e7caf71d8474bbb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba4675d91ec246a3e7caf71d8474bbb6">&#9670;&#160;</a></span>transformSourceToTarget()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto transformSourceToTarget </td>
          <td>(</td>
          <td class="paramtype">const T &amp;</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ff8c68d2ded92b64092f380f09b5e99" name="a2ff8c68d2ded92b64092f380f09b5e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff8c68d2ded92b64092f380f09b5e99">&#9670;&#160;</a></span>transformTargetToSource()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto transformTargetToSource </td>
          <td>(</td>
          <td class="paramtype">const T &amp;</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespaceopenvdb.html">openvdb</a></li><li class="navelem"><a href="namespaceopenvdb_1_1v13__0.html">v13_0</a></li><li class="navelem"><a href="namespaceopenvdb_1_1v13__0_1_1points.html">points</a></li><li class="navelem"><a href="structopenvdb_1_1v13__0_1_1points_1_1TransformTransfer.html">TransformTransfer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
