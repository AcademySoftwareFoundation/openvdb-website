<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenVDB: Coding Style</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="openvdb.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="openvdb_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">OpenVDB<span id="projectnumber">&#160;13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('codingStyle.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Coding Style </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1 class="doxsection"><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This document details the coding practices that are used in the OpenVDB codebase. Contributed code should conform to these guidelines to maintain consistency and maintainability. If there is a rule that you would like clarified, changed, or added, please send a note to <a href="#" onclick="location.href='mai'+'lto:'+'ope'+'nv'+'db-'+'de'+'v@l'+'is'+'ts.'+'as'+'wf.'+'io'; return false;">openv<span class="obfuscator">.nosp@m.</span>db-d<span class="obfuscator">.nosp@m.</span>ev@li<span class="obfuscator">.nosp@m.</span>sts.<span class="obfuscator">.nosp@m.</span>aswf.<span class="obfuscator">.nosp@m.</span>io</a>.</p>
<h1 class="doxsection"><a class="anchor" id="sStyleContents"></a>
Contents</h1>
<ul>
<li><a class="el" href="#sNamingConventions">Naming Conventions</a><ul>
<li><a class="el" href="#sNamespaceConventions">Namespaces</a></li>
<li><a class="el" href="#sClassConventions">Classes and Structs</a></li>
<li><a class="el" href="#sClassMethods">Class Methods</a></li>
<li><a class="el" href="#sClassInstanceVariables">Class Instance Variables</a></li>
<li><a class="el" href="#sClassStaticVariables">Class Static Variables</a></li>
<li><a class="el" href="#sLocalVariablesAndArguments">Local Variables and Arguments</a></li>
<li><a class="el" href="#sConstants">Constants</a></li>
<li><a class="el" href="#sEnumerationNames">Enumeration Names</a></li>
<li><a class="el" href="#sEnumerationValues">Enumeration Values</a></li>
<li><a class="el" href="#sTypedefs">Typedefs</a></li>
<li><a class="el" href="#sGlobalVariables">Global Variables</a></li>
<li><a class="el" href="#sGlobalFunctions">Global Functions</a></li>
<li><a class="el" href="#sBooleans">Booleans</a></li>
</ul>
</li>
<li><a class="el" href="#sPractices">Practices</a><ul>
<li><a class="el" href="#sGeneral">General</a></li>
<li><a class="el" href="#sFormatting">Formatting</a></li>
<li><a class="el" href="#sIncludeStatements">Include Statements</a></li>
<li><a class="el" href="#sComments">Comments</a></li>
<li><a class="el" href="#sPrimitiveTypes">Primitive Types</a></li>
<li><a class="el" href="#sMacros">Macros</a></li>
<li><a class="el" href="#sClasses">Classes</a></li>
<li><a class="el" href="#sConditionalStatements">Conditional Statements</a></li>
<li><a class="el" href="#sNamespaces">Namespaces</a></li>
<li><a class="el" href="#sExceptions">Exceptions</a></li>
<li><a class="el" href="#sTemplates">Templates</a></li>
<li><a class="el" href="#sMiscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="sNamingConventions"></a>
Naming Conventions</h1>
<h2 class="doxsection"><a class="anchor" id="sNamespaceConventions"></a>
Namespaces</h2>
<ol type="1">
<li>Lowercase words, keep simple and short (e.g., <code>tools</code>, <code>tree</code>).</li>
<li>Use <code>internal</code> (or <code>detail</code>) or <span class="tt"><em>module</em>_internal</span> for symbols such as templates that must be defined in header files but that are implementation details not intended for public use.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sClassConventions"></a>
Classes and Structs</h2>
<ol type="1">
<li>Mixed case; first letter uppercase (e.g., <code>AffineMap</code>, <code>TreeIterator</code>)</li>
<li>Do not use a prefix.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sClassMethods"></a>
Class Methods</h2>
<ol type="1">
<li>Mixed case; first letter lowercase (e.g., <span class="tt">getAccessor()</span>, <span class="tt">gridType()</span>)</li>
<li>Accessor methods that return a member variable by reference or a primitive type by value are just the variable name (e.g., <span class="tt">Grid::tree()</span>).</li>
<li>Accessor methods that involve construction of objects or other computations are <code>get</code> + the variable name (e.g., <span class="tt">Grid::getAccessor()</span>).</li>
<li>Simple mutators are <code>set</code> + the variable name (e.g., <span class="tt">Grid::setTree(tree);</span>).</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sClassInstanceVariables"></a>
Class Instance Variables</h2>
<ol type="1">
<li>Mixed case; always prefixed by <code>m</code> (e.g., <code>mTree</code>, <code>mTransform</code>)</li>
<li>The <code>m</code> prefix may be omitted for members of <span class="tt">struct</span>s used in the public API (e.g., <span class="tt">struct Color { float r, g, b; }</span>).</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sClassStaticVariables"></a>
Class Static Variables</h2>
<ol type="1">
<li>Mixed case; always prefixed by <code>s</code> (e.g., <code>sInitialized</code>)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sLocalVariablesAndArguments"></a>
Local Variables and Arguments</h2>
<ol type="1">
<li>Use mixed case with an initial lower case letter (e.g., <code>ijk</code>, <code>offset</code>, <code>range</code>, <code>rhsValue</code>).</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sConstants"></a>
Constants</h2>
<ol type="1">
<li>All uppercase; words separated by underscores. If not in a namespace or local to a source file, then prefixed with the library name in all caps (e.g., <code>HALF_FLOAT_TYPENAME_SUFFIX</code>, <code>ZIP_COMPRESSION_LEVEL</code>)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sEnumerationNames"></a>
Enumeration Names</h2>
<ol type="1">
<li>Mixed case; first letter uppercase (e.g., <code>GridClass</code>, <code>VecType</code>)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sEnumerationValues"></a>
Enumeration Values</h2>
<ol type="1">
<li>With <code>enum</code>, all uppercase with words separated by underscores (e.g., <code>GRID_LEVEL_SET</code>, <code>VEC_INVARIANT</code>) and with a common prefix</li>
<li>With <span class="tt">enum class</span>, mixed case with the first letter uppercase (e.g., <code>GridClass::Unknown</code>, <code>GridClass::LevelSet</code>)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sTypedefs"></a>
Typedefs</h2>
<ol type="1">
<li>Mixed case; first letter uppercase (e.g., <code>ConstPtr</code>, <code>ValueType</code>)</li>
<li>Do not use a prefix.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sGlobalVariables"></a>
Global Variables</h2>
<ol type="1">
<li>Mixed case; always prefixed by <code>g</code> (e.g., <code>gRegistry</code>)</li>
<li>In general, try to use class static data instead of globals.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sGlobalFunctions"></a>
Global Functions</h2>
<ol type="1">
<li>Mixed case; always prefixed by <code>g</code> (e.g., <span class="tt">gFunc()</span>).</li>
<li>In general, try to use class static members instead of global functions.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sBooleans"></a>
Booleans</h2>
<ol type="1">
<li>When naming boolean functions and variables, use names that read as a condition (e.g., <span class="tt">if (grid.empty())</span>, <span class="tt">if (matrix.isInvertible())</span>).</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="sPractices"></a>
Practices</h1>
<h2 class="doxsection"><a class="anchor" id="sGeneral"></a>
General</h2>
<ol type="1">
<li>Code must compile without any warning messages at the default warning level.</li>
<li>Prefer the C++ Standard Library to the C Standard Library.</li>
<li>Restrict variables to the smallest scopes possible, and avoid defining local variables before giving them values. Prefer declarations inside conditionals: <span class="tt">if (Grid::Ptr grid = createGrid()) { ... }</span> instead of <span class="tt">Grid::Ptr grid = createGrid(); if (grid) { ... }</span></li>
<li>For new files, be sure to use the right license boilerplate per our license policy.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sFormatting"></a>
Formatting</h2>
<ol type="1">
<li>Indentation is 4 spaces. Do not use tabs.</li>
<li>Lines are no more than 100 characters long.</li>
<li>Use Unix-style carriage returns ("\n") rather than Windows/DOS ones ("\r\n").</li>
<li>Do not leave debug <span class="tt">printf</span>s or other debugging code lying around.</li>
<li>Leave a blank line between a group of variable declarations and other code.</li>
<li>Leave a space after the keywords <code>if</code>, <code>switch</code>, <code>while</code>, <code>do</code>, <code>for</code>, and <code>return</code>.</li>
<li>Leave a space on each side of binary operators such as <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>&amp;&amp;</code>, and <code>||</code>. For clarity in mathematical situations, you may omit the spaces on either side of <code>*</code> and <code>/</code> operators to emphasize their precedence over <code>+</code> and <code>-</code>.</li>
<li>Do not leave a space between any dereferencing operator (such as <code>*</code>, <code>&amp;</code>, <code></code>[], <code>-&gt;</code>, or <code></code>.) and its operands.</li>
<li>In parameter lists, leave a space after each comma.</li>
<li>Do not leave a space after an opening parenthesis or before a closing parenthesis.</li>
<li>Parentheses should be used to clarify operator precedence in expressions.</li>
<li>Do not leave a space before an end-of-statement semicolon.</li>
<li>Do not use literal tabs in strings or character constants. Rather, use spaces or "\t".</li>
<li>If a parameter list is too long, break it between parameters. Group related parameters on lines if appropriate.</li>
<li>Modified spacing is allowed to vertically align repetitive expressions.</li>
<li>Always begin numeric constants with a digit (e.g., 0.001 not .001).</li>
<li>Use K&amp;R-style brace placement in public code.</li>
<li>You may leave off braces for simple, single line flow control statements.</li>
<li>The return type in a function definition should go on a line by itself.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sIncludeStatements"></a>
Include Statements</h2>
<ol type="1">
<li>Always use double quotes ("") to include header files that live in the same directory as your source code.</li>
<li>Use angle brackets (&lt;&gt;) to include header files from outside a file&rsquo;s directory.</li>
<li>Do not use absolute paths in include directives.</li>
<li>If there is a header corresponding to a given source file, list it first, followed by other local headers, library headers and then system headers.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sHeaderFiles"></a>
Header Files</h2>
<ol type="1">
<li>Header files have a <span class="tt">.h</span> extension.</li>
<li>All header files should be bracketed by <code>#ifdef</code> "guard" statements.</li>
<li>In class definitions, list public, then protected, then private members.</li>
<li>List methods before variables.</li>
<li>Fully prototype all public functions and use descriptive naming for each argument.</li>
<li>Declare every function defined in a header but outside a class definition explicitly as <code>inline</code>.</li>
<li>Prefer forward declarations to <code>#include</code> directives in headers.</li>
<li>Do not take advantage of indirect inclusion of header files.</li>
<li>Do not use anonymous namespaces in header files.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sSourceFiles"></a>
Source Files</h2>
<ol type="1">
<li>Source files have a <span class="tt">.cc</span> extension.</li>
<li>Properly prototype all file static functions with usefully named arguments.</li>
<li>Whenever possible, put variables and functions in an anonymous namespace.</li>
<li>Avoid global variables.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sComments"></a>
Comments</h2>
<ol type="1">
<li>Use <code>//</code> style comments instead of / * * / style, even for multi-line comments.</li>
<li>Use multi-line comments to describe following paragraphs of code.</li>
<li>Use end-of-line comments to describe variable declarations or to clarify a single statement.</li>
<li>Large blocks of code should be commented out with <span class="tt">#if 0</span> and <code>#endif</code>.</li>
<li>Do not leave obsolete code fragments within comments as an historical trail.</li>
<li>Document public code with Doxygen comments, formatted as follows: <pre class="fragment">/// @brief Create a new grid of type @c GridType classified as a "Level Set",
/// i.e., a narrow-band level set.
///
/// @param voxelSize  the size of a voxel in world units
/// @param halfWidth  the half width of the narrow band in voxel units
///
/// @details The voxel size and the narrow band half width define the grid's
/// background value as halfWidth*voxelWidth.  The transform is linear
/// with a uniform scaling only corresponding to the specified voxel size.
///
/// @note It is generally advisable to specify a half-width of the narrow band
/// that is larger than one voxel unit, otherwise zero crossings are not guaranteed.
template&lt;typename GridType&gt;
typename GridType::Ptr createLevelSet(
    Real voxelSize = 1.0, Real halfWidth = LEVEL_SET_HALF_WIDTH);
</pre></li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sPrimitiveTypes"></a>
Primitive Types</h2>
<ol type="1">
<li>Avoid writing code that is dependent on the bit size of primitive values, but when specific bit sizes are required, use explicitly-sized types such as <code>int32_t</code> or <code>uint64_t</code>.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sMacros"></a>
Macros</h2>
<ol type="1">
<li>Avoid macros for constants. Use global static constants instead. (Local static constants are not guaranteed to be initialized in a thread-safe manner.)</li>
<li>Avoid macro functions. Use <code>inline</code> and templates instead.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sClasses"></a>
Classes</h2>
<ol type="1">
<li>Constructors that can be called with only one argument should be prefixed with the <code>explicit</code> keyword to avoid unintended type conversions.</li>
<li>Never call virtual methods from destructors.</li>
<li>If you have a copy constructor, make sure you have an assignment operator.</li>
<li>If you have an assignment operator, you probably need a copy constructor.</li>
<li>If you have data members that are pointers to dynamically allocated memory, make sure you have a copy constructor and an assignment operator, both of which do the right thing with that memory.</li>
<li>Classes which are to be subclassed always have a virtual destructor, even if it is empty.</li>
<li>Check against self assignment and return <span class="tt">*this</span> in assignment operators.</li>
<li>Declare methods as <code>const</code> wherever possible.</li>
<li>Declare object-valued input arguments as const references wherever possible. Primitives may be passed by value, however.</li>
<li>Arithmetic, logical, bitwise, dereference, and address of operators should only be used when their semantics are clear, obvious, and unambiguous.</li>
<li>The application operator [ () ] is allowed for functors.</li>
<li>Conversion operators should be avoided.</li>
<li>Never return const references to stack allocated or implicitly computed objects.</li>
<li>If a class does not have a copy constructor and/or assignment operator, consider creating a private unimplemented copy constructor and/or assignment operator to prevent automatically generated versions from being used.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sConditionalStatements"></a>
Conditional Statements</h2>
<ol type="1">
<li>For test expressions, use a form that indicates as clearly as possible the types of operands by avoiding implicit casts.</li>
<li>Assignments that occur within conditional statements must have no effect in the enclosing scope.</li>
<li>Allow for arithmetic imprecision when comparing floating point values.</li>
<li>In switch statements, always comment fallthroughs and empty cases.</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="sNamespaces"></a>
Namespaces</h1>
<ol type="1">
<li>Namespaces should be used whenever possible.</li>
<li>Avoid pulling in entire namespaces with <code>using</code> directives (e.g., <span class="tt">using namespace std;</span>).</li>
<li><code>using</code> declarations are allowed for individual symbols (e.g., <span class="tt">using std::vector;</span>), but they should never appear in a header file.</li>
<li>Define global operators in the namespace of their arguments.</li>
<li>Namespaces are not indented.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sExceptions"></a>
Exceptions</h2>
<ol type="1">
<li>Appropriate use of exceptions is encouraged.</li>
<li>Methods should declare all exceptions they might throw using comments, but not exception specifications.</li>
<li>Throw scope local exception instances, not pointers or references or globals.</li>
<li>Catch exceptions by reference.</li>
<li>Never allow an exception to escape from a destructor.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sTemplates"></a>
Templates</h2>
<ol type="1">
<li>Use <code>typename</code> rather than <code>class</code> when declaring template type parameters.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="sMiscellaneous"></a>
Miscellaneous</h2>
<ol type="1">
<li>Don&rsquo;t use pointers to run through arrays of non-primitive types. Use explicit array indexing, iterators or generic algorithms instead.</li>
<li>Use C++ casts (<span class="tt">static_cast&lt;int&gt;(x)</span> or <span class="tt">int(x)</span>), not C casts (<span class="tt">(int)x</span>).</li>
<li>Multiple variables of the same data type may be declared on the same line if closely related.</li>
<li>Library code must never deliberately terminate the application in response to an error condition.</li>
<li>Avoid using malloc/free when new/delete can be used instead.</li>
<li>Avoid <code>goto</code>.</li>
<li>Avoid "magic numbers". Use named constants when necessary.</li>
<li>If you use typeid/typeinfo, be aware that although all runtimes support <span class="tt">typeinfo::name()</span>, the format of the string it returns varies between compilers and even for a given compiler the value is not guaranteed to be unique. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="index.html">OpenVDB</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
